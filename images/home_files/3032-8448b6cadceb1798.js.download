!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="46814841-0b5b-4edd-99c5-4d1bffcf5011",n._sentryDebugIdIdentifier="sentry-dbid-46814841-0b5b-4edd-99c5-4d1bffcf5011")}catch(n){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"15e16f7d"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3032],{45987:function(n,e,t){t.d(e,{Fh:function(){return m},IN:function(){return D},s7:function(){return w}});var r=t(72006),o=t(43119),i=t(71440),u=t(88207),a=t(24635),s=t(50216);function c(){var n=(0,o.Z)(["\n  fragment HostingTierReplPowerUps on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,o.Z)(["\n  fragment HostingTierPowerUpCostDetails on PowerUpCostsType {\n    hostingTierE2Micro {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Small {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Medium {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierN1Custom1_4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard2 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,o.Z)(["\n  fragment HostingTierPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      __typename\n      ... on PowerUpCostsType {\n        ...HostingTierPowerUpCostDetails\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return n},n}function p(){var n=(0,o.Z)(["\n  query HostingTierPowerUp($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          __typename\n        }\n        ...HostingTierReplPowerUps\n        ...HostingTierPowerUpCosts\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return n},n}function f(){var n=(0,o.Z)(["\n  mutation SetHostingTier($input: SetHostingTierInput!) {\n    setHostingTier(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on SetHostingTierResult {\n        repl {\n          ... on Repl {\n            ...HostingTierReplPowerUps\n            ...HostingTierPowerUpCosts\n          }\n        }\n        currentUser {\n          ...PowerUpMutationReturnFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return f=function(){return n},n}var g={},m=(0,i.Ps)(c()),y=(0,i.Ps)(l()),v=(0,i.Ps)(d(),y),h=(0,i.Ps)(p(),m,v);function w(n){var e=(0,r.Z)({},g,n);return a.a(h,e)}var Z=(0,i.Ps)(f(),m,v,u.E_);function D(n){var e=(0,r.Z)({},g,n);return s.D(Z,e)}},89855:function(n,e,t){t.d(e,{BX:function(){return D},VR:function(){return Z},hD:function(){return S}});var r,o=t(57389),i=t(74985),u=t(88965),a=t(53312),s=t(26473),c=t(51631),l=t(27773),d=t(78572),p=t(69600),f=t(61025),g=t(16296),m=t(91888),y=t(16572),v=t(79824),h=t(74970),w=t(95183),Z=(r={},(0,o.Z)(r,c.Fe.Suspended,{title:"Paused",color:u.TV.greyDefault,colorway:"grey",icon:(0,i.tZ)(h.Z,{})}),(0,o.Z)(r,c.Fe.UpdatingTier,{title:"Updating tier",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,c.Fe.Suspending,{title:"Pausing",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,c.Fe.Resuming,{title:"Resuming",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,c.Fe.Pending,{title:"Provisioning",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,c.Fe.Building,{title:"Building",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,c.Fe.Running,{title:"Bundling",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,c.Fe.Promoting,{title:"Promoting",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,c.Fe.Failed,{title:"Failed",color:u.TV.accentNegativeDefault,colorway:"negative",icon:(0,i.tZ)(v.Z,{})}),(0,o.Z)(r,c.Fe.Success,{title:"Deployed",color:u.TV.accentPositiveDefault,colorway:"positive"}),r);function D(n){switch(n){case c.Fe.Building:case c.Fe.Promoting:case c.Fe.Running:case c.Fe.Pending:return"is deploying";case c.Fe.Resuming:return"is resuming";case c.Fe.Suspending:return"is pausing";case c.Fe.Failed:return"failed to deploy";case c.Fe.Success:return"deployed";case c.Fe.Suspended:return"paused";case c.Fe.UpdatingTier:return"is updating tier"}}function C(n){switch(n){case c.Fe.Building:case c.Fe.Promoting:case c.Fe.Running:case c.Fe.Pending:case c.Fe.Failed:case c.Fe.Success:return!0;case c.Fe.Resuming:case c.Fe.Suspending:case c.Fe.Suspended:case c.Fe.UpdatingTier:return!1}}var b=(0,f.X)({root:[u.l0.rowWithGap(0),u.l0.flex.shrink(1)],dot:[u.l0.width("8px"),u.l0.height("8px"),u.l0.borderRadius("full"),u.l0.flex.shrink(0),u.l0.pr(4)],name:[u.l0.color.foregroundDefault,u.l0.fontWeight.medium],item:[u.l0.rowWithGap(8),u.l0.pr(4),u.l0.align.center,u.l0.flex.growAndShrink(1)],itemMainText:[u.l0.flex.growAndShrink(1),u.l0.align.center],itemRight:[u.l0.textAlign.right],itemContent:[u.l0.rowWithGap(8),u.l0.flex.growAndShrink(1),u.l0.align.center]}),S=function(n){var e=n.onClick,t=(0,d.kW)(),r=(0,d.$y)();if(t===p.z.Loading||!r)return(0,i.tZ)(l.Z,{size:12});var o=r.status,c=(o in Z?Z[o]:{color:u.TV.greyDefault}).color;return(0,i.tZ)(s.G,{css:b.root,children:(0,i.BX)(s.G,{css:b.item,children:[(0,i.tZ)(s.G,{tag:"span",css:b.dot,style:{backgroundColor:c,boxShadow:"0 0 12px ".concat(c)}}),(0,i.tZ)(s.G,{css:b.itemMainText,children:(0,i.BX)(a.xv,{multiline:!1,children:[(0,i.tZ)("span",{css:b.name,children:r.user.displayName+" "}),D(o)+" ",C(o)?(0,y.Z)(new Date(r.timeCreated),Date.now(),{addSuffix:!0}):null]})}),(0,i.tZ)(s.G,{css:b.itemRight,children:(0,i.tZ)(g.hU,{alt:"View deploy logs",onClick:e,children:(0,i.tZ)(m.Z,{})})})]})})}},77068:function(n,e,t){t.d(e,{u:function(){return i}});var r=t(43119);function o(){var n=(0,r.Z)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return o=function(){return n},n}var i=(0,t(71440).Ps)(o())},89720:function(n,e,t){t.d(e,{P3:function(){return c},Q5:function(){return s},QO:function(){return d},SF:function(){return l},ZG:function(){return a}});var r=t(66091),o=t(5683),i=t(83451),u=t(45347),a=function(n){"use strict";(0,o.Z)(t,n);var e=(0,u.Z)(t);function t(){var n;return(0,r.Z)(this,t),(n=e.apply(this,arguments)).name="RunCommandNotFoundError",n.message="Could not find run command",n}return t}((0,i.Z)(Error)),s=function(n){"use strict";(0,o.Z)(t,n);var e=(0,u.Z)(t);function t(){var n;return(0,r.Z)(this,t),(n=e.apply(this,arguments)).name="SubdomainNotFoundError",n.message="Could not find subdomain",n}return t}((0,i.Z)(Error)),c=function(n){"use strict";(0,o.Z)(t,n);var e=(0,u.Z)(t);function t(){var n;return(0,r.Z)(this,t),(n=e.apply(this,arguments)).name="AppTypeFoundError",n.message="Could not find app type",n}return t}((0,i.Z)(Error)),l=function(n){"use strict";(0,o.Z)(t,n);var e=(0,u.Z)(t);function t(){var n;return(0,r.Z)(this,t),(n=e.apply(this,arguments)).name="PublicDirNotFoundError",n.message="Could not find public directory",n}return t}((0,i.Z)(Error)),d=function(n){"use strict";(0,o.Z)(t,n);var e=(0,u.Z)(t);function t(){var n;return(0,r.Z)(this,t),(n=e.apply(this,arguments)).name="ReplOfflineError",n.message="Repl is offline",n}return t}((0,i.Z)(Error))},78572:function(n,e,t){t.d(e,{jd:function(){return Pn},CK:function(){return Q},My:function(){return q},bA:function(){return W},_U:function(){return Zn},rm:function(){return In},XA:function(){return _n},$y:function(){return ln},ev:function(){return gn},Sl:function(){return an},hn:function(){return tn},pn:function(){return pn},kW:function(){return nn},H7:function(){return on},v5:function(){return K},XZ:function(){return j},gg:function(){return xn},U:function(){return Dn},m8:function(){return Fn},FN:function(){return sn},mF:function(){return En}});var r=t(57135),o=t(72006),i=t(4405),u=t(2272),a=t(96583),s=t(51467),c=t(34547),l=t(51631),d=t(92153),p=t(90234),f=t(50959),g=t(96742),m=t(76449),y=t(89720),v=t(20854),h=t(43119),w=t(71440),Z=t(45987),D=t(22295),C=t(24635),b=t(9125),S=t(86615),P=t(50216);function F(){var n=(0,h.Z)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return F=function(){return n},n}function T(){var n=(0,h.Z)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lang {\n      id\n      displayName\n    }\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    ...HostingTierReplPowerUps\n  }\n  ","\n  ","\n"]);return T=function(){return n},n}function R(){var n=(0,h.Z)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n  }\n  ","\n"]);return R=function(){return n},n}function _(){var n=(0,h.Z)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n      }\n    }\n  }\n"]);return _=function(){return n},n}function H(){var n=(0,h.Z)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return H=function(){return n},n}function E(){var n=(0,h.Z)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          ...HostingTierReplPowerUps\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return E=function(){return n},n}function U(){var n=(0,h.Z)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return U=function(){return n},n}var I={},x=(0,w.Ps)(F(),D.uC,D.MX),B=(0,w.Ps)(T(),x,Z.Fh),N=(0,w.Ps)(R(),B);var V=(0,w.Ps)(_());var k=(0,w.Ps)(H(),D.MX,D.uC);var z=(0,w.Ps)(E(),Z.Fh,x);var $=(0,w.Ps)(U(),D.MX);function O(n){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(n){var e,t,r,o,i,u,s,c,l,d,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(e=n.command,t=n.replId,r=n.buildId,o=n.machineConfigurationId,i=n.maxMachineInstances,!v.l)throw new Error("expected apolloClient to be initialized");return[4,v.l.mutate({mutation:z,variables:{input:{command:e,replId:t,buildId:r,machineConfigurationId:o,maxMachineInstances:i}}})];case 1:if(l=a.sent(),null===(u=l.errors)||void 0===u?void 0:u.length)throw new Error(l.errors.map((function(n){return n.message})).join(", "));if("SendDeploymentLifecycleCommandResult"!==(null===(s=l.data)||void 0===s||null===(c=s.sendDeploymentLifecycleCommand)||void 0===c?void 0:c.__typename))throw new Error((null===(d=l.data)||void 0===d||null===(p=d.sendDeploymentLifecycleCommand)||void 0===p?void 0:p.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}function X(n){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)((function(n){var e,t,r,o,i,u,s,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(e=n.buildId,t=n.targetDeploymentId,!v.l)throw new Error("expected apolloClient to be initialized");return[4,v.l.mutate({mutation:$,variables:{input:{buildId:e,targetDeploymentId:t}}})];case 1:if(u=a.sent(),null===(r=u.errors)||void 0===r?void 0:r.length)throw new Error(u.errors.map((function(n){return n.message})).join(", "));if("FailHostingBuildResult"!==(null===(o=u.data)||void 0===o||null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename))throw new Error((null===(s=u.data)||void 0===s||null===(c=s.failHostingBuild)||void 0===c?void 0:c.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}var M=t(37487),G=t(69600),J=t(52994),Q=(0,p.cn)({}),W=(0,p.cn)({}),q=(0,p.cn)({});function j(){return(0,M.Hg)(W)}function K(){return(0,M.Hg)(q)}var Y=(0,p.cn)(G.z.Loading);function nn(){return(0,M.Hg)(Y)}var en=(0,p.cn)(void 0);function tn(){return(0,M.Hg)(en)}var rn=(0,p.cn)(void 0);function on(){return(0,M.Hg)(rn)}var un=(0,p.cn)(void 0);function an(n){var e,t=function(n){var e=(0,o.Z)({},I,n);return C.a(N,e)}({variables:{replId:n}}),r=t.data,i=t.refetch,u="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,a="ReplPowerUpTypes"===(null===u||void 0===u?void 0:u.powerUps.__typename)?u.powerUps:null;return{hostingTier:null!==(e=null===a||void 0===a?void 0:a.hostingTier)&&void 0!==e?e:null,refetch:i}}function sn(n){var e=an(n).hostingTier;return Boolean(e)}var cn=(0,p.cn)(void 0);function ln(){return(0,M.Hg)(cn)}var dn=(0,p.cn)(void 0);function pn(){return(0,M.Hg)(dn)}var fn=(0,p.cn)(void 0);function gn(){return(0,M.Hg)(fn)}var mn=(0,p.cn)(null,(function(n,e){e(en,void 0),e(rn,void 0),e(cn,void 0),e(dn,void 0),e(Y,G.z.Ready)})),yn=(0,p.cn)(null,(function(n,e,t){var r,o="Repl"===t.repl.__typename?t.repl:null;if(o){e(un,{id:o.lang.id,displayName:o.lang.displayName,isVnc:Boolean(o.config.isVnc)});var i,u=o.hostingDeployment;if(u)return"HostingDeployment"!==u.__typename?e(fn,"Unexpected hosting deployment typename: ".concat(u.__typename)):(e(en,u.id),e(cn,u.currentBuild),e(rn,u.replitAppSubdomain||(0,g.Jw)({replSlug:o.slug,username:null===(i=o.owner)||void 0===i?void 0:i.username})),u.inProgressBuild?(e(dn,u.inProgressBuild),void e(Y,G.z.Deploying)):void e(Y,(0,J.Zx)(u.currentBuild.status)));e(rn,(0,g.Jw)({replSlug:o.slug,username:null===(r=o.owner)||void 0===r?void 0:r.username})),e(Y,G.z.Ready)}}));function vn(){var n=(0,M.$X)(yn),e=(0,M.$X)(Tn);return(0,u.Z)(function(n){var e=(0,o.Z)({},I,n);return b.t(N,e)}({fetchPolicy:"no-cache",onCompleted:n,onError:function(n){e(n.message)}}),1)[0]}var hn=(0,p.cn)(null,(function(n,e,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=n(Y),o=n(dn),i=n(cn),u=t.status;if(r===G.z.Deploying){if(!o)return void e(Tn,"No deployment in progress found");e(dn,(0,d.ZP)(o,(function(n){n.status=u}))),u!==l.Fe.Success&&u!==l.Fe.Failed||(e(dn,void 0),u!==l.Fe.Success&&i||e(cn,(0,d.ZP)(o,(function(n){n.status=u,n.hasImageTag=o.provider!==l.r4.Static&&u===l.Fe.Success}))))}else if(r===G.z.ProcessingLifecycleCommand){if(!i)return void e(Tn,"No current build found");e(cn,(0,d.ZP)(i,(function(n){n.status=u})))}e(Y,(0,J.Zx)(u)),t.message&&u===l.Fe.Failed&&e(Tn,t.message)}})),wn=(0,p.cn)(null);function Zn(){return(0,M.Hg)(wn)}function Dn(n){var e=(0,M.yL)(wn),t=(0,s.Z)(n);f.useEffect((function(){return e.subscribe((function(n){n&&t.current(n)}))}),[e,t])}var Cn=(0,p.cn)((function(n){switch(n(Y)){case G.z.Deploying:var e;return null===(e=n(dn))||void 0===e?void 0:e.id;case G.z.ProcessingLifecycleCommand:var t;return null===(t=n(cn))||void 0===t?void 0:t.id;default:return}})),bn=(0,p.cn)(null,function(){var n=(0,r.Z)((function(n,e,t){var r;return(0,a.__generator)(this,(function(n){return(r=t.data.data)?(e(hn,r.hostingBuildDeployActionUpdates),e(wn,r.hostingBuildDeployActionUpdates),[2]):[2]}))}));return function(e,t,r){return n.apply(this,arguments)}}());function Sn(n){var e=vn(),t=(0,M.$X)(bn),r=(0,M.$X)(Tn);(0,f.useEffect)((function(){e({variables:{replId:n}})}),[e,n]);var i=(0,M.Hg)(Cn);!function(n){var e=(0,o.Z)({},I,n);S.m(V,e)}({variables:{input:{buildId:null!==i&&void 0!==i?i:""}},skip:!i,onData:t,onError:function(n){r(n.message)}})}function Pn(n){return Sn(n.replId),null}function Fn(){var n=(0,c.Z)(),e=vn(),t=(0,M.$X)(Y);return f.useCallback((function(){return t(G.z.Loading),e({variables:{replId:n}})}),[e,t,n])}var Tn=(0,p.cn)(null,(function(n,e,t){e(fn,t)}));var Rn=(0,p.cn)(null,(function(n,e,t){var r,o=t.deployHostingBuild2;o&&("DeployHostingBuild2Result"===o.__typename?(e(dn,o.build),e(en,o.targetDeployment.id),e(rn,null!==(r=o.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),e(Y,G.z.Deploying)):e(Tn,o.message))}));function _n(){var n=(0,c.Z)(),e=tn(),t=K(),i=(0,M.Hg)(Q),s=j(),d=(0,u.Z)(function(n){var e=(0,o.Z)({},I,n);return P.D(k,e)}(),1)[0],p=(0,M.$X)(Rn),v=(0,M.$X)(Tn),h=(0,M.$X)(Y),w=(0,M.XD)(dn),Z=ln();return f.useCallback(function(){var o=(0,r.Z)((function(r){var o,u,c,f,D,C,b,S,P,F,T,R,_,H;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(o=r.envVars,u=r.subdomain,c=r.machineConfigurationId,f=r.maxMachineInstances,D=r.config,w())return v("Deployment already in progress"),[2];a.label=1;case 1:return a.trys.push([1,5,,6]),h(G.z.Preparing),[4,(0,m.$f)(t)];case 2:if(C=a.sent(),S=(b=D||C).buildCommand,P=b.runCommand,F=b.publicDir,T=b.ignorePorts,R=Z?function(n){var e=n.provider,t=n.ignorePorts;switch(e){case l.r4.Static:return l.Vp.Static;case l.r4.CloudRun:return l.Vp.CloudRun;default:return t?l.Vp.Worker:l.Vp.Server}}({provider:null===Z||void 0===Z?void 0:Z.provider,ignorePorts:Boolean(T)}):b.appType,!R)throw new y.P3;if(!u)throw new y.Q5;if(R===l.Vp.Static){if(!(0,g.Ar)(F))throw new y.SF}else if(!(0,g.Ar)(P))throw new y.ZG;return[4,(0,m.OD)({buildCommand:S,runCommand:P,appType:R,publicDir:F,ignorePorts:T},C,{dotReplit:t,fs:s,container:i})];case 3:return a.sent(),_=(0,J.oU)(R),[4,d({variables:{input:{replId:n,targetDeploymentId:e,targetMachineConfigurationId:c,maxMachineInstances:f,commands:{build:S,run:P||""},envVars:o,subdomain:u,provider:_,appType:R}},onCompleted:p})];case 4:return a.sent(),[3,6];case 5:throw H=a.sent(),h(G.z.Ready),H;case 6:return[2]}}))}));return function(n){return o.apply(this,arguments)}}(),[d,p,v,h,w,e,n,i,s,t])}var Hn=(0,p.cn)(null,function(){var n=(0,r.Z)((function(n,e,t){var r,u,s,c,p,f,g,m,y;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(r=t.args,u=t.replId,s=void 0,(c=r.command)===l.Qc.UpdateMachineConfiguration){if(!(p=n(cn)))return e(Tn,"No current build found"),[2];if(!r.machineConfigurationId)return e(Tn,"No machine configuration found"),[2];(f=(0,J.Ti)(c))&&(e(cn,(0,d.ZP)(p,(function(n){n.status=f}))),e(Y,(0,J.Zx)(f)))}if(c===l.Qc.Resume||c===l.Qc.Suspend){if(!(g=n(cn)))return e(Tn,"No current build found"),[2];s=g.id,(m=(0,J.Ti)(c))&&(e(cn,(0,d.ZP)(g,(function(n){n.status=m}))),e(Y,(0,J.Zx)(m)))}a.label=1;case 1:return a.trys.push([1,3,,4]),[4,O((0,i.Z)((0,o.Z)({},r),{buildId:s,replId:u}))];case 2:return a.sent(),c===l.Qc.Destroy&&e(mn),[3,4];case 3:return y=a.sent(),e(Tn,y.message),[3,4];case 4:return[2]}}))}));return function(e,t,r){return n.apply(this,arguments)}}());function En(){var n=(0,c.Z)(),e=(0,M.$X)(Hn);return f.useCallback(function(){var t=(0,r.Z)((function(t){return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e({replId:n,args:t})];case 1:return r.sent(),[2]}}))}));return function(n){return t.apply(this,arguments)}}(),[e,n])}var Un=(0,p.cn)(null,function(){var n=(0,r.Z)((function(n,e){var t,r,o,i;return(0,a.__generator)(this,(function(u){switch(u.label){case 0:if(!(t=n(en)))return e(Tn,"No deployment found"),[2];if(!(r=n(dn)))return e(Tn,"No deployment in progress found"),[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,X({buildId:r.id,targetDeploymentId:t})];case 2:return u.sent(),[3,4];case 3:return o=u.sent(),e(Tn,o.message),[2];case 4:return e(dn,void 0),e(Y,G.z.Ready),!(i=n(cn))||i.status!==l.Fe.Success&&i.status!==l.Fe.Failed?(e(cn,(0,d.ZP)(r,(function(n){n.status=l.Fe.Failed}))),[2]):[2]}}))}));return function(e,t){return n.apply(this,arguments)}}());function In(){return(0,M.$X)(Un)}function xn(){var n=(0,M.Hg)(un);return n?"nix"!==n.id&&"html"!==n.id?{isDeployableRepl:!1,reason:"You will need to upgrade your ".concat(n.displayName," Repl to a Nix template in order to deploy.")}:{isDeployableRepl:!0}:{isDeployableRepl:!1,reason:"Could not find repl language."}}},37487:function(n,e,t){t.d(e,{$X:function(){return d},Hg:function(){return c},XD:function(){return p},aT:function(){return a},yL:function(){return l}});var r=t(50959),o=t(71999),i=t(28999),u=t(28132),a=(0,r.createContext)(null);function s(){var n=(0,r.useContext)(a);if(!n)throw new Error("Expected store in context");return n}function c(n){return(0,o.Dv)(n,{store:s()})}function l(n){return(0,u.b)(n,s())}var d=function(n){return(0,o.b9)(n,{store:s()})};function p(n){return(0,i.lV)((0,r.useCallback)((function(e){return e(n)}),[n]),{store:s()})}},69600:function(n,e,t){var r;t.d(e,{z:function(){return r}}),function(n){n.Loading="Loading",n.Ready="Ready",n.Preparing="Preparing",n.Deploying="Deploying",n.ProcessingLifecycleCommand="ProcessingLifecycleCommand",n.Suspended="Paused"}(r||(r={}))},52994:function(n,e,t){t.d(e,{Ti:function(){return a},Zx:function(){return u},oU:function(){return s}});var r=t(69600),o=t(51631),i=t(70232);function u(n){switch(n){case o.Fe.Failed:case o.Fe.Success:return r.z.Ready;case o.Fe.Suspended:return r.z.Suspended;case o.Fe.Suspending:case o.Fe.Resuming:case o.Fe.UpdatingTier:return r.z.ProcessingLifecycleCommand;case o.Fe.Pending:case o.Fe.Building:case o.Fe.Running:case o.Fe.Promoting:return r.z.Deploying;default:(0,i.Z)(n)}}function a(n){switch(n){case o.Qc.Destroy:return null;case o.Qc.UpdateMachineConfiguration:return o.Fe.UpdatingTier;case o.Qc.Suspend:return o.Fe.Suspending;case o.Qc.Resume:return o.Fe.Resuming;default:(0,i.Z)(n)}}function s(n){switch(n){case o.Vp.CloudRun:return o.r4.CloudRun;case o.Vp.Worker:case o.Vp.Server:return o.r4.Gce;case o.Vp.Static:return o.r4.Static;default:(0,i.Z)(n)}}},76449:function(n,e,t){t.d(e,{$f:function(){return Z},OD:function(){return b},xk:function(){return y}});var r=t(57135),o=t(2272),i=t(96583),u=t(48262),a=t(19499),s=t(89720),c=t(51631),l=t(34489),d=t(96742),p=t(4024),f=t(75665),g=t(88688),m=t(4561);function y(n){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)((function(n){var e,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.readFile(".env")];case 1:if((e=r.sent()).error===m.Df.NotFound)return[2,[]];if(e.error)throw e.error;return t=l.Z.parse(e.content.toString()),[2,Object.entries(t).map((function(n){var e=(0,o.Z)(n,2);return{name:e[0],value:e[1]}}))]}}))}))).apply(this,arguments)}function h(n){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)((function(n){var e,t,r;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.getConfig()];case 1:if(e=o.sent(),t=e.config,(r=e.error)===g.Yt.NotFound)return[2];if(r)throw new Error("Failed to get .replit config with Error: "+r);return[2,t]}}))}))).apply(this,arguments)}function Z(n){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)((function(n){var e,t,r,o,u,s,l,d,f,g,m,y,v;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=null,t=null,r=null,o=null,u=null,[4,h(n)];case 1:if(!(s=i.sent()))return[2,{buildCommand:e,runCommand:t,ignorePorts:r,appType:o,publicDir:u}];if(!s.deployment)return[3,2];switch(l=s.deployment,d=l.build,f=l.run,g=l.ignorePorts,m=l.target,y=l.publicDir,d&&(e=(0,p.Cq)(d)),f&&(t=(0,p.Cq)(f)),null!==g&&void 0!==g&&(r=g),m){case a.api.DeploymentConfig.Target.GCE:o=r?c.Vp.Worker:c.Vp.Server;break;case a.api.DeploymentConfig.Target.CLOUDRUN:o=c.Vp.CloudRun;break;case a.api.DeploymentConfig.Target.STATIC:o=c.Vp.Static}return y&&(u=y),[3,4];case 2:return[4,n.getRunConfig()];case 3:v=i.sent(),s.compile&&(e=(0,p.Cq)(s.compile)),v.run?t=(0,p.Cq)(v.run.run):s.run&&(t=(0,p.Cq)(v.run)),i.label=4;case 4:return[2,{buildCommand:e,runCommand:t,ignorePorts:r,appType:o,publicDir:u}]}}))}))).apply(this,arguments)}var C={buildCommand:{delete:function(){return(0,f.xz)("deployment/build")},create:function(n){return(0,f.pi)(n.toString())}},runCommand:{delete:function(){return(0,f.xz)("deployment/run")},create:function(n){return(0,f.X6)(n.toString())}},ignorePorts:{delete:function(){return(0,f.xz)("deployment/ignorePorts")},create:function(n){return(0,f.KB)(Boolean(n))}},appType:{delete:function(){return(0,f.xz)("deployment/deploymentTarget")},create:function(n){var e=null;switch(n){case c.Vp.Server:case c.Vp.Worker:e="gce";break;case c.Vp.CloudRun:e="cloudrun";break;case c.Vp.Static:e="static"}return e?(0,f.zk)(e):null}},publicDir:{delete:function(){return(0,f.xz)("deployment/publicDir")},create:function(n){return(0,f.TT)(n.toString())}}};function b(n,e,t){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)((function(n,e,t){var r,o,a,c,l,p,f,g,y,v,h,w,Z,D,b,S,P,F;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=t.fs,o=t.container,a=t.dotReplit,c=[],l=!0,p=!1,f=void 0;try{for(g=Object.keys(n)[Symbol.iterator]();!(l=(y=g.next()).done);l=!0)v=y.value,w=n[h=v],Z=e[h],D=C[h],w!==Z&&("string"===typeof w&&(0,d.Ar)(w)||"boolean"===typeof w&&w?(b=D.create(w))&&c.push(b):c.push(D.delete()))}catch(T){p=!0,f=T}finally{try{l||null==g.return||g.return()}finally{if(p)throw f}}if(o.getConnectionState()!==u.em.CONNECTED)throw new s.QO;return c.length?[4,a.updateDotReplit(c)]:[3,2];case 1:if(S=i.sent(),P=S.error)throw new Error(P);i.label=2;case 2:return F=null,[4,new Promise((function(n){r.getStatus()!==m.kO.Syncing&&n(!0),F=setInterval((function(){r.getStatus()===m.kO.Syncing||n(!0)}),1e3)}))];case 3:return i.sent(),F&&clearInterval(F),[2]}}))}))).apply(this,arguments)}},22295:function(n,e,t){t.d(e,{MX:function(){return g},bN:function(){return f},uC:function(){return p}});var r=t(43119),o=t(71440);function i(){var n=(0,r.Z)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return i=function(){return n},n}function u(){var n=(0,r.Z)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return u=function(){return n},n}function a(){var n=(0,r.Z)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(["\n  fragment MachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    vcpu\n    memory\n  }\n"]);return s=function(){return n},n}function c(){var n=(0,r.Z)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    machineConfiguration {\n      ...MachineConfiguration\n    }\n    maxMachineInstances\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n  ","\n"]);return c=function(){return n},n}var l=(0,o.Ps)(i()),d=(0,o.Ps)(u(),l),p=(0,o.Ps)(a()),f=(0,o.Ps)(s()),g=(0,o.Ps)(c(),d,p,f)},96742:function(n,e,t){t.d(e,{Ar:function(){return u},GV:function(){return a},Jw:function(){return s}});var r=t(73966),o=t.n(r),i=t(30504),u=function(n){return"string"===typeof n&&""!==n.trim()},a=function(n){return"object"===typeof n&&"string"===typeof n.name&&"string"===typeof n.value&&""!==n.name};function s(n){var e=n.replSlug,t=n.username,r=t?"-".concat(t):"",u=i.m7-("".length+r.length);if(u>0){var a=o()(e).slice(0,u),s="".concat("").concat(a).concat(r);if(s.length<=i.m7)return s}return"".concat("").concat(o()(e)).concat(r)}},4024:function(n,e,t){t.d(e,{Cq:function(){return r}});t(19499);var r=function(n){return n&&n.args?(n.args&&n.args.length>=3&&"sh"===n.args[0]&&"-c"===n.args[1]?n.args.slice(2):n.args).join(" "):""}},75665:function(n,e,t){t.d(e,{$0:function(){return a},D3:function(){return i},If:function(){return o},Jk:function(){return s},KB:function(){return d},KQ:function(){return r},TT:function(){return f},X6:function(){return c},pi:function(){return l},xz:function(){return u},zk:function(){return p}});var r=function(n){return{op:"add",path:"run",value:JSON.stringify(n)}},o=function(n){return{op:"add",path:"entrypoint",value:JSON.stringify(n)}},i=function(n){return{op:"add",path:"compile",value:JSON.stringify(n)}},u=function(n){return{op:"remove",path:"string"===typeof n?n:n.join("/"),value:""}},a=function(n){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(n)}},s=function(n){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(n)}},c=function(n){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",n])}},l=function(n){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",n])}},d=function(n){return{path:"deployment/ignorePorts",op:"add",value:n.toString()}},p=function(n){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(n)}},f=function(n){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(n)}}}}]);
//# sourceMappingURL=3032-8448b6cadceb1798.js.map