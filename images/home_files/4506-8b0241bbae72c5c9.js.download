!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="42149173-4685-458c-8e68-00fb5b8f0694",e._sentryDebugIdIdentifier="sentry-dbid-42149173-4685-458c-8e68-00fb5b8f0694")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"15e16f7d"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4506],{43943:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(2272),i=t(74985),o=t(50959),l=t(39059),a=t(92361),c=t(95141),u=t(26473),s=t(88965),d=t(28317),m=t(61025),p=u.K.div,h=(0,m.X)({container:[s.l0.colWithGap(8)],contentContainer:[s.l0.position.relative],buttonContainer:[s.l0.align.start]});function f(e){var n=e.children,t=e.collapsedHeight,s=(0,r.Z)(o.useState(!1),2),m=s[0],f=s[1],v=o.useId(),Z="".concat("ExpandableContent"+v),g="".concat("ExpandableContent"+v),b=(0,d.b)({defaultExpanded:!1}),C=b.isExpanded,w=b.toggle,x=(0,a.Z)((function(e){var n=e.height;void 0!==n&&f(n>t)}));return(0,i.BX)(u.G,{css:h.container,children:[(0,i.tZ)(u.G,{css:h.contentContainer,children:(0,i.tZ)(u.G,{id:g,"aria-labelledby":m?Z:void 0,css:!C&&m?{height:t,overflow:"hidden",maskImage:"linear-gradient(to top, transparent, black 64px, black)"}:void 0,children:(0,i.tZ)(p,{ref:x,children:n})})}),m?(0,i.tZ)(u.G,{css:h.buttonContainer,children:(0,i.tZ)(c.zx,{stretch:!1,size:"small",onClick:w,text:"Show ".concat(C?"Less":"More"),iconRight:(0,i.tZ)(l.Z,{rotate:C?180:0}),id:Z,"aria-expanded":C,"aria-controls":g})}):null]})}},72902:function(e,n,t){"use strict";var r=t(74985),i=t(26473),o=t(88965),l=t(61025),a=t(95141),c=t(6385),u=(0,l.X)({containerStretch:[o.l0.rowWithGap(1),o.l0.flex.growAndShrink(1)],containerShrink:o.l0.rowWithGap(1),ctaStretch:[o.l0.borderRadius(8,0,0,8),o.l0.flex.growAndShrink(1)],ctaShrink:o.l0.borderRadius(8,0,0,8),count:o.l0.borderRadius(0,8,8,0)});n.Z=function(e){return(0,r.BX)(i.G,{css:e.stretch?u.containerStretch:u.containerShrink,children:[(0,r.tZ)(a.zx,{colorway:e.colorway,iconLeft:e.icon,stretch:e.stretch,onClick:e.onClick,text:e.text,css:e.stretch?u.ctaStretch:u.ctaShrink}),(0,r.tZ)(a.zx,{colorway:e.colorway,onClick:e.onCountClick,text:(0,c.d)(e.count),css:u.count})]})}},98659:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),l=t(35264),a=t(24635);function c(){var e=(0,i.Z)(["\n  query PublicForks(\n    $replId: String!\n    $count: Int!\n    $after: String\n    $search: String\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        publicForkCount\n        releasesForkCount\n        publishedAs\n        publicForks(count: $count, after: $after, search: $search) {\n          items {\n            id\n            ...ReplPostReplCardRepl\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(c(),l.n);function d(e){return function(e){var n=(0,r.Z)({},u,e);return a.a(s,n)}({variables:e})}},67775:function(e,n,t){"use strict";t.d(n,{Z:function(){return M},S:function(){return V}});var r=t(57135),i=t(72006),o=t(4405),l=t(96583),a=t(74985),c=t(50959),u=t(43119),s=t(71440);function d(){var e=(0,u.Z)(["\n  fragment PostBodyTextAreaUser on User {\n    id\n    username\n    image\n  }\n"]);return d=function(){return e},e}function m(){var e=(0,u.Z)(["\n  query PostBodyTextAreaUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...PostBodyTextAreaUser\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=(0,s.Ps)(d()),h=(0,s.Ps)(m(),p);var f=t(51467),v=t(2272),Z=t(11066),g=t.n(Z),b=t(19701),C=t(21371);var w=t(58079),x=t(81962),R=t(9970),y=t(74685),k=t(34809),B=t(32905);function S(e){var n=e.initialValue,t=e.textTriggers,i=(0,c.useState)(n||""),o=i[0],a=i[1],u=(0,c.useRef)(null),s=function(e){var n=e.textTriggers,t=e.applySuggestion,r=(0,c.useRef)(null),i=(0,v.Z)((0,b.Z)(n),2),o=i[0].suggestions,l=i[1],a=(0,C.Kb)({items:(null===o||void 0===o?void 0:o.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(o),onSelectedItemChange:function(e){var n=e.selectedItem;if(o&&n){var i=r.current;if(i){var l=o.applySuggestion({targetValue:i.value,suggestionValue:n.value}),a=l.fullValue,c=l.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),u=(0,c.useMemo)((function(){if(o&&r.current)return g()(r.current,o.textTrigger.index)}),[o]);return{ref:(0,c.useCallback)((function(e){r.current=e,l(e)}),[l]),suggestions:null===o||void 0===o?void 0:o.results,caretCoordinates:u,combobox:a}}({textTriggers:t,applySuggestion:function(e){var n=e.cursorIndex,t=e.fullValue;a(t),setTimeout((function(){u.current&&u.current.setSelectionRange(n,n)}))}}),d=s.combobox,m=s.caretCoordinates,p=s.suggestions,h=s.ref,Z=function(e){var n=(0,c.useRef)(null),t=(0,f.Z)(e.onChange),i=(0,f.Z)(e.onError),o=(0,c.useCallback)((function(e){n.current=e}),[]),a=(0,c.useCallback)(function(){var e=(0,r.Z)((function(e){var r,o,a,c,u,s,d,m,p,h,f,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(!(r=n.current))return[2];o=r.value,a=r.selectionStart?r.selectionStart:o.length,c=e.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),u=o.substr(0,a),s=o.substr(a),d=(0,R.Z)(c),u&&d.unshift(u),s&&d.push(s),t.current(d.join("\n")),m=[],l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,y.L0)(e)];case 2:return m=l.sent(),[3,4];case 3:return p=l.sent(),i.current(p),[2];case 4:h=[],l.label=5;case 5:return l.trys.push([5,7,,8]),[4,Promise.all(m.map((function(e){return(0,k.mh)(e,B.N.CommunityPost)})))];case 6:return h=l.sent(),[3,8];case 7:return f=l.sent(),i.current(f),[2];case 8:return n.current?(v=c.reduce((function(n,t,r){var i=e[r].name.replace(/\.[^/.]+$/,""),o=h[r],l=(0,x.Z)(o,Error)?"Error uploading":o.url;return n.replace(t,"![".concat(i,"](").concat(l,")"))}),n.current.value),t.current(v),[2]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,i]),u=(0,c.useCallback)((function(e){var n=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));n.length&&a(n)}),[a]);return{ref:o,handleFiles:a,handlePaste:u}}({onChange:a,onError:function(){}}),S=Z.handleFiles,G=Z.handlePaste,E=Z.ref,I=(0,v.Z)((0,w.Z)((function(e){null!==e&&S(e)})),2)[1],P=(0,c.useCallback)((function(e){u.current=e,h(e),E(e)}),[h,E]),U=(0,c.useCallback)((function(e,n){var t;null===(t=u.current)||void 0===t||t.setSelectionRange(e,n)}),[]);return{ref:P,value:o,setValue:a,dropZoneHandlers:I,handlePaste:G,combobox:d,caretCoordinates:m,suggestions:p,setSelectionRange:U}}var G=t(42216),E=t(17387),I=t(80703),P=t(2075),U=t(20854),T=t(88965),_=t(53312),X=t(20685),H=t(26473),D=t(38029),W=H.K.div,F=H.K.li;function V(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(!U.l)throw new Error("Expected apolloClient");return[4,U.l.query({query:h,variables:{query:e,limit:5}})];case 1:return[2,n.sent().data.usernameSearch]}}))}))).apply(this,arguments)}function M(e){var n,t=e.onChange,u=e.initialValue,s=e.autoFocus,d=e.placeholder,m=e.onKeyDown,p=e.onBlur,h=e.onFocus,v=e.userSearch,Z=e.showLabel,g=(0,c.useRef)(u),b=(0,f.Z)(t),C=function(e){var n=e.initialValue,t=e.userSearch,i=void 0===t?V:t,o=S({initialValue:n,textTriggers:{"@":function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,i(e)];case 1:return[2,n.sent().map((function(e){return{icon:(0,a.tZ)(G.Z,{alt:e.username,src:e.image,size:16}),value:e.username}}))]}}))}));return function(n){return e.apply(this,arguments)}}()}});return o}({initialValue:u,userSearch:v}),w=C.setSelectionRange;(0,E.Z)((function(){b.current(C.value)}),[C.value]),(0,c.useEffect)((function(){if(s&&g.current){var e=g.current.length;w(e,e)}}),[s,w]);var x=(0,D.U)();return(0,a.BX)(W,(0,o.Z)((0,i.Z)({css:{position:"relative"}},C.combobox.getComboboxProps()),{children:[(0,a.BX)(H.G,{css:[T.l0.colWithGap(4)],children:[Z?(0,a.tZ)("label",{htmlFor:x("description"),children:(0,a.tZ)(_.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Description"})}):null,(0,a.tZ)(X.B,(0,o.Z)((0,i.Z)({autoSize:!0},C.combobox.getInputProps({placeholder:d||"Write something about this post",ref:C.ref,onKeyDown:function(e){C.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),m&&m(e)},onBlur:p,onFocus:h,value:C.value,onChange:function(e){return C.setValue(e.currentTarget.value)},onPaste:C.handlePaste,autoFocus:s})),{css:[T.l0.width("100%"),{minHeight:T.TV.space32,resize:"vertical"}],id:x("description")}))]}),(0,a.tZ)(W,(0,o.Z)((0,i.Z)({},C.combobox.getMenuProps()),{css:[{position:"absolute"},C.caretCoordinates&&{top:C.caretCoordinates.top+C.caretCoordinates.height,left:C.caretCoordinates.left-4}],children:(null===(n=C.suggestions)||void 0===n?void 0:n.length)?(0,a.tZ)(I.Z,{css:{position:"relative",maxWidth:180},children:C.suggestions.map((function(e,n){return(0,a.tZ)(F,(0,o.Z)((0,i.Z)({},C.combobox.getItemProps({item:e,index:n})),{children:(0,a.tZ)(P.Z,{title:e.value,selected:C.combobox.selectedItem===e,highlighted:C.combobox.highlightedIndex===n,icon:e.icon?(0,a.tZ)(H.G,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},46068:function(e,n,t){"use strict";t.d(n,{EQ:function(){return F},Ex:function(){return D},Sh:function(){return W},Yt:function(){return P},g4:function(){return S},l0:function(){return X},nQ:function(){return E},pl:function(){return _},tE:function(){return G},wb:function(){return U}});var r=t(74985),i=t(50959),o=t(54008),l=t(50769),a=t(26473),c=t(39059),u=t(92470),s=t(12068),d=t(67775),m=t(5687),p=t(62385),h=t(59989),f=t(85247),v=t(95148),Z=t(14053),g=t(2580),b=t(73823),C=t(88965),w=t(94875),x=t(67217),R=t(53312),y=t(95141),k=t(66777),B=t(61025);function S(e){var n=e.onClick;return(0,r.tZ)(y.zx,{size:"small",onClick:n,variant:"outlined",text:"Reply",colorway:"primary",css:[C.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function G(e){var n=e.onClick,t=e.repliesCount,i=e.isExpanded,o="".concat(i?"Hide":"View"," ").concat(t," ").concat((0,l.Z)("reply",t));return(0,r.tZ)(y.zx,{size:"small",onClick:n,variant:"outlined",text:o,css:[C.l0.color.foregroundDimmer,C.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:i?0:270})})}var E,I=a.K.a;function P(e){var n=e.user,t=e.size,i=void 0===t?32:t;return(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(x.q,{size:i,username:n.username,src:n.image})})})}function U(e){var n=e.user,t=e.action,i=e.timeCreated;return(0,r.BX)(a.G,{css:[C.l0.flex.row,C.l0.align.center,C.l0.flex.wrap,{maxWidth:"100%",gap:C.TV.space4}],children:[(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(I,{css:[{color:"inherit"}],children:n.username})})}),t?(0,r.tZ)(R.xv,{color:"dimmer",multiline:!1,children:t}):null,(0,r.tZ)(w.EK,{date:i,textColor:"dimmest",textVariant:"small"})]})}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment",e.CopyLink="Copy Link"}(E||(E={}));var T=(0,B.X)({item:[C.l0.rowWithGap(8),C.l0.align.center],destructiveItem:[C.l0.color.accentNegativeStronger],modPill:[C.l0.color.foregroundDefault,{textTransform:"uppercase"}]});function _(e){var n=e.canEdit,t=e.canDelete,i=e.canReport,l=e.canEditSettings,c=e.canHideComment,u=e.canShowComment,s=e.onAction,d=e.className,m=[];return m.push({label:E.CopyLink,icon:(0,r.tZ)(b.Z,{})}),n&&m.push({label:E.Edit,icon:(0,r.tZ)(p.Z,{})}),i&&m.push({label:E.Report,icon:(0,r.tZ)(h.Z,{})}),l&&m.push({label:E.Settings,icon:(0,r.tZ)(f.Z,{})}),c&&m.push({label:E.Hide,icon:(0,r.tZ)(v.Z,{})}),u&&m.push({label:E.Show,icon:(0,r.tZ)(Z.Z,{})}),t&&m.push({label:E.Delete,isDestructive:!0,icon:(0,r.tZ)(g.Z,{})}),m.length?(0,r.tZ)(a.G,{className:d,children:(0,r.tZ)(o.ZE,{icon:(0,r.tZ)(k.Z,{}),onAction:function(e){return s(e)},children:m.map((function(e){return(0,r.tZ)(o.ck,{children:(0,r.BX)(a.G,{css:[T.item,e.isDestructive&&T.destructiveItem],children:[e.icon,(0,r.tZ)(R.xv,{multiline:!1,children:e.label})]})},e.label)}))})}):null}var X=a.K.form,H=i.createContext(void 0);function D(){return i.useContext(H)}var W=H.Provider;function F(e){var n=e.initialValue,t=e.placeholder,o=e.onCancel,l=e.onSubmit,c=e.hideControls,u=e.buttonText,s=void 0===u?"Comment":u,p=e.buttonIcon,h=void 0===p?(0,r.tZ)(m.Z,{}):p,f=e.error,v=(0,i.useState)(!1),Z=v[0],g=v[1],b=(0,i.useState)(n),w=b[0],x=b[1],k=D();return(0,r.BX)(X,{css:[C.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(w)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(w)},initialValue:w,placeholder:t,onChange:x,onFocus:function(){return g(!0)},userSearch:k}),f?(0,r.BX)(a.G,{css:[C.l0.flex.column,C.l0.colWithGap(8)],children:[(0,r.tZ)(R.xv,{css:[C.l0.color.redDefault],children:f})," ",(0,r.BX)(R.xv,{multiline:!1,children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,Z||!c?(0,r.BX)(a.G,{css:[C.l0.rowWithGap(8),C.l0.justify.end],children:[(0,r.tZ)(y.zx,{text:"Cancel",onClick:function(e){g(!1),o&&o(e)}}),(0,r.tZ)(y.zx,{type:"submit",text:s,onClick:function(){},iconLeft:h,colorway:"primary",disabled:!w})]}):null]})}},64506:function(e,n,t){"use strict";t.d(n,{G:function(){return Le},Z:function(){return Oe}});var r=t(57389),i=t(72006),o=t(4405),l=t(2272),a=t(9970),c=t(74985),u=t(43312),s=t(72902),d=t(52060),m=t(5295),p=t(46350),h=t(79097),f=t(7653),v=t(63723),Z=t(25404),g=t(98659),b=t(85919),C=t(88794),w=t(46130),x=t(9434),R=t(69842),y=t(50959),k=t(82893),B=t.n(k),S=t(50035),G=t(26473),E=t(88965),I=t(53312),P=t(25999),U=t(99401),T=t(92470),_=t(12068),X=t(64114),H=t(40139),D=t(6385),W=t(74040),F=t(50769),V=t(61025),A=t(43943),M=G.K.a,L=function(){return(0,c.tZ)(I.xv,{color:"dimmest",multiline:!1,children:"\xb7"})},z=(0,V.X)({container:E.l0.colWithGap(12),ownerWrapper:[E.l0.colWithGap(8),(0,r.Z)({},E.BC.min("tabletMin"),[E.l0.rowWithGap(8),E.l0.justify.spaceBetween,E.l0.align.center])],owner:[E.l0.flex.row,E.l0.align.center,E.l0.flex.wrap,{gap:E.TV.space8}],username:E.l0.color.foregroundDefault,info:[E.l0.flex.row,E.l0.flex.wrap,E.l0.align.center,E.l0.pb(4),{gap:4}],forkedUser:[E.l0.rowWithGap(2),E.l0.display.inlineFlex],forkedUserLink:E.l0.color.foregroundDefault,tags:[E.l0.flex.wrap,E.l0.flex.row,E.l0.pt(8),{gap:6}],li:{listStyle:"none"},pillLink:{padding:4,borderRadius:8,color:E.TV.foregroundDimmer,":hover":{color:E.TV.foregroundDefault}}});function $(e){var n,t,r,l,a,u,s,d=e.repl,m=e.currentUser,p=d.owner,h=d.lastPublishedAt||(null===(n=d.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.timeCreated)||d.timeCreated,f=p&&p.id===(null===m||void 0===m?void 0:m.id);return(0,c.BX)(G.G,{css:z.container,children:[(0,c.tZ)(G.G,{css:z.ownerWrapper,children:p?(0,c.tZ)(c.HY,{children:(0,c.BX)(G.G,{css:z.owner,dataCy:"cover-page-user",children:[(0,c.tZ)(_.Z,{inline:!0,username:p.username,children:(0,c.tZ)(T.ZP,{user:p,children:(0,c.tZ)(M,{css:z.username,children:(0,c.tZ)(U.n,{username:p.username,src:(null===p||void 0===p?void 0:p.image)||null,small:!0})})})}),(0,c.tZ)(I.xv,{variant:"small",multiline:!1,children:"User"===p.__typename&&p.followerCount>0?"".concat((0,D.d)(p.followerCount)," ").concat((0,F.Z)("follower",p.followerCount)):null}),!f&&(0,c.tZ)(W.Z,{subtle:!0,size:"small",user:p})]})}):(0,c.tZ)(U.n,{small:!0,src:null,username:"[deleted]"})}),(0,c.BX)(G.G,{children:[(0,c.BX)(G.G,{css:z.info,children:[h?(0,c.tZ)(I.xv,{color:"dimmer",multiline:!1,children:new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}):null,d.runCount>0?(0,c.BX)(c.HY,{children:[(0,c.tZ)(L,{}),(0,c.BX)(I.xv,{color:"dimmer",multiline:!1,children:[(0,D.d)(d.runCount)," ",(0,F.Z)("run",d.runCount)]})]}):null,(null===(r=d.source)||void 0===r||null===(l=r.deployment)||void 0===l||null===(a=l.repl)||void 0===a?void 0:a.owner)&&!(null===(u=d.origin)||void 0===u?void 0:u.owner)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(L,{}),(0,c.BX)(G.G,{css:[E.l0.rowWithGap(4),E.l0.align.center],children:[(0,c.BX)(I.xv,{color:"dimmer",multiline:!1,children:["Made with"," "]}),(0,c.tZ)(B(),(0,o.Z)((0,i.Z)({legacyBehavior:!0},(0,P.aq)(d.source.deployment.repl)),{passHref:!0,children:(0,c.tZ)(M,{children:d.source.deployment.repl.templateLabel})}))]})]}):null,(null===(s=d.origin)||void 0===s?void 0:s.owner)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(L,{}),(0,c.BX)(I.xv,{color:"dimmer",multiline:!1,children:["Forked from"," ",(0,c.BX)(G.G,{css:z.forkedUser,children:[(0,c.tZ)(T.ZP,{user:d.origin.owner,css:z.forkedUserLink,children:(0,c.tZ)("a",{children:d.origin.owner.username})}),(0,c.tZ)(I.xv,{multiline:!1,children:"/"}),(0,c.tZ)(B(),(0,o.Z)((0,i.Z)({legacyBehavior:!0},(0,P.aq)(d.origin)),{css:z.forkedUserLink,children:(0,c.tZ)("a",{children:d.origin.title})}))]})]})]}):null]}),d.description?(0,c.tZ)(A.Z,{collapsedHeight:116,children:(0,c.tZ)(S.Z,{children:d.description})}):null,d.tags.length?(0,c.tZ)(G.G,{children:(0,c.tZ)(G.G,{tag:"ul","aria-label":"Tags",css:z.tags,children:d.tags.map((function(e){var n=(0,X.M6)(e.id);return(0,c.tZ)("li",{css:z.li,children:(0,c.tZ)(H.P,{text:"#"+e.id,css:z.pillLink,href:n.href,as:n.as})},e.id)}))})}):null]})]})}var N=t(67012),O=t(52642),q=t(57135),Q=t(96583),Y=t(94275),K=t(90171),j=t(41943),J=t(76678),ee=t(27430);function ne(e){var n=e.count;return n>0?(0,c.BX)(G.G,{css:[E.l0.rowWithGap(4),E.l0.align.center],children:[(0,c.tZ)(I.xv,{multiline:!1,children:n}),(0,c.tZ)(I.xv,{color:"dimmer",multiline:!1,children:(0,F.Z)("comment",n)})]}):(0,c.tZ)(I.xv,{color:"dimmer",children:"No comments yet"})}function te(e){var n,t=e.repl,r=(0,Z.Z)(),a=r.showConfirm,u=r.showError,s=(0,l.Z)((0,J.k2)({onError:function(e){return u(e.message)},onCompleted:function(e){var n,t=e.setReplCommentSettings;"UserError"!==t.__typename?"Repl"===t.__typename&&a("Comments "+((null===(n=t.commentSettings)||void 0===n?void 0:n.enabled)?"enabled":"disabled")):u(t.message)}}),1),d=s[0],m=!(null===t||void 0===t?void 0:t.commentSettings)||t.commentSettings.enabled;return(0,c.BX)(G.G,{css:[E.l0.rowWithGap(8),E.l0.justify.spaceBetween,E.l0.align.start],children:[(0,c.tZ)(G.G,{css:[E.l0.flex.growAndShrink(1)],children:m?(0,c.tZ)(ne,{count:t.commentCount}):(0,c.tZ)(I.xv,{color:"dimmer",children:"Adding comments has been turned off for this Repl."})}),(null===(n=t.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)?(0,c.BX)(G.G,{css:[E.l0.rowWithGap(8),E.l0.align.center],children:[(0,c.tZ)(I.xv,{multiline:!1,children:"Allow comments"}),(0,c.tZ)(ee.Z,{isOn:m,onChange:function(){return d({variables:{input:{replId:t.id,enabled:!m}},optimisticResponse:{__typename:"RootMutationType",setReplCommentSettings:(0,o.Z)((0,i.Z)({},t),{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!m}})}})}})]}):null]})}var re=t(67775),ie=t(46068),oe=t(27773);function le(e){var n,t,l,u=e.replId,s=(0,K.useRouter)().query,d=(0,Y.ex)({ssr:!1,variables:{replId:u,after:s.after?s.after.toString():void 0,count:25}}),m=d.data,p=d.loading,h=d.fetchMore,f=d.refetch,v="Repl"===(null===m||void 0===m?void 0:m.repl.__typename)?m.repl:null,Z=!(!v||"User"!==(null===(n=v.owner)||void 0===n?void 0:n.__typename))&&(null===v||void 0===v?void 0:v.owner.isBlockingCurrentUser),g=null===m||void 0===m?void 0:m.currentUser,b=null===v||void 0===v?void 0:v.comments.pageInfo,C=(0,y.useMemo)((function(){return v&&g?function(e){var n,t=e.repl,i=e.currentUser,o="User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?(0,r.Z)({},t.owner.username,t.owner):{};return t.comments.items.forEach((function(e){e.user&&(o[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(o[e.user.username]=e.user)}))})),t.multiplayers.forEach((function(e){o[e.username]=e})),i&&delete o[i.username],Object.values(o)}({repl:v,currentUser:g}):[]}),[v,g]),w=!(null===v||void 0===v?void 0:v.commentSettings)||v.commentSettings.enabled,x=(l=C,function(){var e=(0,q.Z)((function(e){var n,t;return(0,Q.__generator)(this,(function(r){switch(r.label){case 0:return n=null===e||void 0===e?void 0:e.toLowerCase(),(t=l.filter((function(e){return!n||e.username.toLowerCase().includes(n)}))).length<5&&e?[4,(0,re.S)(e)]:[3,2];case 1:r.sent().forEach((function(e){t.some((function(n){return n.username===e.username}))||t.push(e)})),r.label=2;case 2:return[2,t.slice(0,5)]}}))}));return function(n){return e.apply(this,arguments)}}());return(0,c.BX)(G.G,{css:[E.l0.colWithGap(16)],children:[p?(0,c.BX)(G.G,{css:[E.l0.rowWithGap(4),E.l0.align.center],children:[(0,c.tZ)(oe.Z,{}),(0,c.tZ)(I.xv,{multiline:!1,children:"Loading comments..."})]}):null,v&&!Z?(0,c.BX)(c.HY,{children:[(0,c.BX)(ie.Sh,{value:x,children:[(0,c.tZ)(te,{repl:v}),g&&w?(0,c.tZ)(j.H,{onComment:function(){return f()},replId:v.id,placeholder:v?"Say something about ".concat(v.title):""}):null,null===(t=v.comments)||void 0===t?void 0:t.items.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,c.tZ)(j.x,{commentsEnabled:w,comment:e,onReply:function(){return f()},onDelete:function(){return f()}},e.id)}))]}),(null===b||void 0===b?void 0:b.nextCursor)&&v?(0,c.tZ)(G.G,{children:(0,c.tZ)("a",{href:v.url+"?after="+b.nextCursor,onClick:function(e){e.preventDefault(),p||h({variables:{after:b.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,o.Z)((0,i.Z)({},r),{repl:(0,o.Z)((0,i.Z)({},l),{comments:(0,o.Z)((0,i.Z)({},l.comments),{items:(0,a.Z)(t.comments.items).concat((0,a.Z)(l.comments.items))})})}):e}})},children:p?"Loading...":"Load more comments"})}):null]}):null,v&&Z?(0,c.BX)(G.G,{css:[E.l0.colWithGap(24),E.l0.align.center,E.l0.textAlign.center],children:[(0,c.tZ)(I.xv,{variant:"subheadBig",children:"You\u2019re blocked"}),(0,c.BX)(I.xv,{multiline:!1,children:["You can\u2019t follow, comment or see"," ",v.owner&&"User"===v.owner.__typename?v.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}var ae,ce,ue=t(74330),se=t(86879),de=t(95141),me=t(92369),pe=t(90602),he=t(20685),fe=t(21651),ve=t(37268),Ze=t(61623),ge=t(64538),be=t(68912),Ce=t(84761),we=t(62385),xe=t(58292),Re=t(38256),ye=t(73823),ke=t(3861),Be=t(79451),Se=t(70189),Ge=t(84079),Ee=t(94965),Ie=t(51631),Pe=t(67121),Ue=t(9682),Te=t(48002),_e=t(35244),Xe=t(20387),He=(0,u.F4)("\n  0% { opacity: 1; }\n  50% { opacity: 0.7; }\n  100% { opacity: 1; }\n"),De=(0,u.F4)("\n  0% { transform: rotate(0.3deg); }\n  50% { transform: rotate(-0.3deg); }\n  100% { transform: rotate(0.3deg); }\n"),We={transparent:(0,u.iv)([E.l0.width(32),{borderColor:"transparent"}]),squareButton:(0,u.iv)([E.l0.width(32)]),loadingBlock:(0,u.iv)([E.l0.borderRadius(8),{animation:He+" 2s infinite"}]),jiggle:(0,u.iv)({animation:De+" 0.2s infinite linear"}),cross:(0,u.iv)([E.l0.backgroundColor.redDefault,E.l0.borderRadius("full"),E.l0.position.absolute,E.l0.width(20),E.l0.height(20),E.l0.center,E.l0.top(-10),E.l0.right(-10),E.l0.cursor.pointer])};!function(e){e.ForksModal="ForksModal",e.AddExampleModal="AddExampleModal"}(ae||(ae={}));var Fe=(0,V.X)({buttonsWrapper:[E.l0.pt(16),E.l0.pb(4),E.l0.overflowX("auto"),(ce={flexDirection:"row",gap:8},(0,r.Z)(ce,E.BC.min("tabletMax"),{flexDirection:"column",gap:12}),(0,r.Z)(ce,"scrollbarWidth","none"),(0,r.Z)(ce,"&::-webkit-scrollbar",{height:0}),ce)],mainButton:(0,r.Z)({paddingLeft:8,flexGrow:0},E.BC.min("tabletMax"),{flexGrow:1,paddingRight:16}),otherButtons:[E.l0.rowWithGap(8),E.l0.align.center,(0,r.Z)({},E.BC.min("tabletMax"),[E.l0.pl(8)])],iconButtons:[E.l0.flex.row,{marginLeft:-2,gap:E.TV.space8}]});function Ve(e){var n=e.repl,t=e.currentUser,r=e.runRepl,l=e.stopRepl,a=e.runState,u=e.connectionState,m=e.showUrlOutput,p=e.isFileTreeOpen,h=e.setIsFileTreeOpen,f=e.activeModal,g=e.setActiveModal,b=(0,d.g)(),R=(0,Z.Z)().showConfirm,y=(0,v.P5)({controlName:"flag-repl-analytics",logFlagToAnalytics:!1}),k=n.currentUserPermissions.containerWrite,B=n.publishedAs===Ie.O2.Template,S=(0,c.tZ)(se.DZ,{stretch:!B,runCount:0,runState:a,connectionState:u,publishedAs:n.publishedAs,run:r,stop:l}),E=k&&y&&n.analyticsUrl?(0,c.tZ)(Ze.u,{tooltip:"Repl Analytics",children:(0,c.tZ)(me.Z,{iconLeft:(0,c.tZ)(ge.Z,{}),stretch:!0,href:n.analyticsUrl,text:"",css:We.squareButton})}):null,I=m?(0,c.tZ)(Ze.u,{tooltip:"Open in new tab",children:(0,c.tZ)(me.Z,{iconLeft:(0,c.tZ)(xe.Z,{}),text:"",href:n.prodUrl,target:"_blank",onClick:function(){return(0,x.j)(x.U3.COVER_PAGE_NEW_TAB_OPENED)},css:We.squareButton})}):null,P=(0,c.tZ)(Ze.u,{tooltip:p?"Hide code":"Show code",children:(0,c.tZ)(de.zx,{iconLeft:(0,c.tZ)(Ce.Z,{}),text:"",onClick:function(){return h((function(e){return!e}))},css:We.squareButton})}),U=(0,c.tZ)(de.zx,{iconLeft:(0,c.tZ)(ye.Z,{}),text:"",onClick:function(){(0,C.Z)("".concat(window.location.origin).concat(n.url)).then((function(){R("Repl link copied to clipboard!")}))},css:We.squareButton}),T=B?{text:b.isForking?"Forking...":"Use Template",icon:(0,c.tZ)(ke.Z,{}),count:n.releasesForkCount}:{text:b.isForking?"Forking...":"Fork",icon:(0,c.tZ)(Re.Z,{}),count:n.publicForkCount},_=(0,c.tZ)(s.Z,(0,o.Z)((0,i.Z)({},T),{stretch:B,onClick:function(){b.isForking||b.fork()},icon:(0,c.tZ)(Re.Z,{}),colorway:B?"primary":void 0,onCountClick:function(){return g(ae.ForksModal)}})),X=(0,K.useRouter)(),H=!(0,w.Vg)(X)?(0,c.tZ)(N.ZP,{repl:n,currentUser:t,surface:!1}):null,D=(0,c.tZ)(Te.Z,{repl:n,currentUser:t,source:"coverPage"});return(0,c.BX)(c.HY,{children:[(0,c.BX)(G.G,{css:Fe.buttonsWrapper,children:[(0,c.tZ)(G.G,{css:Fe.mainButton,children:B?_:S}),(0,c.BX)(G.G,{css:Fe.otherButtons,children:[B?S:_,H,P,U,E,I,D]})]}),(0,c.tZ)(fe.u,{maxWidth:512,isOpen:"ForksModal"===f,onRequestClose:function(){return g(null)},children:(0,c.tZ)(O.Z,{replId:n.id})})]})}function Ae(e){var n=e.className,t=e.children;return(0,c.tZ)(G.G,{css:ze.section,className:n,children:t})}var Me=(0,V.X)({container:[E.l0.flex.growAndShrink(1),(0,r.Z)({},(0,Be.et)("tabletMax"),{height:"calc(100vh - 60px)",flexDirection:"row"})],viewer:[E.l0.p(12),(0,r.Z)({height:"calc(57vw + 51px)",margin:"16px 16px 0px",border:"1px solid "+E.TV.outlineDimmest,borderRadius:8,overflow:"hidden","> *":{height:"100%"}},(0,Be.et)("tabletMax"),{flex:1,height:"100%",margin:0,border:"none",borderRadius:0})],viewerBlock:[We.loadingBlock,E.l0.width("100%"),E.l0.height("100%")],sidebar:[(0,r.Z)({height:"100%"},(0,Be.et)("tabletMax"),{width:400,borderLeft:"1px solid "+E.TV.outlineDimmest})],column:[E.l0.align.center,E.l0.rowWithGap(8)],block1:[We.loadingBlock,E.l0.width(32),E.l0.height(32),E.l0.borderRadius("full")],block2:[We.loadingBlock,E.l0.height(30)],block3:[We.loadingBlock,E.l0.height(80)],comments:E.l0.flex.growAndShrink(1),block4:[We.loadingBlock,E.l0.height("100%")]});function Le(e){var n=e.embedded;return(0,c.BX)(G.G,{css:Me.container,children:[(0,c.tZ)(G.G,{css:Me.viewer,children:(0,c.tZ)(ve.Tg,{elevated:!0,css:Me.viewerBlock})}),(0,c.BX)(G.G,{css:[ze.sidebar],children:[(0,c.BX)(Ae,{children:[(0,c.BX)(G.G,{css:Me.column,children:[(0,c.tZ)(ve.Tg,{elevated:!0,css:Me.block1}),(0,c.tZ)(I.xv,{color:"dimmest",variant:"subheadBig",multiline:!1,children:"Loading..."})]}),(0,c.tZ)(ve.Tg,{elevated:!0,css:Me.block2}),(0,c.tZ)(ve.Tg,{elevated:!0,css:Me.block3})]}),n?null:(0,c.tZ)(pe.R,{}),(0,c.tZ)(Ae,{css:Me.comments,children:(0,c.tZ)(ve.Tg,{elevated:!0,css:Me.block4})})]})]})}var ze=(0,V.X)({page:[E.l0.flex.growAndShrink(1),(0,r.Z)({},(0,Be.et)("tabletMax"),{height:"calc(100vh - ".concat(m.Mz,"px)"),flexDirection:"row"})],viewer:[E.l0.p(8),(0,r.Z)({height:"calc(57vw + 51px)","> *":{height:"100%"}," iframe":{borderRadius:0}},(0,Be.et)("tabletMax"),{flex:1,height:"100%",margin:0,border:"none",borderRadius:0,"& .xterm-viewport":{borderRadius:"0 !important"}})],output:[E.l0.borderRadius(4),E.l0.border({color:E.TV.outlineDimmest}),E.l0.overflow("hidden")],sidebar:(0,r.Z)({},(0,Be.et)("tabletMax"),{height:"100%",overflow:"auto",width:400}),section:[E.l0.p(8),E.l0.pb(16),E.l0.colWithGap(8)],dividerEmbedded:{width:"calc(100% - 12px)",alignSelf:"flex-end"},examples:[E.l0.colWithGap(12)],examplesHeader:[E.l0.flex.row,E.l0.justify.spaceBetween],examplesButtons:[E.l0.rowWithGap(8)],examplesTitle:[E.l0.colWithGap(4)],addExampleInput:[E.l0.flex.growAndShrink(1)],addExampleModal:[E.l0.p(4),E.l0.colWithGap(16)],addExampleForks:[E.l0.colWithGap(16)]});function $e(e){var n,t,r=e.repl,u=e.addExample,s=(0,l.Z)(y.useState(""),2),d=s[0],m=s[1],p=(0,g.Z)({replId:r.id,count:10,search:d}),h=p.data,f=p.loading,v=p.fetchMore,Z="Repl"===(null===h||void 0===h?void 0:h.repl.__typename)?h.repl:null,b=(null!==(t=null===Z||void 0===Z?void 0:Z.publicForks.items)&&void 0!==t?t:[]).filter((function(e){return!r.examples.some((function(n){return n.id===e.id}))}));return(0,c.BX)(G.G,{css:ze.addExampleModal,children:[(0,c.tZ)(I.xv,{variant:"subheadBig",multiline:!1,children:"Add a Repl as example from forks"}),(0,c.tZ)(he.II,{css:ze.addExampleInput,value:d,onChange:function(e){return m(e.target.value)},placeholder:"Search for a Repl that uses this template"}),b.length>0?(0,c.tZ)(G.G,{css:ze.addExampleForks,children:b.map((function(e){return(0,c.tZ)(R.ZP,{repl:e,showOwner:!0,onReplClick:function(n){n.preventDefault(),confirm("Add Repl ".concat(e.title," as an example repl?"))&&u(e.id)}},e.id)}))}):null,f?(0,c.tZ)(oe.Z,{}):null,(null===Z||void 0===Z||null===(n=Z.publicForks)||void 0===n?void 0:n.pageInfo.nextCursor)?(0,c.tZ)(de.zx,{text:f?"Loading...":"Load more",onClick:function(){return v({variables:{after:Z.publicForks.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,o.Z)((0,i.Z)({},r),{repl:(0,o.Z)((0,i.Z)({},l),{publicForks:(0,o.Z)((0,i.Z)({},l.publicForks),{items:(0,a.Z)(t.publicForks.items).concat((0,a.Z)(l.publicForks.items))})})}):e}})}}):null,f||0!==b.length?null:(0,c.tZ)(I.xv,{color:"dimmer",multiline:!1,children:"No Repls to show!"})]})}function Ne(e){var n=e.repl,t=e.activeModal,r=e.setActiveModal,i=n.currentUserPermissions.containerWrite,o=(0,l.Z)(y.useState(!1),2),u=o[0],s=o[1],d=(0,l.Z)(y.useState(n.examples),2),m=d[0],p=d[1],h=(0,Z.Z)().showError,f=(0,l.Z)((0,Ue.Cn)({onCompleted:function(e){var n,t=e.setReplExamples;"Repl"===t.__typename?p(t.examples):(null===(n=t.__typename)||void 0===n?void 0:n.endsWith("Error"))&&"message"in t&&h(t.message)},onError:function(e){h(e.message)}}),2),v=f[0],g=f[1];return y.useEffect((function(){0===m.length&&s(!1)}),[m.length]),(0,c.BX)(G.G,{css:ze.examples,children:[(0,c.BX)(G.G,{css:ze.examplesTitle,children:[(0,c.BX)(G.G,{css:ze.examplesHeader,children:[(0,c.tZ)(I.xv,{variant:"subheadBig",multiline:!1,children:"Examples"}),i?(0,c.BX)(G.G,{css:ze.examplesButtons,children:[m.length>0?(0,c.tZ)(de.zx,{size:"small",iconLeft:(0,c.tZ)(we.Z,{}),text:u?"Done":"Edit",colorway:u?"primary":void 0,onClick:function(){return s(!u)}}):null,(0,c.tZ)(de.zx,{size:"small",iconLeft:(0,c.tZ)(ke.Z,{}),text:"",onClick:function(){return r(ae.AddExampleModal)}})]}):null]}),(0,c.tZ)(I.xv,{color:"dimmest",children:"Example Repls of what people can make from this template"})]}),m.map((function(e){return(0,c.BX)(G.G,{css:u?[We.jiggle]:[],children:[(0,c.tZ)(R.ZP,{repl:e,showOwner:!0,onReplClick:function(e){u&&e.preventDefault()}}),u?(0,c.tZ)(G.G,{tag:"button",alt:"delete",css:[We.cross],onClick:function(){g.loading||confirm("Delete example ".concat(e.title,"?"))&&v({variables:{input:{replId:n.id,exampleReplIds:m.filter((function(n){return n.id!==e.id})).map((function(e){return e.id}))}}})},children:(0,c.tZ)(be.Z,{})}):null]},e.id)})),(0,c.tZ)(fe.u,{isOpen:t===ae.AddExampleModal,onRequestClose:function(){r(null)},children:(0,c.tZ)($e,{repl:n,addExample:function(e){v({variables:{input:{replId:n.id,exampleReplIds:(0,a.Z)(m.map((function(e){return e.id}))).concat([e])}}})}})})]})}function Oe(e){var n,t,r=e.repl,i=e.currentUser,o=e.embedded,a=(0,_e.Z)({enableDeeplinks:!0,repl:r,currentUser:i}),u=a.openFile,s=a.viewState,m=a.fs,v=a.dotReplit,Z=a.runRepl,g=a.stopRepl,C=a.runState,w=a.bsodId,x=a.isFileTreeOpen,R=a.setIsFileTreeOpen,k=a.showUrlOutput,B=a.nonBsodUnrecoverableError,S=a.connectionState,I=(0,b.Z)((function(){return{id:r.id,slug:r.slug,language:r.language}}),[r.id,r.language,r.slug]),P=r.currentUserPermissions.containerWrite,U=r.publishedAs===Ie.O2.Template,T="code"===(null===s||void 0===s?void 0:s.type)&&s.deeplink,_=(0,l.Z)(y.useState(T?T.path:null),2),X=_[0],H=_[1];y.useEffect((function(){H(T?T.path:null)}),[T,null===s||void 0===s?void 0:s.type]);var D=(0,l.Z)(y.useState(null),2),W=D[0],F=D[1];return B===Pe.Gs.NotAllowed?(0,c.tZ)(Se.Z.Provider,{value:I,children:(0,c.tZ)(Ee.Z,{isOpen:!0})}):B===Pe.Gs.RequiresRefresh?(0,c.tZ)(Se.Z.Provider,{value:I,children:(0,c.tZ)(Xe.Z,{isOpen:!0})}):(0,c.BX)(G.G,{css:ze.page,children:[(0,c.tZ)(G.G,{css:ze.viewer,children:(0,c.tZ)(Se.Z.Provider,{value:I,children:(0,c.tZ)(f.S2,{children:w?(0,c.tZ)(Ge.Z,{}):(0,c.tZ)(ve.Tg,{elevated:!0,css:ze.output,children:(0,c.tZ)(se.y6,{repl:r,runRepl:Z,viewState:s,connectionState:S,activePath:X,isFileTreeOpen:x,setIsFileTreeOpen:R,openFile:u,fs:m,dotReplit:v})})})})}),(0,c.BX)(G.G,{css:[ze.sidebar],children:[(0,c.tZ)(d.b,{forkParams:{replReleaseId:(null===(n=r.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.id)||void 0,trackingData:{forkSource:"coverPage",isApp:r.publishedAs===Ie.O2.App,isTemplate:r.publishedAs===Ie.O2.Template}},repl:r,teamContext:null===i||void 0===i?void 0:i.username,template:r.publishedAs===Ie.O2.Template,children:(0,c.tZ)(Ve,{repl:r,currentUser:i,runRepl:Z,stopRepl:g,runState:C,connectionState:S,showUrlOutput:k,isFileTreeOpen:x,setIsFileTreeOpen:R,activeModal:W,setActiveModal:F})}),(0,c.BX)(Ae,{children:[(0,c.tZ)(ue.Z,{repl:r,iconEditable:r.currentUserPermissions.changeIconUrl,hideActions:!0,small:!0,currentUser:i}),(0,c.tZ)($,{repl:r,currentUser:i})]}),(0,c.tZ)(pe.R,{css:o&&ze.dividerEmbedded}),(null===i||void 0===i?void 0:i.isAdmin)&&window.location.search.includes("debug=1")?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ae,{children:(0,c.tZ)(G.G,{css:[E.l0.colWithGap(16),E.l0.p(4)],children:(0,c.tZ)(p.Z,{showFlag:!0,replId:r.id})})}),(0,c.tZ)(pe.R,{css:o&&ze.dividerEmbedded})]}):null,U&&(r.examples.length>0||P)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ae,{children:(0,c.tZ)(Ne,{repl:r,activeModal:W,setActiveModal:F})}),(0,c.tZ)(pe.R,{})]}):null,(0,c.tZ)(Ae,{children:(0,c.tZ)(h.Z,{replId:r.id})}),(0,c.tZ)(pe.R,{css:o&&ze.dividerEmbedded}),(0,c.tZ)(Ae,{children:(0,c.tZ)(le,{replId:r.id})})]})]})}},50035:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(74985),i=(t(50959),t(60966));function o(e){var n=e.children,t=e.className,o=e.useRemarkGfm;return(0,r.tZ)(i.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:t,useRemarkGfm:o,children:n})}},52642:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(72006),i=t(4405),o=t(9970),l=t(74985),a=(t(50959),t(53312)),c=t(26473),u=t(88965),s=t(95141),d=t(50769),m=t(69842),p=t(37268),h=t(98659),f=t(51631);function v(e){var n=e.replId,t=(0,h.Z)({replId:n,count:10}),v=t.data,Z=t.fetchMore,g=t.loading,b="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null;if(!b)return(0,l.tZ)(c.G,{css:[u.l0.colWithGap(8)],children:(0,l.tZ)(c.G,{children:g?(0,l.tZ)(a.xv,{color:"dimmest",variant:"subheadDefault",multiline:!1,children:"Loading forks..."}):null})});var C=b.publishedAs===f.O2.Template,w=b.publicForks,x=C?b.releasesForkCount:b.publicForkCount,R=w.items.length||0;return(0,l.BX)(c.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(c.G,{children:[null!==x?(0,l.BX)(c.G,{css:[u.l0.colWithGap(12)],children:[(0,l.BX)(c.G,{css:[u.l0.display.block],children:[(0,l.tZ)(a.xv,{variant:"subheadDefault",multiline:!1,children:x})," ",(0,l.BX)(a.xv,{color:"dimmest",variant:"subheadDefault",multiline:!1,children:[(0,d.Z)("forks",x),x!==R?" total":null]})]}),x>0&&R>0?(0,l.tZ)(a.xv,{variant:"subheadBig",multiline:!1,children:"Public forks"}):null,x>0&&0===R?(0,l.tZ)(a.xv,{variant:"subheadBig",multiline:!1,children:"No public forks"}):null]}):null,g?(0,l.tZ)(a.xv,{color:"dimmest",variant:"subheadDefault",multiline:!1,children:"Loading forks..."}):null]}),(0,l.BX)(c.G,{css:[u.l0.flex.growAndShrink(1),u.l0.colWithGap(24)],children:[(0,l.tZ)(c.G,{css:[{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:u.TV.space16,gridAutoFlow:"dense"}],children:w?w.items.map((function(e){return(0,l.tZ)(p.Tg,{background:"default",css:[u.l0.borderRadius(8)],children:(0,l.tZ)(m.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===w||void 0===w?void 0:w.pageInfo.nextCursor)?(0,l.tZ)(s.zx,{disabled:g,text:g?"Loading...":"Load more",onClick:function(){g||Z({variables:{after:w.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var l=n.fetchMoreResult,a="Repl"===l.repl.__typename?l.repl:null;return a?(0,i.Z)((0,r.Z)({},l),{repl:(0,i.Z)((0,r.Z)({},a),{publicForks:(0,i.Z)((0,r.Z)({},a.publicForks),{items:(0,o.Z)(t.publicForks.items).concat((0,o.Z)(a.publicForks.items))})})}):e}})}}):null]})]})}},58070:function(e,n,t){"use strict";t.d(n,{P9:function(){return b},Qp:function(){return R},cT:function(){return k},cq:function(){return E},g:function(){return S},kz:function(){return P},oY:function(){return T},pn:function(){return X},xB:function(){return w}});var r=t(72006),i=t(43119),o=t(71440),l=t(8619),a=t(50216);function c(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsUser on User {\n    id\n    username\n    image\n    fullName\n    isBlockingCurrentUser\n    ...UserLinkUser\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplComment on ReplComment {\n    id\n    body\n    repl {\n      id\n      url\n    }\n    timeCreated\n    currentUserPermissions {\n      id\n      edit\n      delete\n      canHideComment\n      report\n    }\n    user {\n      id\n      ...ReplViewCommentsUser\n    }\n    post {\n      id\n      title\n      canPin\n      canHide\n      canChangeBoard\n      canReport\n      hasReported\n    }\n    isHidden\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplCommentThread on ReplComment {\n    id\n    ...ReplViewCommentsReplComment\n    replies {\n      id\n      ...ReplViewCommentsReplComment\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplComment($input: CreateReplCommentInput!) {\n    createReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplCommentReply(\n    $input: CreateReplCommentReplyInput!\n  ) {\n    createReplCommentReply(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplComment($input: UpdateReplCommentInput!) {\n    updateReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        body\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsDeleteReplComment($id: Int!) {\n    deleteReplComment(id: $id) {\n      ... on ReplComment {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplPost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        title\n      }\n    }\n  }\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation ToggleHiddenComment($commentId: Int!, $isHidden: Boolean!) {\n    toggleHiddenComment(commentId: $commentId, isHidden: $isHidden) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  mutation ReportReplComment($commentId: Int!, $reason: String!) {\n    reportReplComment(replCommentId: $commentId, reason: $reason) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoardReport {\n        id\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var g={},b=(0,o.Ps)(c(),l._),C=(0,o.Ps)(u(),b),w=(0,o.Ps)(s(),C),x=(0,o.Ps)(d(),C);function R(e){var n=(0,r.Z)({},g,e);return a.D(x,n)}var y=(0,o.Ps)(m(),C);function k(e){var n=(0,r.Z)({},g,e);return a.D(y,n)}var B=(0,o.Ps)(p());function S(e){var n=(0,r.Z)({},g,e);return a.D(B,n)}var G=(0,o.Ps)(h());function E(e){var n=(0,r.Z)({},g,e);return a.D(G,n)}var I=(0,o.Ps)(f());function P(e){var n=(0,r.Z)({},g,e);return a.D(I,n)}var U=(0,o.Ps)(v(),C);function T(e){var n=(0,r.Z)({},g,e);return a.D(U,n)}var _=(0,o.Ps)(Z());function X(e){var n=(0,r.Z)({},g,e);return a.D(_,n)}},41943:function(e,n,t){"use strict";t.d(n,{x:function(){return ie},H:function(){return J}});var r=t(72006),i=t(4405),o=t(2272),l=t(74985),a=t(48306),c=t.n(a),u=t(50959),s=t(58070),d=t(44385),m=t(25404),p=t(50035),h=t(92585),f=t(67775),v=t(38029),Z=t(43119),g=t(71440),b=t(24635),C=t(50216);function w(){var e=(0,Z.Z)(["\n  fragment ReplPostSettingsPost on Post {\n    id\n    isAnnouncement\n    isPinned\n    isLocked\n    isHidden\n    board {\n      id\n      name\n    }\n  }\n"]);return w=function(){return e},e}function x(){var e=(0,Z.Z)(["\n  query ReplPostSettings($postId: Int!) {\n    boards {\n      id\n      name\n    }\n    post(id: $postId) {\n      id\n      canPin\n      canHide\n      canChangeBoard\n      board {\n        id\n        name\n      }\n      ...ReplPostSettingsPost\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function R(){var e=(0,Z.Z)(["\n  mutation ReplPostSettingsUpdatePost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        ...ReplPostSettingsPost\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var y={},k=(0,g.Ps)(w()),B=(0,g.Ps)(x(),k);var S=(0,g.Ps)(R(),k);var G=t(88965),E=t(26473),I=t(53312),P=t(16679),U=t(54314),T=E.K.label;function _(e){var n=e.children;return(0,l.tZ)(E.G,{css:[G.l0.rowWithGap(8),G.l0.align.center],children:n})}function X(e){var n,t=e.postId,i=function(e){p.loading||h&&m({variables:{input:(0,r.Z)({id:h.id},e)}})},a=(0,v.U)(),c=function(e){var n=(0,r.Z)({},y,e);return b.a(B,n)}({variables:{postId:t}}),u=c.data,s=c.loading,d=(0,o.Z)(function(e){var n=(0,r.Z)({},y,e);return C.D(S,n)}(),2),m=d[0],p=d[1];if(s)return null;var h="Post"===(null===u||void 0===u||null===(n=u.post)||void 0===n?void 0:n.__typename)?u.post:null,f=null===u||void 0===u?void 0:u.boards;if(!h||!f)return(0,l.tZ)(I.xv,{multiline:!1,children:"Something went wrong"});var Z={isPinned:a("isPinned"),isHidden:a("isHidden"),boardId:a("boardId")};return(0,l.BX)(E.G,{css:[G.l0.colWithGap(24)],children:[(0,l.tZ)(I.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,l.BX)(E.G,{css:[G.l0.colWithGap(8)],children:[(0,l.BX)(_,{children:[(0,l.tZ)(P.X,{id:Z.isPinned,checked:Boolean(h.isPinned),onChange:function(){return i({isPinned:!h.isPinned})}}),(0,l.tZ)(T,{htmlFor:Z.isPinned,children:"Pin post to Community feed"})]}),h.canHide?(0,l.BX)(_,{children:[(0,l.tZ)(P.X,{id:Z.isHidden,checked:Boolean(h.isHidden),onChange:function(e){return i({isHidden:e.target.checked})}}),(0,l.tZ)(T,{htmlFor:Z.isHidden,children:"Hide post from listing"})]}):null]}),h.canChangeBoard?(0,l.BX)(_,{children:[(0,l.tZ)(U.P,{id:Z.boardId,placeholder:"Select a board",items:f.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:h.board?{value:h.board,title:h.board.name}:void 0,onChange:function(e){return i({boardId:e.value.id})}}),(0,l.tZ)(T,{htmlFor:Z.isHidden,children:"Change board (requires reload)"})]}):null]})}var H=t(90171),D=t(92470),W=t(12068),F=t(94875),V=t(46068),A=t(9434),M=t(95148),L=t(61623),z=t(20685),$=t(21651),N=t(95141),O=t(37268),q=t(55418),Q=t(59989),Y=E.K.form;function K(e){var n=e.commentId,t=e.onDone,r=(0,u.useState)(""),i=r[0],a=r[1],c=(0,m.Z)(),d=c.showConfirm,p=c.showError,h=(0,o.Z)((0,s.pn)({variables:{commentId:n,reason:i},onCompleted:function(e){"BoardReport"===e.reportReplComment.__typename?(d("Comment reported"),t()):p(e.reportReplComment.message)}}),2),f=h[0],v=h[1].loading;return(0,l.BX)(E.G,{css:[G.l0.colWithGap(24)],children:[(0,l.tZ)(I.h4,{level:2,variant:"subheadBig",children:"Report Comment"}),(0,l.BX)(Y,{onSubmit:function(e){e.preventDefault(),i?f():p("Please specify a reason to report this comment.")},css:[G.l0.colWithGap(32)],children:[(0,l.tZ)(E.G,{css:[G.l0.colWithGap(8)],children:(0,l.tZ)(z.B,{placeholder:"Why do you want to report this comment?",value:i,onChange:function(e){return a(e.currentTarget.value)},css:[G.l0.minHeight(64),G.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(E.G,{css:[G.l0.rowWithGap(16),G.l0.justify.end],children:[(0,l.tZ)(E.G,{children:(0,l.tZ)(N.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,l.tZ)(E.G,{children:(0,l.tZ)(N.zx,{disabled:v,text:v?"Reporting":"Report Comment",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(Q.Z,{})})})]})]})]})}function j(e){var n=e.initialValue,t=e.commentId,r=e.onReply,i=e.onCancel,a=(0,u.useState)(null),c=a[0],d=a[1],m=(0,o.Z)((0,s.cT)({onCompleted:function(e){var n="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(n)return(0,A.j)(A.U3.COMMENT_MADE,{source:"spotlight"}),void r(n);var t="UserError"===e.createReplCommentReply.__typename||"UnauthorizedError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;t&&d(t)}}),2),p=m[0],h=m[1];return(0,l.tZ)(V.EQ,{error:c,initialValue:n,onCancel:i,onSubmit:function(e){h.loading||p({variables:{input:{body:e,replCommentId:t}}})}})}function J(e){var n=e.replId,t=e.placeholder,r=e.onComment,i=e.autoFocus,a=void 0!==i&&i,c=e.onCancel,m=void 0===c?function(){}:c,p=(0,u.useState)(!1),h=p[0],f=p[1],v=(0,u.useState)(null),Z=v[0],g=v[1],b=(0,o.Z)((0,s.Qp)({onCompleted:function(e){var n="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(n)return(0,A.j)(A.U3.COMMENT_MADE,{source:"spotlight"}),f(!0),void r(n);var t="UserError"===e.createReplComment.__typename||"UnauthorizedError"===e.createReplComment.__typename?e.createReplComment.message:null;t&&g(t)}}),2),C=b[0],w=b[1];return h?(0,l.tZ)(q.E,{icon:(0,l.tZ)(d.Z,{}),closable:!0,closeAction:function(){m(),f(!1)},colorway:"positive",text:"Comment added"}):(0,l.tZ)(V.EQ,{autoFocus:a,initialValue:"",placeholder:t,hideControls:!0,error:Z,onCancel:function(){m(),g(null)},onSubmit:function(e){w.loading||C({variables:{input:{body:e,replId:n}}})}})}var ee={background:G.TV.backgroundDefault,borderRadius:G.TV.borderRadius8,scrollPaddingTop:"100px",padding:G.TV.space8,border:"solid 2px ".concat(G.TV.accentPrimaryDimmer)};function ne(e){var n=e.comment,t=e.onReply,a=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,H.useRouter)().query,b=g.c,C=Number(b),w=(0,m.Z)().showNotice,x=(0,o.Z)((0,s.g)(),2),R=x[0],y=x[1],k=(0,o.Z)((0,s.cq)({variables:{id:n.id},onCompleted:function(){D(null),a(n)}}),2),B=k[0],S=k[1],I=(0,o.Z)((0,s.oY)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],P=(0,u.useState)(!1),U=P[0],T=P[1],_=(0,u.useState)(null),X=_[0],D=_[1],W=X===V.nQ.Edit,F=n.user;(0,u.useEffect)((function(){var e;X===V.nQ.Hide||X===V.nQ.Show?I():X===V.nQ.CopyLink&&(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+n.repl.url+"?c="+n.id).then((function(){w("Copied!")})),D(null))}),[X,I]);var A=(0,u.useRef)(null),z=C===n.id;if((0,u.useEffect)((function(){(null===A||void 0===A?void 0:A.current)&&z&&A.current.scrollIntoView({behavior:"smooth"})}),[z,g.c]),!F)return null;var N=n.currentUserPermissions,O=Boolean(N);return(0,l.BX)(E.G,{css:[G.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},z?ee:null],children:[(0,l.tZ)(E.G,{innerRef:A,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(V.Yt,{user:F}),(0,l.BX)(E.G,{css:[G.l0.flex.growAndShrink(1),G.l0.colWithGap(4)],children:[(0,l.BX)(E.G,{css:[G.l0.align.center,G.l0.rowWithGap(16)],children:[(0,l.tZ)(V.wb,{user:F,timeCreated:n.timeCreated}),n.isHidden?(0,l.tZ)(L.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(M.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),W?(0,l.tZ)(V.EQ,{buttonText:"Save",buttonIcon:(0,l.tZ)(d.Z,{}),initialValue:n.body,onSubmit:function(e){y.loading||(R({variables:{input:{id:n.id,body:e}},optimisticResponse:{__typename:"RootMutationType",updateReplComment:(0,i.Z)((0,r.Z)({},n),{body:e})}}),D(null))},onCancel:function(){return D(null)}}):(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{useRemarkGfm:!1,children:n.body})}),U?(0,l.tZ)(E.G,{css:[G.l0.pt(12)],children:(0,l.tZ)(j,{initialValue:"@".concat(F.username," "),commentId:f,onReply:function(e){t(e),T(!1)},onCancel:function(){return T(!1)}})}):(0,l.BX)(E.G,{css:[G.l0.rowWithGap(8),{marginLeft:-4}],children:[O&&!n.isHidden&&Z?(0,l.tZ)(V.g4,{onClick:function(){return T(!0)}}):null,v]})]}),W?null:(0,l.tZ)(E.G,{css:[U&&{visibility:"hidden"}],children:(0,l.tZ)(V.pl,{className:"actions",canEdit:Boolean(null===N||void 0===N?void 0:N.edit),canReport:Boolean(null===N||void 0===N?void 0:N.report),canEditSettings:!1,canDelete:Boolean(null===N||void 0===N?void 0:N.delete),onAction:D,canHideComment:Boolean(null===N||void 0===N?void 0:N.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===N||void 0===N?void 0:N.canHideComment)&&Boolean(n.isHidden)})}),(0,l.tZ)($.u,{isOpen:X===V.nQ.Delete,onRequestClose:function(){return D(null)},children:(0,l.tZ)(h.Z,{delete:function(){S.loading||B({variables:{id:n.id}})},entityType:"comment",hideModal:function(){return D(null)}})}),(0,l.tZ)($.u,{isOpen:X===V.nQ.Report,onRequestClose:function(){return D(null)},children:(0,l.tZ)(K,{commentId:n.id,onDone:function(){return D(null)}})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function te(e){var n=e.initialTitle,t=e.initialBody,r=e.onSubmit,i=e.onCancel,o=(0,u.useState)(n),a=o[0],c=o[1],s=(0,u.useState)(t),m=s[0],p=s[1],h=(0,V.Ex)(),Z=(0,v.U)();return(0,l.BX)(V.l0,{css:[G.l0.colWithGap(8),G.l0.mt(8)],onSubmit:function(e){e.preventDefault(),r({title:a,body:m})},children:[(0,l.BX)(E.G,{css:[G.l0.colWithGap(16)],children:[(0,l.BX)(E.G,{css:[G.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:Z("title"),children:(0,l.tZ)(I.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Title"})}),(0,l.tZ)(z.II,{value:a,placeholder:"Give your post a title",onChange:function(e){return c(e.currentTarget.value)},id:Z("title")})]}),(0,l.tZ)(f.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&r({title:a,body:m})},initialValue:m,onChange:p,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,l.BX)(E.G,{css:[G.l0.rowWithGap(8),G.l0.justify.end],children:[(0,l.tZ)(N.zx,{text:"Cancel",onClick:i}),(0,l.tZ)(N.zx,{type:"submit",iconLeft:(0,l.tZ)(d.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:t===m&&n===a})]})]})}function re(e){var n=e.post,t=e.comment,a=e.onReply,d=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,H.useRouter)().query.c,b=Number(g),C=(0,m.Z)(),w=C.showError,x=C.showNotice,R=(0,o.Z)((0,s.kz)({onError:function(e){return w(e.message)}}),2),y=R[0],k=R[1],B=(0,o.Z)((0,s.g)(),2),S=B[0],P=B[1],U=(0,o.Z)((0,s.cq)({variables:{id:t.id},onCompleted:function(){J(null),d(t)}}),2),T=U[0],_=U[1],A=(0,o.Z)((0,s.oY)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],z=(0,u.useState)(!1),N=z[0],q=z[1],Q=(0,u.useState)(null),Y=Q[0],J=Q[1],ee=Y===V.nQ.Edit,ne=t.user;(0,u.useEffect)((function(){var e;Y===V.nQ.Hide||Y===V.nQ.Show?A():Y===V.nQ.CopyLink&&(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+t.repl.url+"?c="+t.id).then((function(){x("Copied!")})),J(null))}),[Y,A]);var re=(0,u.useRef)(null),ie=b===t.id;if((0,u.useEffect)((function(){(null===re||void 0===re?void 0:re.current)&&ie&&(null===re||void 0===re||re.current.scrollIntoView({behavior:"smooth"}))}),[ie]),!ne)return null;var oe=t.currentUserPermissions,le=Boolean(oe),ae=Boolean(n.canPin||n.canChangeBoard||n.canHide);return(0,l.BX)(O.Tg,{css:[G.l0.rowWithGap(8),G.l0.backgroundColor.backgroundDefault,G.l0.borderRadius(8),G.l0.border({color:ie?G.TV.accentPrimaryDimmer:G.TV.backgroundHigher,width:ie?2:1}),{":hover .actions":{opacity:1},position:"relative"}],background:"default",children:[(0,l.tZ)(E.G,{innerRef:re,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.BX)(E.G,{css:[G.l0.flex.growAndShrink(1),G.l0.flex.column,{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,l.BX)(O.Tg,{css:[G.l0.align.center,G.l0.rowWithGap(8),G.l0.p(8),G.l0.border({direction:"bottom",color:G.TV.backgroundHigher}),G.l0.borderRadius(8,8,0,0),G.l0.pr(8)],background:"higher",children:[(0,l.tZ)(V.Yt,{user:ne}),(0,l.tZ)(W.Z,{username:ne.username,children:(0,l.tZ)(D.ZP,{user:ne,children:(0,l.tZ)("a",{css:[{color:"inherit"}],className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]]),children:ne.username})})}),(0,l.BX)(E.G,{css:[G.l0.flex.growAndShrink(1),G.l0.rowWithGap(4),G.l0.align.center,{overflow:"hidden"}],children:[(0,l.tZ)(I.xv,{color:"dimmest",multiline:!1,children:"published an update"}),(0,l.tZ)(I.xv,{color:"dimmest",multiline:!1,children:"\u2022"}),(0,l.tZ)(F.EK,{date:t.timeCreated,textColor:"dimmest"}),t.isHidden?(0,l.tZ)(L.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(M.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),ee?null:(0,l.tZ)(E.G,{css:[N&&{visibility:"hidden"}],children:(0,l.tZ)(V.pl,{className:"actions",canEdit:Boolean(null===oe||void 0===oe?void 0:oe.edit),canReport:n.canReport,canEditSettings:ae,canDelete:Boolean(null===oe||void 0===oe?void 0:oe.delete),onAction:J,canHideComment:Boolean(null===oe||void 0===oe?void 0:oe.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===oe||void 0===oe?void 0:oe.canHideComment)&&Boolean(t.isHidden)})})]}),(0,l.BX)(E.G,{css:[G.l0.p(16),G.l0.flex.column,G.l0.colWithGap(8)],children:[ee?(0,l.tZ)(te,{initialTitle:n.title||"",initialBody:t.body,onSubmit:function(e){var o=e.title,l=e.body;P.loading||k.loading||(y({variables:{input:{id:n.id,title:o}},optimisticResponse:{__typename:"RootMutationType",updatePost:{__typename:"UpdatePostPayload",post:(0,i.Z)((0,r.Z)({},n),{title:o})}}}),S({variables:{input:{id:t.id,body:l}},optimisticResponse:{__typename:"RootMutationType",updateReplComment:(0,i.Z)((0,r.Z)({},t),{body:l})}}),J(null))},onCancel:function(){return J(null)}}):(0,l.BX)(l.HY,{children:[n.title?(0,l.tZ)(I.xv,{variant:"subheadBig",multiline:!1,children:n.title}):null,(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{useRemarkGfm:!1,children:t.body})})]}),ee?null:(0,l.tZ)(l.HY,{children:N?(0,l.tZ)(E.G,{css:[G.l0.pt(12)],children:(0,l.tZ)(j,{initialValue:"@".concat(ne.username," "),commentId:f,onReply:function(e){a(e),q(!1)},onCancel:function(){return q(!1)}})}):(0,l.BX)(E.G,{css:[G.l0.rowWithGap(2),{marginLeft:-4}],children:[le&&Z?(0,l.tZ)(V.g4,{onClick:function(){return q(!0)}}):null,v]})})]})]}),(0,l.tZ)($.u,{isOpen:Y===V.nQ.Delete,onRequestClose:function(){return J(null)},children:(0,l.tZ)(h.Z,{delete:function(){_.loading||T({variables:{id:t.id}})},entityType:"post",hideModal:function(){return J(null)}})}),(0,l.tZ)($.u,{isOpen:Y===V.nQ.Report,onRequestClose:function(){return J(null)},children:(0,l.tZ)(K,{commentId:t.id,onDone:function(){return J(null)}})}),(0,l.tZ)($.u,{isOpen:Y===V.nQ.Settings,onRequestClose:function(){return J(null)},children:(0,l.tZ)(X,{postId:n.id})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function ie(e){var n,t=e.comment,r=e.onReply,i=e.onDelete,o=e.commentsEnabled,a=(0,H.useRouter)().query.c,c=Number(a),s=t.replies,d=(0,u.useState)(s.some((function(e){return e.id===c}))),m=d[0],p=d[1],h=s.length,f=h?(0,l.tZ)(V.tE,{onClick:function(){return p((function(e){return!e}))},repliesCount:h,isExpanded:m}):null,v=(null===(n=t.post)||void 0===n?void 0:n.title)?t.post:null;return v?(0,l.BX)(l.HY,{children:[(0,l.tZ)(re,{replyToId:t.id,post:v,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i,commentsEnabled:o}),m?(0,l.tZ)(E.G,{css:[G.l0.colWithGap(32),G.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(ne,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]}):(0,l.BX)(E.G,{css:[G.l0.colWithGap(32)],children:[(0,l.tZ)(ne,{commentsEnabled:o,replyToId:t.id,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i}),m&&0!==h?(0,l.tZ)(E.G,{css:[G.l0.colWithGap(32),G.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(ne,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]})}},94275:function(e,n,t){"use strict";t.d(n,{ex:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),l=t(58070),a=t(76678),c=t(24635);function u(){var e=(0,i.Z)(["\n  query ReplViewComments($replId: String!, $count: Int = 100, $after: String) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        url\n        owner {\n          ... on User {\n            id\n            ...ReplViewCommentsUser\n          }\n          ... on Team {\n            id\n          }\n        }\n        multiplayers {\n          id\n          ...ReplViewCommentsUser\n        }\n        currentUserPermissions {\n          changeCommentSettings\n        }\n        commentSettings {\n          id\n          enabled\n        }\n        comments(count: $count, after: $after) {\n          items {\n            id\n            ...ReplViewCommentsReplCommentThread\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n        ...ReplViewReplCommentsHeaderRepl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(u(),l.P9,l.xB,a.d4);function m(e){var n=(0,r.Z)({},s,e);return c.a(d,n)}},76678:function(e,n,t){"use strict";t.d(n,{d4:function(){return s},k2:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),l=t(50216);function a(){var e=(0,i.Z)(["\n  fragment ReplViewReplCommentsHeaderRepl on Repl {\n    id\n    commentCount\n    currentUserPermissions {\n      changeCommentSettings\n    }\n    commentSettings {\n      id\n      enabled\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplViewReplCommentsHeaderSetReplCommentSettings(\n    $input: SetReplCommentSettingsInput!\n  ) {\n    setReplCommentSettings(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplCommentsHeaderRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(a()),d=(0,o.Ps)(c(),s);function m(e){var n=(0,r.Z)({},u,e);return l.D(d,n)}},74330:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var r=t(72006),i=t(4405),o=t(2272),l=t(74985),a=t(50959),c=t(6257),u=t(88965),s=t(26473),d=t(43312),m=t(30826),p=t.n(m),h=function(e){var n=e.children,t=e.gap,r=void 0===t?32:t,i=(0,o.Z)(a.useState(!1),2),c=i[0],m=i[1],h=(0,o.Z)(a.useState(0),2),f=h[0],v=h[1],Z=(0,o.Z)(a.useState(0),2),g=Z[0],b=Z[1],C=a.useRef(null),w=a.useRef(null);a.useEffect((function(){var e=p()((function(){C.current&&w.current&&(v(C.current.offsetWidth),b(w.current.offsetWidth)),m(f>g)}),100);return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[f,g]);var x=32*(f+r),R=3e3/x*100,y=Math.min(Math.max(R,1),99),k=(0,d.F4)("\n    0% { transform: translateX(0%); }\n    ".concat(y,"% { transform: translateX(0%); }\n    100% { transform: translateX(calc(-100% - ").concat(r,"px)); }\n  ")),B={animation:c?"".concat(k," ").concat(x,"ms linear infinite"):"none"};return(0,l.tZ)("div",{ref:w,css:[u.l0.width("100%"),u.l0.overflow("hidden"),c?{maskImage:"linear-gradient(to left, transparent, black 16px, black)"}:null],children:(0,l.BX)(s.G,{css:[u.l0.flex.row,u.l0.width("max-content")],children:[(0,l.tZ)("div",{ref:C,css:B,children:n}),c?(0,l.tZ)("div",{"aria-hidden":!0,css:[B,{marginLeft:r}],children:n}):null]})})},f=t(53312),v=t(79824),Z=t(48002),g=t(23789),b=t(56123),C=t(55418),w=t(32905);function x(e){var n=e.repl,t=e.iconEditable,a=e.currentUser,d=e.hideActions,m=e.small,p=(0,o.Z)((0,c.cu)(),1)[0],x=(0,g.W)((function(e){return p({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},n),{iconUrl:e})}}})}));return(0,l.BX)(s.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(s.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[t?null:(0,l.tZ)(b.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),t?(0,l.tZ)(g.Z,{size:32,value:x.previewUrl||n.iconUrl,onUpload:function(e){return x.uploadImage(e,w.N.ReplIcon)},isUploading:Boolean(x.previewUrl)}):null,(0,l.tZ)(h,{children:(0,l.tZ)(f.h4,{variant:m?"headerDefault":"headerBig",level:1,css:[u.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title})}),!d&&(0,l.tZ)(Z.Z,{repl:n,currentUser:a,source:"coverPage"})]}),x.error?(0,l.tZ)(s.G,{css:[u.l0.align.start],children:(0,l.tZ)(C.E,{icon:(0,l.tZ)(v.Z,{}),colorway:"negative",text:x.error,closable:!0,closeAction:x.clearError})}):null]})}},40139:function(e,n,t){"use strict";t.d(n,{P:function(){return u}});var r=t(74985),i=(t(50959),t(82893)),o=t.n(i),l=t(26473),a=t(95134),c=l.K.a;function u(e){return(0,r.tZ)(o(),{legacyBehavior:!0,as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.BX)(c,{ref:e.innerRef,className:e.className,rel:e.rel,role:"link",target:e.target,onClick:e.onClick,css:[(0,a.E)({variant:"filled",colorway:e.colorway,clickable:!0,iconLeft:!!e.iconLeft,iconRight:!!e.iconRight}),{color:"inherit",transition:"background-color 120ms ease-out, color 120ms ease-out"}],children:[e.iconLeft,(0,r.tZ)("span",{children:e.text}),e.iconRight]})})}},11066:function(e){!function(){var n=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],t="undefined"!==typeof window,r=t&&null!=window.mozInnerScreenX;function i(e,i,o){if(!t)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var l=o&&o.debug||!1;if(l){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var u=c.style,s=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d="INPUT"===e.nodeName;u.whiteSpace="pre-wrap",d||(u.wordWrap="break-word"),u.position="absolute",l||(u.visibility="hidden"),n.forEach((function(e){d&&"lineHeight"===e?u.lineHeight=s.height:u[e]=s[e]})),r?e.scrollHeight>parseInt(s.height)&&(u.overflowY="scroll"):u.overflow="hidden",c.textContent=e.value.substring(0,i),d&&(c.textContent=c.textContent.replace(/\s/g,"\xa0"));var m=document.createElement("span");m.textContent=e.value.substring(i)||".",c.appendChild(m);var p={top:m.offsetTop+parseInt(s.borderTopWidth),left:m.offsetLeft+parseInt(s.borderLeftWidth),height:parseInt(s.lineHeight)};return l?m.style.backgroundColor="#aaa":document.body.removeChild(c),p}"undefined"!=typeof e.exports?e.exports=i:t&&(window.getCaretCoordinates=i)}()}}]);
//# sourceMappingURL=4506-8b0241bbae72c5c9.js.map