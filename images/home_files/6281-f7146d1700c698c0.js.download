!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6d7424e5-93af-4d69-aef8-27cba7a9cccd",e._sentryDebugIdIdentifier="sentry-dbid-6d7424e5-93af-4d69-aef8-27cba7a9cccd")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"15e16f7d"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6281],{3341:function(e){e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!==o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!==o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!==o--;){var s=i[o];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}},81362:function(e,t,r){r.d(t,{Hg:function(){return L},QK:function(){return de},RI:function(){return s},z:function(){return N}});var n=r(48587),o=r(87708),i=r(25604);r(68935),r(52682);class s{constructor(e,t,r,n){this.fromA=e,this.toA=t,this.fromB=r,this.toB=n}offset(e,t){return new s(this.fromA+e,this.toA+e,this.fromB+t,this.toB+t)}}function a(e,t,r,n,o,i){if(e==n)return[];let f=m(e,t,r,n,o,i),u=g(e,t+f,r,n,o+f,i),p=(r-=u)-(t+=f),b=(i-=u)-(o+=f);if(!p||!b)return[new s(t,r,o,i)];if(p>b){let a=e.slice(t,r).indexOf(n.slice(o,i));if(a>-1)return[new s(t,t+a,o,o),new s(t+a+b,r,i,i)]}else if(b>p){let a=n.slice(o,i).indexOf(e.slice(t,r));if(a>-1)return[new s(t,t,o,o+a),new s(r,r,o+a+p,i)]}if(1==p||1==b)return[new s(t,r,o,i)];let w=A(e,t,r,n,o,i);if(w){let[s,l,f]=w;return a(e,t,s,n,o,l).concat(a(e,s+f,r,n,l+f,i))}return function(e,t,r,n,o,i){let a=r-t,f=i-o;if(Math.min(a,f)>16*l)return v(e,t,r,n,o,i);let u=Math.ceil((a+f)/2);c.reset(u),h.reset(u);let m=(r,i)=>e.charCodeAt(t+r)==n.charCodeAt(o+i),g=(t,o)=>e.charCodeAt(r-t-1)==n.charCodeAt(i-o-1),p=(a-f)%2!=0?h:null,A=p?null:c;for(let s=0;s<u;s++){if(s>l)return v(e,t,r,n,o,i);let b=c.advance(s,a,f,u,p,!1,m)||h.advance(s,a,f,u,A,!0,g);if(b)return d(e,t,r,t+b[0],n,o,i,o+b[1])}return[new s(t,r,o,i)]}(e,t,r,n,o,i)}let l=1e9;class f{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let t=0;t<this.len;t++)this.vec[t]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,t,r,n,o,i,s){for(let a=-e+this.start;a<=e-this.end;a+=2){let l=n+a,f=a==-e||a!=e&&this.vec[l-1]<this.vec[l+1]?this.vec[l+1]:this.vec[l-1]+1,c=f-a;for(;f<t&&c<r&&s(f,c);)f++,c++;if(this.vec[l]=f,f>t)this.end+=2;else if(c>r)this.start+=2;else if(o){let e=n+(t-r)-a;if(e>=0&&e<this.len&&-1!=o.vec[e])if(i){let r=o.vec[e];if(r>=t-f)return[r,n+r-e]}else{if(f>=t-o.vec[e])return[f,c]}}}return null}}const c=new f,h=new f;function d(e,t,r,n,o,i,l,f){let c=!1;return E(e,n)||++n!=r||(c=!0),E(o,f)||++f!=l||(c=!0),c?[new s(t,r,i,l)]:a(e,t,n,o,i,f).concat(a(e,n,r,o,f,l))}function u(e,t){let r=1,n=Math.min(e,t);for(;r<n;)r<<=1;return r}function m(e,t,r,n,o,i){if(t==r||t==i||e.charCodeAt(t)!=n.charCodeAt(o))return 0;let s=u(r-t,i-o);for(let a=t,l=o;;){let o=a+s,f=l+s;if(o>r||f>i||e.slice(a,o)!=n.slice(l,f)){if(1==s)return a-t-(E(e,a)?0:1);s>>=1}else{if(o==r||f==i)return o-t;a=o,l=f}}}function g(e,t,r,n,o,i){if(t==r||o==i||e.charCodeAt(r-1)!=n.charCodeAt(i-1))return 0;let s=u(r-t,i-o);for(let a=r,l=i;;){let i=a-s,f=l-s;if(i<t||f<o||e.slice(i,a)!=n.slice(f,l)){if(1==s)return r-a-(E(e,a)?0:1);s>>=1}else{if(i==t||f==o)return r-i;a=i,l=f}}}function p(e,t,r,n,o,i,s,a){let l=n.slice(o,i),f=null;for(;;){if(f||s<a)return f;for(let a=t+s;;){E(e,a)||a++;let c=a+s;if(E(e,c)||(c+=c==a+1?1:-1),c>=r)break;let h=e.slice(a,c),d=-1;for(;-1!=(d=l.indexOf(h,d+1));){let s=m(e,c,r,n,o+d+h.length,i),l=g(e,t,a,n,o,o+d),u=h.length+s+l;(!f||f[2]<u)&&(f=[a-l,o+d-l,u])}a=c}if(a<0)return f;s>>=1}}function A(e,t,r,n,o,i){let s=r-t,a=i-o;if(s<a){let s=A(n,o,i,e,t,r);return s&&[s[1],s[0],s[2]]}return s<4||2*a<s?null:p(e,t,r,n,o,i,Math.floor(s/4),-1)}function v(e,t,r,n,o,i){let l,f=r-t,c=i-o;if(f<c){let s=p(n,o,i,e,t,r,Math.floor(f/6),50);l=s&&[s[1],s[0],s[2]]}else l=p(e,t,r,n,o,i,Math.floor(c/6),50);if(!l)return[new s(t,r,o,i)];let[h,d,u]=l;return a(e,t,h,n,o,d).concat(a(e,h+u,r,n,d+u,i))}function b(e,t){for(let r=1;r<e.length;r++){let n=e[r-1],o=e[r];n.toA>o.fromA-t&&n.toB>o.fromB-t&&(e[r-1]=new s(n.fromA,o.toA,n.fromB,o.toB),e.splice(r--,1))}}let w;try{w=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(me){}function B(e){return e>48&&e<58||e>64&&e<91||e>96&&e<123}function k(e,t){if(t==e.length)return 0;let r=e.charCodeAt(t);return r<192?B(r)?1:0:w?O(r)&&t!=e.length-1?w.test(e.slice(t,t+2))?2:0:w.test(String.fromCharCode(r))?1:0:0}function C(e,t){if(!t)return 0;let r=e.charCodeAt(t-1);return r<192?B(r)?1:0:w?D(r)&&1!=t?w.test(e.slice(t-2,t))?2:0:w.test(String.fromCharCode(r))?1:0:0}function x(e,t,r){if(t==e.length||!C(e,t))return t;for(let n=t,o=t+r;;){let r=k(e,n);if(!r)return n;if(n+=r,n>o)return t}}function M(e,t,r){if(!t||!k(e,t))return t;for(let n=t,o=t-r;;){let r=C(e,n);if(!r)return n;if(n-=r,n<o)return t}}function y(e,t,r){for(let n=t,o=t-r;;){let r=n?e.charCodeAt(n-1):10;if(10==r)return n;if(n--,n<o||32!=r&&9!=r)return t}}const O=e=>e>=55296&&e<=56319,D=e=>e>=56320&&e<=57343;function E(e,t){return!t||t==e.length||!O(e.charCodeAt(t-1))||!D(e.charCodeAt(t))}function L(e,t,r){var n;return l=(null!==(n=null===r||void 0===r?void 0:r.scanLimit)&&void 0!==n?n:1e9)>>1,function(e,t,r){for(;;){b(r,1);let n=!1;for(let o=0;o<r.length;o++){let i,a,l=r[o];(i=m(e,l.fromA,l.toA,t,l.fromB,l.toB))&&(l=r[o]=new s(l.fromA+i,l.toA,l.fromB+i,l.toB)),(a=g(e,l.fromA,l.toA,t,l.fromB,l.toB))&&(l=r[o]=new s(l.fromA,l.toA-a,l.fromB,l.toB-a));let f=l.toA-l.fromA,c=l.toB-l.fromB;if(f&&c)continue;let h=l.fromA-(o?r[o-1].toA:0),d=(o<r.length-1?r[o+1].fromA:e.length)-l.toA;if(!h||!d)continue;let u=f?e.slice(l.fromA,l.toA):t.slice(l.fromB,l.toB);h<=u.length&&e.slice(l.fromA-h,l.fromA)==u.slice(u.length-h)?(r[o]=new s(l.fromA-h,l.toA-h,l.fromB-h,l.toB-h),n=!0):d<=u.length&&e.slice(l.toA,l.toA+d)==u.slice(0,d)&&(r[o]=new s(l.fromA+d,l.toA+d,l.fromB+d,l.toB+d),n=!0)}if(!n)break}return r}(e,t,a(e,0,e.length,t,0,t.length))}function R(e,t,r){return function(e,t,r){for(let n=0,o=0;o<e.length;o++){let i=e[o],a=i.toA-i.fromA,l=i.toB-i.fromB;if(a&&l||a>3||l>3){let f=o==e.length-1?t.length:e[o+1].fromA,c=i.fromA-n,h=f-i.toA,d=M(t,i.fromA,Math.min(c,5)),u=x(t,i.toA,Math.min(h,5)),m=i.fromA-d,g=u-i.toA;if(!a||!l){let h,p,A=Math.max(a,l),[v,b,w]=a?[t,i.fromA,i.toA]:[r,i.fromB,i.toB];m&&g?(A>m&&t.slice(d,i.fromA)==v.slice(w-m,w)?(i=e[o]=new s(d,d+a,i.fromB-m,i.toB-m),d=i.fromA,u=x(t,i.toA,Math.min(f-i.toA,5))):A>g&&t.slice(i.toA,u)==v.slice(b,b+g)&&(i=e[o]=new s(u-a,u,i.fromB+g,i.toB+g),u=i.toA,d=M(t,i.fromA,Math.min(i.fromA-n,5))),m=i.fromA-d,g=u-i.toA):m||g||!(p=i.fromA-(h=y(t,i.fromA,c)))||t.slice(h,i.fromA)!=v.slice(w-p,w)||(i=e[o]=new s(h,h+a,i.fromB-p,i.toB-p))}(m||g)&&(i=e[o]=new s(i.fromA-m,i.toA+g,i.fromB-m,i.toB+g)),n=i.toA}}return b(e,3),e}(L(e,t,r),e,t)}const S={scanLimit:500};class N{constructor(e,t,r,n,o){this.changes=e,this.fromA=t,this.toA=r,this.fromB=n,this.toB=o}offset(e,t){return e||t?new N(this.changes,this.fromA+e,this.toA+e,this.fromB+t,this.toB+t):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,t){return _(R(e.toString(),t.toString(),S),e,t,0,0)}static updateA(e,t,r,n){return P(I(e,n,!0,r.length),e,t,r)}static updateB(e,t,r,n){return P(I(e,n,!1,t.length),e,t,r)}}function T(e,t,r,n){let o=r.lineAt(e),i=n.lineAt(t);return o.to==e&&i.to==t&&e<r.length&&t<n.length?[e+1,t+1]:[o.from,i.from]}function G(e,t,r,n){let o=r.lineAt(e),i=n.lineAt(t);return o.from==e&&i.from==t?[e,t]:[o.to+1,i.to+1]}function _(e,t,r,n,o){let i=[];for(let s=0;s<e.length;s++){let a=e[s],[l,f]=T(a.fromA+n,a.fromB+o,t,r),[c,h]=G(a.toA+n,a.toB+o,t,r),d=[a.offset(-l+n,-f+o)];for(;s<e.length-1;){let i=e[s+1],[a,u]=T(i.fromA+n,i.fromB+o,t,r);if(a>c+1&&u>h+1)break;d.push(i.offset(-l+n,-f+o)),[c,h]=G(i.toA+n,i.toB+o,t,r),s++}i.push(new N(d,l,Math.max(l,c),f,Math.max(f,h)))}return i}const V=1e3;function j(e,t,r,n){let o=0,i=e.length;for(;;){if(o==i){let n=0,i=0;o&&({toA:n,toB:i}=e[o-1]);let s=t-(r?n:i);return[n+s,i+s]}let s=o+i>>1,a=e[s],[l,f]=r?[a.fromA,a.toA]:[a.fromB,a.toB];if(l>t)i=s;else{if(!(f<=t))return n?[a.fromA,a.fromB]:[a.toA,a.toB];o=s+1}}}function I(e,t,r,n){let o=[];return t.iterChangedRanges(((i,s,a,l)=>{let f=0,c=r?t.length:n,h=0,d=r?n:t.length;i>V&&([f,h]=j(e,i-V,r,!0)),s<t.length-V&&([c,d]=j(e,s+V,r,!1));let u,m=l-a-(s-i),[g,p]=r?[m,0]:[0,m];o.length&&(u=o[o.length-1]).toA>=f?o[o.length-1]={fromA:u.fromA,fromB:u.fromB,toA:c,toB:d,diffA:u.diffA+g,diffB:u.diffB+p}:o.push({fromA:f,toA:c,fromB:h,toB:d,diffA:g,diffB:p})})),o}function P(e,t,r,n){if(!e.length)return t;let o=0,i=0,s=0,a=[];for(let l of e){let e=l.fromA+i,f=l.toA+i+l.diffA,c=l.fromB+s,h=l.toB+s+l.diffB;for(;o<t.length;){let r=t[o];if(r.toA+i<=e&&r.toB+s<=c)a.push(r.offset(i,s));else if(r.fromA+i>f)break;o++}for(let t of _(R(r.sliceString(e,f),n.sliceString(c,h),S),r,n,e,c))a.push(t);i+=l.diffA,s+=l.diffB}for(;o<t.length;)a.push(t[o++].offset(i,s));return a}const Q=o.Py.define(),q=o.QQ.define({create:e=>null,update(e,t){for(let r of t.effects)r.is(Q)&&(e=r.value);return e}}),H=o.r$.define({combine:e=>e[0]}),U=n.lg.fromClass(class{constructor(e){({deco:this.deco,gutter:this.gutter}=K(e))}update(e){var t,r;(e.docChanged||e.viewportChanged||(t=e.startState,r=e.state,t.field(q,!1)!=r.field(q,!1))||function(e,t){return e.facet(H)!=t.facet(H)}(e.startState,e.state))&&({deco:this.deco,gutter:this.gutter}=K(e.view))}},{decorations:e=>e.deco}),F=o.Wl.low((0,n.v5)({class:"cm-changeGutter",markers:e=>{var t;return(null===(t=e.plugin(U))||void 0===t?void 0:t.gutter)||o.Xs.empty}}));const z=n.p.line({class:"cm-changedLine"}),X=n.p.mark({class:"cm-changedText"}),Y=n.p.mark({tagName:"ins"}),W=n.p.mark({tagName:"del"}),$=new class extends n.SJ{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function J(e,t,r,n,o,i){let s=r?e.fromA:e.fromB,a=r?e.toA:e.toB,l=0;if(s!=a){o.add(s,s,z),o.add(s,a,r?W:Y),i&&i.add(s,s,$);for(let f=t.iterRange(s,a-1),c=s;!f.next().done;){if(f.lineBreak){c++,o.add(c,c,z),i&&i.add(c,c,$);continue}let t=c+f.value.length;if(n)for(;l<e.changes.length;){let n=e.changes[l],i=s+(r?n.fromA:n.fromB),a=s+(r?n.toA:n.toB),f=Math.max(c,i),h=Math.min(t,a);if(f<h&&o.add(f,h,X),!(a<t))break;l++}c=t}}}function K(e){let t=e.state.field(q),{side:r,highlightChanges:n,markGutter:i}=e.state.facet(H),s="a"==r,a=new o.f_,l=i?new o.f_:null,{from:f,to:c}=e.viewport;for(let o of t){if((s?o.fromA:o.fromB)>=c)break;(s?o.toA:o.toB)>f&&J(o,e.state.doc,s,n,a,l)}return{deco:a.finish(),gutter:l&&l.finish()}}class Z extends n.l9{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const ee=o.Py.define({map:(e,t)=>e.map(t)}),te=o.QQ.define({create:()=>n.p.none,update:(e,t)=>{for(let r of t.effects)if(r.is(ee))return r.value;return e.map(t.changes)},provide:e=>n.tk.decorations.from(e)}),re=1e-4;const ne=o.Py.define({map:(e,t)=>t.mapPos(e)});class oe extends n.l9{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent="\u299a "+e.state.phrase("$ unchanged lines",this.lines)+" \u299a",t.addEventListener("click",(t=>{let r=e.posAtDOM(t.target);e.dispatch({effects:ne.of(r)});let{side:n,sibling:o}=e.state.facet(H);o&&o().dispatch({effects:ne.of(ie(r,e.state.field(q),"a"==n))})})),t}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}}function ie(e,t,r){let n=0,o=0;for(let i=0;;i++){let s=i<t.length?t[i]:null;if(!s||(r?s.fromA:s.fromB)>=e)return o+(e-n);[n,o]=r?[s.toA,s.toB]:[s.toB,s.toA]}}const se=o.QQ.define({create:e=>n.p.none,update(e,t){e=e.map(t.changes);for(let r of t.effects)r.is(ne)&&(e=e.update({filter:e=>e!=r.value}));return e},provide:e=>n.tk.decorations.from(e)});function ae({margin:e=3,minSize:t=4}){return se.init((r=>function(e,t,r){let i=new o.f_,s="a"==e.facet(H).side,a=e.field(q),l=1;for(let o=0;;o++){let f=o<a.length?a[o]:null,c=o?l+t:1,h=f?e.doc.lineAt(s?f.fromA:f.fromB).number-1-t:e.doc.lines,d=h-c+1;if(d>=r&&i.add(e.doc.line(c).from,e.doc.line(h).to,n.p.replace({widget:new oe(d),block:!0})),!f)break;l=e.doc.lineAt(Math.min(e.doc.length,s?f.toA:f.toB)).number}return i.finish()}(r,e,t)))}const le=n.tk.styleModule.of(new i.V({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),fe=n.tk.baseTheme({"& .cm-scroller, &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},"del, ins":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),ce=new o.F6,he=new o.F6;class de{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1;let t=[o.Wl.low(U),fe,le,te,n.tk.updateListener.of((e=>{this.measuring<0&&(e.heightChanged||e.viewportChanged)&&!e.transactions.some((e=>e.effects.some((e=>e.is(ee)))))&&this.measure()}))],r=[H.of({side:"a",sibling:()=>this.b,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&r.push(F);let i=o.yy.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],n.tk.editorAttributes.of({class:"cm-merge-a"}),he.of(r),t]}),s=[H.of({side:"b",sibling:()=>this.a,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&s.push(F);let a=o.yy.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],n.tk.editorAttributes.of({class:"cm-merge-b"}),he.of(s),t]});this.chunks=N.build(i.doc,a.doc);let l=[q.init((()=>this.chunks)),ce.of(e.collapseUnchanged?ae(e.collapseUnchanged):[])];i=i.update({effects:o.Py.appendConfig.of(l)}).state,a=a.update({effects:o.Py.appendConfig.of(l)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let f=e.orientation||"a-b",c=document.createElement("div");c.className="cm-mergeViewEditor";let h=document.createElement("div");h.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==f?c:h),this.editorDOM.appendChild("a-b"==f?h:c),this.a=new n.tk({state:i,parent:c,root:e.root,dispatch:e=>this.dispatch(e,this.a)}),this.b=new n.tk({state:a,parent:h,root:e.root,dispatch:e=>this.dispatch(e,this.b)}),this.setupRevertControls(!!e.revertControls,"b-to-a"==e.revertControls,e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,t){if(e.docChanged){this.chunks=t==this.a?N.updateA(this.chunks,e.newDoc,this.b.state.doc,e.changes):N.updateB(this.chunks,this.a.state.doc,e.newDoc,e.changes),t.update([e,e.state.update({effects:Q.of(this.chunks)})]);let r=t==this.a?this.b:this.a;r.update([r.state.update({effects:Q.of(this.chunks)})]),this.scheduleMeasure()}else t.update([e])}reconfigure(e){if("orientation"in e){let t="b-a"!=e.orientation;if(t!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let e=this.a.dom.parentNode,r=this.b.dom.parentNode;e.remove(),r.remove(),this.editorDOM.insertBefore(t?e:r,this.editorDOM.firstChild),this.editorDOM.appendChild(t?r:e),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let t=!!this.revertDOM,r=this.revertToA,n=this.renderRevert;"revertControls"in e&&(t=!!e.revertControls,r="b-to-a"==e.revertControls),"renderRevertControl"in e&&(n=e.renderRevertControl),this.setupRevertControls(t,r,n)}let t="highlightChanges"in e,r="gutter"in e,n="collapseUnchanged"in e;if(t||r||n){let o=[],i=[];if(t||r){let n=this.a.state.facet(H),s=r?!1!==e.gutter:n.markGutter,a=t?!1!==e.highlightChanges:n.highlightChanges;o.push(he.reconfigure([H.of({side:"a",sibling:()=>this.b,highlightChanges:a,markGutter:s}),s?F:[]])),i.push(he.reconfigure([H.of({side:"b",sibling:()=>this.a,highlightChanges:a,markGutter:s}),s?F:[]]))}if(n){let t=ce.reconfigure(e.collapseUnchanged?ae(e.collapseUnchanged):[]);o.push(t),i.push(t)}this.a.dispatch({effects:o}),this.b.dispatch({effects:i})}this.scheduleMeasure()}setupRevertControls(e,t,r){this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=r,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",(e=>this.revertClicked(e))),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame((()=>{this.measuring=-1,this.measure()}))}}measure(){!function(e,t,r){let i=new o.f_,s=new o.f_,a=e.viewportLineBlocks,l=t.viewportLineBlocks,f=0,c=0,h=e.state.field(te).iter(),d=t.state.field(te).iter(),u=0,m=0,g=0,p=0;e:for(let o=0;;o++){let A=o<r.length?r[o]:null,[v,b]=A?[A.fromA,A.fromB]:[e.state.doc.length,t.state.doc.length];if(u<v&&m<b)for(;;){if(f==a.length||c==l.length)break e;let e=a[f],t=l[c];for(;h.value&&h.from<e.from;)g-=h.value.spec.widget.height,h.next();for(;d.value&&d.from<t.from;)p-=d.value.spec.widget.height,d.next();if(e.from>=v||t.from>=b)break;let r=e.from-u,o=t.from-m;if(r<0||r<o)f++;else if(o<0||o<r)c++;else{let r=e.top+g-(t.top+p);r<-1e-4?(g-=r,i.add(e.from,e.from,n.p.widget({widget:new Z(-r),block:!0,side:-1}))):r>re&&(p+=r,s.add(t.from,t.from,n.p.widget({widget:new Z(r),block:!0,side:-1}))),f++,c++}}if(!A)break;u=A.toA,m=A.toB}for(;h.value;)g-=h.value.spec.widget.height,h.next();for(;d.value;)p-=d.value.spec.widget.height,d.next();let A=e.contentHeight+g-(t.contentHeight+p);A<re?i.add(e.state.doc.length,e.state.doc.length,n.p.widget({widget:new Z(-A),block:!0,side:1})):A>re&&s.add(t.state.doc.length,t.state.doc.length,n.p.widget({widget:new Z(A),block:!0,side:1}));let v=i.finish(),b=s.finish();o.Xs.eq([v],[e.state.field(te)])||e.dispatch({effects:ee.of(v)}),o.Xs.eq([b],[t.state.field(te)])||t.dispatch({effects:ee.of(b)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,t=e.firstChild,r=this.a.viewport,n=this.b.viewport;for(let o=0;o<this.chunks.length;o++){let i=this.chunks[o];if(i.fromA>r.to||i.fromB>n.to)break;if(i.fromA<r.from||i.fromB<n.from)continue;let s=this.a.lineBlockAt(i.fromA).top+"px";for(;t&&+t.dataset.chunk<o;)t=ue(t);t&&t.dataset.chunk==String(o)?(t.style.top!=s&&(t.style.top=s),t=t.nextSibling):e.insertBefore(this.renderRevertButton(s,o),t)}for(;t;)t=ue(t)}renderRevertButton(e,t){let r;if(this.renderRevert)r=this.renderRevert();else{r=document.createElement("button");let e=this.a.state.phrase("Revert this chunk");r.setAttribute("aria-label",e),r.setAttribute("title",e),r.textContent=this.revertToLeft?"\u21dc":"\u21dd"}return r.style.top=e,r.setAttribute("data-chunk",String(t)),r}revertClicked(e){let t,r=e.target;for(;r&&r.parentNode!=this.revertDOM;)r=r.parentNode;if(r&&(t=this.chunks[r.dataset.chunk])){let[r,n,o,i,s,a]=this.revertToA?[this.b,this.a,t.fromB,t.toB,t.fromA,t.toA]:[this.a,this.b,t.fromA,t.toA,t.fromB,t.toB],l=r.state.sliceDoc(o,Math.max(o,i-1));o!=i&&a<=n.state.doc.length&&(l+=r.state.lineBreak),n.dispatch({changes:{from:s,to:Math.min(n.state.doc.length,a),insert:l},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function ue(e){let t=e.nextSibling;return e.remove(),t}n.l9}}]);
//# sourceMappingURL=6281-f7146d1700c698c0.js.map