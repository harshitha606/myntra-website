!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4f325b88-4142-4005-a1ab-219d6c2b0316",e._sentryDebugIdIdentifier="sentry-dbid-4f325b88-4142-4005-a1ab-219d6c2b0316")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"15e16f7d"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9749,5382],{18967:function(e,n,t){t.d(n,{Q:function(){return i},h:function(){return o}});var r=t(87708),i=r.Py.define(),o=r.Py.define()},45323:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(74985),i=(t(50959),t(89131)),o=t(21769),u=t(6191),a=t(74768),l=t(48960),c=Array.prototype.concat,s=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},f=function(e){return"file"===e.kind},d=function(e){return"function"===typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null},h=function(e){return c.apply([],e)},p=function(e,n,t,r){var i;return i=e.isDirectory?n.recursive?v(e,n,t+1,(0,l.join)(r,e.name)):Promise.resolve([]):function(e){return new Promise((function(n,t){e.file?e.file(n,t):n(null)})).catch((function(){return null}))}(e).then((function(e){return e&&(e.dirPath=(0,l.join)(r,e.name)),e?[e]:[]})),i},v=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.name;return e&&t<n.bail&&e.isDirectory&&e.createReader?new Promise((function(i){e.createReader().readEntries((function(e){return Promise.all(e.map((function(e){return p(e,n,t,r)}))).then((function(e){return i(h(e))}))}),(function(){return i([])}))})):Promise.resolve([])},g=v,m=function(e,n){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(d(e),s(n))}(e,n).then((function(n){if(!n.length){var t=e.getAsFile();n=t?[t]:n}return n}))};var y={dragDropManager:(0,i.i)((function(e){var n=(0,o.PD)(e),t=n.handleTopDropCapture;return n.handleTopDropCapture=function(e){var r,i=n.monitor.getItemType();i===u.HTML||i===u.TEXT?(n.dropTargetIds=[],null===(r=n.currentNativeSource)||void 0===r||r.loadDataTransfer(e.dataTransfer),n.enterLeaveCounter.reset()):t.call(n,e);n.currentNativeSource&&(n.currentNativeSource.item.dirContent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=s(n),new Promise((function(t){var r,i;(null===e||void 0===e||null===(r=e.dataTransfer)||void 0===r?void 0:r.items)?Promise.all(h(e.dataTransfer.items).filter((function(e){return f(e)})).map((function(e){return m(e,n)}))).then((function(e){return t(h(e))})):(null===e||void 0===e||null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?t(h(e.dataTransfer.files)):t([])}))}(e,{recursive:!0}))},n}))};function w(e){return(0,r.tZ)(a.L.Provider,{value:y,children:e.children})}},6190:function(e,n,t){t.d(n,{x:function(){return s}});var r=t(74985),i=t(43312),o=t(88965),u=t(26473);function a(e,n){var t=0,r=[];return n.forEach((function(n){var i=n.from,o=n.to,u=e.slice(t,i);u&&r.push({text:u,match:!1});var a=e.slice(i,o);a&&r.push({text:a,match:!0}),t=o})),t<e.length&&r.push({text:e.slice(t),match:!1}),r}var l=(0,i.iv)([o.l0.flex.shrink(1),o.l0.truncate]),c={normal:{matched:o.TV.foregroundDefault,unmatched:o.TV.foregroundDimmer},dimmed:{matched:o.TV.foregroundDimmer,unmatched:o.TV.foregroundDimmest}};function s(e){var n,t=null===(n=e.highlight)||void 0===n?void 0:n.filter((function(e){return e.to>0})),i=e.dimmed?c.dimmed:c.normal;return(null===t||void 0===t?void 0:t.length)?(0,r.tZ)(u.G,{className:e.className,css:l,children:a(e.text,t).map((function(e,n){return(0,r.tZ)("span",{style:{fontWeight:e.match?o.TV.fontWeightBold:o.TV.fontWeightRegular,color:e.match?i.matched:i.unmatched},children:e.text},e.text+n)}))}):(0,r.tZ)(u.G,{className:e.className,style:{color:i.matched},css:l,children:e.text})}},36433:function(e,n,t){var r=t(74985),i=(t(50959),t(53625)),o=t(21651),u=t(98304);n.Z=function(e){var n=e.isOpen,t=e.setOpen,a=e.feature;return(0,r.tZ)(r.HY,{children:(0,r.tZ)(i.b5,{children:(0,r.tZ)(o.u,{isOpen:n,onRequestClose:function(){t(!1)},children:(0,r.tZ)(u.Z,{setFeedbackFormOpen:t,feature:a})})})})}},27352:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(2272),i=t(74985),o=t(50959),u=t(95141),a=t(20685),l=t(26473),c=t(53312),s=t(88965);function f(e){var n=e.prompt,t=e.desc,f=e.type,d=e.placeholder,h=e.confirmText,p=e.loading,v=e.errorMessage,g=e.onCancel,m=e.onConfirm,y=e.isDanger,w=e.buttonIcon,b=(0,r.Z)(o.useState(),2),Z=b[0],x=b[1];return(0,i.BX)(l.G,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(c.h4,{variant:"headerDefault",level:2,children:n}),(0,i.tZ)(c.xv,{children:t}),(0,i.tZ)(a.II,{type:f,value:Z,placeholder:d,autoFocus:!0,onChange:function(e){return x(e.target.value)}}),v?(0,i.tZ)(c.xv,{css:[s.l0.color.accentNegativeStronger],multiline:!1,children:v}):null,(0,i.BX)(l.G,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,i.tZ)(u.zx,{disabled:p,onClick:g,text:"Cancel"}),(0,i.tZ)(u.zx,{colorway:y?"negative":"primary",disabled:p,onClick:function(){return Z&&m(Z)},text:h||"Ok",iconLeft:w,dataCy:"prompt-confirm-button"})]})]})}},7653:function(e,n,t){t.d(n,{$X:function(){return h},Dm:function(){return f},S2:function(){return p},Uu:function(){return c},c1:function(){return d},wM:function(){return s}});var r=t(74985),i=t(71999),o=t(28999),u=t(90234),a=t(50959),l=(0,a.createContext)(void 0);function c(){var e=(0,a.useContext)(l);if(!e)throw new Error("Expected store in ghostwriter chat context");return e}function s(e){return(0,i.KO)(e,{store:c()})}function f(e){return(0,o.lV)((0,a.useCallback)((function(n){return n(e)}),[e]),{store:c()})}function d(e){return(0,i.Dv)(e,{store:c()})}function h(e){return(0,i.b9)(e,{store:c()})}function p(e){var n=e.children,t=(0,a.useRef)();return t.current||(t.current=(0,u.MT)()),(0,r.tZ)(l.Provider,{value:t.current,children:n})}},69296:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(50959),i=t(98314);function o(e){(0,r.useEffect)((function(){e((0,i.r)(),{captureDraggingState:!0})}),[e])}},28132:function(e,n,t){t.d(n,{b:function(){return i},c:function(){return o}});var r=t(85919);function i(e,n){return(0,r.Z)((function(){return o(n,e)}),[n,e])}function o(e,n){return{get current(){return e.get(n)},subscribe:function(t){return e.sub(n,(function(){return t(e.get(n))}))}}}},73175:function(e,n,t){t.d(n,{T:function(){return u},Z:function(){return o}});var r=t(50959),i=t(70189);function o(){var e=r.useContext(i.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.language}function u(){return o().startsWith("html")}},72091:function(e,n,t){t.d(n,{UV:function(){return u},fN:function(){return o}});var r=t(9970),i=1e4;function o(e,n){for(var t=0;t<n.length;t+=i){var o;(o=e).push.apply(o,(0,r.Z)(n.slice(t,t+i)))}}function u(e){return(0,r.Z)(new Array(e))}},84726:function(e,n,t){t.d(n,{V:function(){return v},Q:function(){return Z}});var r=t(81962),i=t(72006),o=t(10142),u=t(66091),a=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,c=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),s=function(){"use strict";function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,u.Z)(this,e);var t="function"===typeof n?n:d(n);this.p=f(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}return e.prototype.noise2D=function(e,n){var t,r,i=this.permMod12,o=this.perm,u=0,s=0,f=0,d=(e+n)*a,h=Math.floor(e+d),p=Math.floor(n+d),v=(h+p)*l,g=e-(h-v),m=n-(p-v);g>m?(t=1,r=0):(t=0,r=1);var y=g-t+l,w=m-r+l,b=g-1+2*l,Z=m-1+2*l,x=255&h,E=255&p,S=.5-g*g-m*m;if(S>=0){var k=3*i[x+o[E]];u=(S*=S)*S*(c[k]*g+c[k+1]*m)}var C=.5-y*y-w*w;if(C>=0){var T=3*i[x+t+o[E+r]];s=(C*=C)*C*(c[T]*y+c[T+1]*w)}var R=.5-b*b-Z*Z;if(R>=0){var D=3*i[x+1+o[E+1]];f=(R*=R)*R*(c[D]*b+c[D+1]*Z)}return 70*(u+s+f)},e}();function f(e){for(var n=new Uint8Array(256),t=0;t<256;t++)n[t]=t;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=n[r];n[r]=n[i],n[i]=o}return n}function d(e){var n=0,t=0,r=0,i=1,o=function(){var e=4022871197;return function(n){n=n.toString();for(var t=0;t<n.length;t++){var r=.02519603282416938*(e+=n.charCodeAt(t));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();return n=o(" "),t=o(" "),r=o(" "),(n-=o(e))<0&&(n+=1),(t-=o(e))<0&&(t+=1),(r-=o(e))<0&&(r+=1),function(){var e=2091639*n+2.3283064365386963e-10*i;return n=t,t=r,r=e-(i=0|e)}}var h=new s;var p=t(49500);function v(e){var n=!1,t=0,r=0,i=null,o=function(a){if(n){var l=a-t;r+=l,t=a,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:l,stop:u})}},u=function(){n&&(n=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){n||(r=0,t=performance.now(),n=!0,i=window.requestAnimationFrame(o))},stop:u}}var g=function(){return(0,o.hd)(600,1200)},m=function(){return(0,o.hd)(1,3)},y=function(){return{width:(0,o.hd)(5,20),height:(0,o.hd)(5,20)}},w=function(){return(0,o.vF)()};function b(e){return Array.isArray(e)?(0,o.DQ)(e):(0,r.Z)(e,Function)?e():e}function Z(){var e=!1,n=null,t=null,r=[],u=null,a={},l=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=function(){var e=i.value;if(a[e])return"continue";var n=new Image;n.src=e,n.onerror=function(){p.error('Failed to load particle image "'.concat(e,'"'))},a[e]=n},u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)o()}catch(l){t=!0,r=l}finally{try{n||null==u.return||u.return()}finally{if(t)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var n=e.x,t=e.y,c=e.numParticles,s=void 0===c?150:c,f=e.spread,d=void 0===f?60:f,h=e.heading,p=void 0===h?90:h,v=e.airDrag,Z=void 0===v?.9:v,x=e.color,E=void 0===x?w:x,S=e.gravity,k=void 0===S?800:S,C=e.velocity,T=void 0===C?g:C,R=e.size,D=void 0===R?y:R,I=e.lifetime,A=void 0===I?m:I,P=e.flip,N=void 0===P||P,O=e.image,q=void 0===O?void 0:O,L=b(d),B=b(p),U=(0,o.Id)(L),G=(0,o.Id)(-B),F=b(s),M=0;M<F;M++){var _=G+(0,o.hd)(-U/2,U/2),z=b(T),W=b(D),H=W.width,j=W.height,X=b(A),K=b(E),V=b(Z),$=b(n),Y=b(t),Q=b(q);"string"===typeof Q&&(a[Q]||l([Q]),Q=a[Q]),r.push((0,i.Z)({seed:(0,o.hd)(0,1e5),x:$,y:Y,gravity:k,airDrag:V,scaleX:1,scaleY:1,rotation:(0,o.hd)(0,(0,o.Id)(360)),velocityX:Math.cos(_)*z,velocityY:Math.sin(_)*z,angularVelocity:(0,o.hd)((0,o.Id)(-400),(0,o.Id)(400)),color:K,alpha:1,width:H,height:j,flip:N,lifetime:X,lifetimeRemaining:X},Q?{image:Q,type:"image"}:{type:(0,o.DQ)(["rectangle","ellipse"])}))}null===u||void 0===u||u.start()},clearParticles:function(){r=[]},uninstall:function(){var r;e&&(n&&(null===(r=document.body)||void 0===r?void 0:r.contains(n))&&document.body.removeChild(n),u&&u.stop(),n=null,t=null,e=!1,a={})},install:function(){e||document&&document.body&&(n=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex="999999",e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.id="replit-particles-simulation",e.setAttribute("role","image"),e.ariaHidden="true",e}(),(t=n.getContext("2d"))&&(document.body.appendChild(n),u=v((function(e){var i=e.deltaTime,u=e.stop;if(n&&t){var a=t,l=window.scrollX,c=window.scrollY;n.width!==document.documentElement.clientWidth&&(n.width=document.documentElement.clientWidth),n.height!==document.documentElement.clientHeight&&(n.height=document.documentElement.clientHeight),t.clearRect(0,0,n.width,n.height),r.map((function(e){return function(e){var n=e.particle,t=e.deltaTime;n.velocityY+=n.gravity*t/1e3,n.x+=n.velocityX*t/1e3,n.y+=n.velocityY*t/1e3,n.rotation+=n.angularVelocity*t/1e3,n.velocityX*=n.airDrag,n.velocityY*=n.airDrag,n.flip&&(n.scaleY=2*(0,o.WE)(n.lifetimeRemaining,.5));var r=(0,o.NC)(n.velocityX,n.velocityY),i=(0,o.$G)(n.velocityX,n.velocityY),u=r+.05*h.noise2D(n.seed,n.lifetimeRemaining);n.velocityX=Math.cos(u)*i,n.velocityY=Math.sin(u)*i,n.lifetimeRemaining-=t/1e3,n.lifetimeRemaining<=0?n.alpha=0:n.alpha=1-(n.lifetime-n.lifetimeRemaining)/n.lifetime}({particle:e,deltaTime:i})})),r.map((function(e){return function(e){var n=e.particle,t=e.ctx,r=e.scrollX,i=e.scrollY,o=n.width*n.scaleX,u=n.height*n.scaleY,a=n.x-r,l=n.y-i;t.save(),t.translate(a,l),t.rotate(n.rotation),t.globalAlpha=n.alpha,"image"===n.type?t.drawImage(n.image,-o/2,-u/2,o,u):"rectangle"===n.type?(t.fillStyle=n.color,t.fillRect(-o/2,-u/2,o,u)):"ellipse"===n.type&&(t.fillStyle=n.color,t.beginPath(),t.ellipse(0,0,o/2,u/2,0,0,2*Math.PI),t.fill()),t.restore()}({particle:e,ctx:a,scrollX:l,scrollY:c})})),0===(r=r.filter((function(e){return e.lifetimeRemaining>0}))).length&&u()}})),e=!0))},preloadImages:l,unloadImages:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;delete a[u]}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}},35382:function(e,n,t){t.d(n,{$0:function(){return r.$},hd:function(){return i.hd},su:function(){return r.s}});var r=t(43709),i=t(10142)},43709:function(e,n,t){t.d(n,{$:function(){return f},s:function(){return r}});var r,i=t(72006),o=t(77637),u=t(50959),a=t(10142),l=t(84726),c=t(90843),s=(0,l.Q)();function f(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,n=(0,c.T)();u.useEffect((function(){return s.install(),function(){s.uninstall()}}),[]),u.useEffect((function(){e&&s.preloadImages(e)}),[e]);var t=function(e){n||s.addParticles(e)},r=function(e){var r=e.element,u=(0,o.Z)(e,["element"]);if(!n){var l=(0,a.tj)(r),c=l.x,s=l.y;t((0,i.Z)({x:c,y:s},u))}},l=function(e){n||s.addParticles((0,i.Z)({numParticles:125,spread:360,velocity:function(){return(0,a.hd)(400,900)},size:function(){return{width:(0,a.hd)(5,15),height:(0,a.hd)(5,25)}}},e))},f=function(e){var t=e.element,r=(0,o.Z)(e,["element"]);if(!n){var u=(0,a.tj)(t),c=u.x,s=u.y;l((0,i.Z)({x:c,y:s},r))}},d=function(e){var t=e.direction,r=(0,o.Z)(e,["direction"]);n||s.addParticles((0,i.Z)({heading:t},r))},h=function(e){var t=e.element,r=e.direction,u=(0,o.Z)(e,["element","direction"]);if(!n){var l=(0,a.tj)(t),c=l.x,f=l.y;s.addParticles((0,i.Z)({x:c,y:f,numParticles:100,velocity:function(){return(0,a.hd)(400,1500)},spread:60,size:function(){return{width:(0,a.hd)(5,15),height:(0,a.hd)(5,25)}},heading:r},u))}};return{fireBurst:t,fireBurstFrom:r,fireCircularBurst:l,fireCircularBurstFrom:f,fireDirectionalBurst:d,fireDirectionalBurstFrom:h}}!function(e){e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South"}(r||(r={}))},10142:function(e,n,t){t.d(n,{$G:function(){return d},DQ:function(){return a},Id:function(){return s},NC:function(){return f},WE:function(){return p},hd:function(){return l},tj:function(){return o},vF:function(){return c}});var r=t(92039),i=t.n(r);function o(e){var n=function(e){var n=e.getBoundingClientRect();return{x:n.left+n.width/2,y:n.top+n.height/2}}(e);return{x:n.x+window.scrollX,y:n.y+window.scrollY}}function u(e,n){return i()(e,n,!1)}function a(e){return e[u(0,e.length-1)]}function l(e,n){return i()(e,n,!0)}function c(){return"hsl(".concat(u(0,360),", 100%, 70%)")}function s(e){return e*Math.PI/180}function f(e,n){return Math.atan2(n,e)}function d(e,n){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function h(e,n){return(e%n+n)%n}function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n-Math.abs(h(e,2*n)-n)}},30312:function(e,n,t){t.d(n,{Fp:function(){return r},Fv:function(){return u},HH:function(){return o},hI:function(){return i}});var r="gpt-3.5-turbo-0613",i=["package.json","package-lock.json","yarn.lock","poetry.lock","package.json","package-lock.json",".replit","replit.nix","pyproject.toml",".breakpoints"],o=[".md",".yml",".yaml",".json",".toml",".out",".pkl",".bin",".txt",".csv",".log"],u=["node_modules",".config","venv",".next",".git"]},63824:function(e,n){n.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true"}},59254:function(e,n,t){function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.root,i=t.rootMargin,o=t.threshold,u=void 0===o?1:o;if("undefined"===typeof IntersectionObserver)return function(){};var a=new WeakMap,l=function(e){e.forEach((function(e){var t=a.get(e.target);if(e.isIntersecting!==Boolean(t))if(e.isIntersecting){var r=n(e);"function"===typeof r?a.set(e.target,r):c.unobserve(e.target)}else t&&(t(e),a.delete(e.target))}))},c=new IntersectionObserver(l,{root:r,rootMargin:i,threshold:u});return c.observe(e),function(){return c.disconnect()}}t.d(n,{j:function(){return r}})},3715:function(e,n,t){t.d(n,{j:function(){return u}});var r=t(50959),i=t(46266),o=t(51467);function u(e,n,t){var u=(0,o.Z)(t);(0,r.useLayoutEffect)((function(){var t=function(n){var t=u.current?u.current(n):n;null!==t&&(0,i.A)(e,t)};return t(n.current),(0,i.p)(e),n.subscribe(t)}),[e,n,u])}},46266:function(e,n,t){t.d(n,{A:function(){return a},p:function(){return l}});var r=t(66091),i=t(2272),o=new(function(){"use strict";function e(){(0,r.Z)(this,e),this.map=new Map}var n=e.prototype;return n.getOrInit=function(e){var n=this.map.get(e);return n||(n=new Map,this.map.set(e,n)),n},n.add=function(e,n,t){this.getOrInit(e).set(n,t)},n.flush=function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var u=(0,i.Z)(r.value,2),a=u[0],l=u[1];if(a&&"current"in a&&(a=a.current),a){var c=!0,s=!1,f=void 0;try{for(var d,h=l[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=(0,i.Z)(d.value,2),v=p[0],g=p[1];a.style.setProperty(v,g)}}catch(m){s=!0,f=m}finally{try{c||null==h.return||h.return()}finally{if(s)throw f}}}}}catch(m){n=!0,t=m}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}this.map.clear()},n.flushNode=function(e){if(e){var n=e,t=this.map.get(n);if(t&&(e&&"current"in e&&(e=e.current),e)){var r=!0,o=!1,u=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,i.Z)(a.value,2),s=c[0],f=c[1];e.style.setProperty(s,f)}}catch(d){o=!0,u=d}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}this.map.delete(n)}}},e}()),u=!1;function a(e,n,t){if(null!==e){if("string"===typeof n){if(void 0===t)throw new Error("value is undefined when prop is string");o.add(e,n,t)}else for(var r in n)o.add(e,r,n[r]);u||(u=!0,requestAnimationFrame((function(){o.flush(),u=!1})))}}function l(e){o.flushNode(e)}},53691:function(e,n,t){var r;t.d(n,{y:function(){return r}}),function(e){e.Welcome="Welcome",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share"}(r||(r={}))},12562:function(e,n,t){t.d(n,{D:function(){return r},V:function(){return o}});var r,i=t(87978);function o(e){return(0,i.gK)(e)?r.Markdown:(0,i.sL)(e)?r.Draw:(0,i.IQ)(e)?r.Pedit:(0,i.T3)(e)?r.Media:r.Code}!function(e){e.Media="Media",e.Code="Code",e.Markdown="Markdown",e.Draw="Draw",e.Pedit="Pedit"}(r||(r={}))},33722:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(57389),i=t(72006),o=t(4405),u=t(74985),a=t(67217),l=t(26473),c=t(88965),s=t(61623),f=t(61025),d=(0,t(86093).$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),h=d.styleTokens,p=d.cssVars,v=(0,f.X)({avatarsRow:[c.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(h.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[c.l0.center,c.l0.overflow("hidden"),c.l0.backgroundColor.backgroundDefault,c.l0.color.foregroundDimmer,c.l0.px(2),{borderRadius:"50%",minWidth:h.size,height:h.size,fontSize:h.fontSize}],tooltop:[{gap:h.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[c.l0.rowWithGap(c.TV.space2),c.l0.align.center],tooltipText:[c.l0.flex.growAndShrink(1),c.l0.truncate,c.l0.color.foregroundDimmer,{paddingLeft:h.iconTextGap,fontSize:h.tooltipFontSize}],stackItem:[]}),g={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function m(e){var n,t,c,f,d,h,m,y,w,b=e.activeUsers,Z=e.visibleNumOfUsers,x=void 0===Z?3:Z,E=e.size,S=void 0===E?24:E,k=b.length,C=(w={},(0,r.Z)(w,p.size,S+"px"),(0,r.Z)(w,p.fontSize,(null!==(d=null===(n=g[S])||void 0===n?void 0:n.fontSize)&&void 0!==d?d:S)+"px"),(0,r.Z)(w,p.listGap,(null!==(h=null===(t=g[S])||void 0===t?void 0:t.listGap)&&void 0!==h?h:8)+"px"),(0,r.Z)(w,p.iconTextGap,(null!==(m=null===(c=g[S])||void 0===c?void 0:c.iconTextGap)&&void 0!==m?m:8)+"px"),(0,r.Z)(w,p.tooltipFontSize,(null!==(y=null===(f=g[S])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==y?y:14)+"px"),w),T=k>x,R=b.slice(0,T?x-1:x);return(0,u.tZ)(s.u,{tooltip:(0,u.tZ)(l.G,{css:v.tooltop,style:C,children:b.map((function(e){var n;return(0,u.BX)(l.G,{css:v.tooltipRow,children:[(0,u.tZ)(a.q,{size:(null===(n=g[S])||void 0===n?void 0:n.tooltipAvatarSize)||S,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,u.tZ)(l.G,{css:v.tooltipText,children:e.username})]},e.username)}))}),children:function(e,n){return(0,u.BX)(l.G,(0,o.Z)((0,i.Z)({},e),{tag:"ul",innerRef:n,css:v.avatarsRow,style:C,children:[R.map((function(e,n){return(0,u.tZ)(l.G,{tag:"li",style:{zIndex:n+1},css:v.stackItem,children:(0,u.tZ)(a.q,{size:S,src:e.image||null,ringColor:e.color,username:e.username})},e.id)})),T?(0,u.tZ)(l.G,{tag:"li",css:v.stackItem,style:{zIndex:R.length},children:(0,u.tZ)(l.G,{css:v.countCirlce,children:(0,u.BX)(l.G,{children:["+",k-x+1]})})}):null]}))}})}},48749:function(e,n,t){var r=(0,t(50959).createContext)(null);n.Z=r},68408:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(2272),i=t(50959),o={isConnecting:!0,channel:null,context:null};function u(e){var n=e.container,t=e.service,u=e.name,a=e.skip,l=void 0!==a&&a,c=(0,r.Z)(i.useState(o),2),s=c[0],f=c[1];return i.useEffect((function(){f(o);var e=!1,r=n.openChannel({service:t,name:u,skip:function(){return l}},(function(n){if(!e)return f({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||f({isConnecting:n.willReconnect,channel:null,context:null})}}));return function(){e=!0,r()}}),[n,t,u,l]),s}},66860:function(e,n,t){t.d(n,{P:function(){return w},n:function(){return y}});var r=t(2272),i=t(17403),o=t(52783),u=t(50959),a=t(88688),l=t(5319),c=t(48818),s=t(85919),f=t(34547),d=t(74906),h=t(63723),p=i.Type.Array(i.Type.String()),v=function(e){return"repl:hiddenFiles:"+e},g=function(e){var n=d.Z.get(v(e));return o.B4.Check(p,n)?n:null},m=function(e,n){d.Z.set(v(e),n)},y=function(e){var n=(0,h.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),t=(0,f.Z)(),i=(0,c.Z)(),o=(0,r.Z)(u.useState((function(){return n?g(t):null})),2),l=o[0],s=o[1];return u.useEffect((function(){return e.watch((function(e){var r=function(e){n&&m(t,e),s(e)};i.current&&(e.error?e.error===a.Yt.NotFound&&r([]):e.config.hidden?r(e.config.hidden):r([]))}))}),[e,t,i,n]),l},w=function(e){var n=y(e);return(0,s.Z)((function(){return null===n?null:n.map((function(e){return(0,l.Z)(e)||e}))}),[n])}},82417:function(e,n,t){t.d(n,{C:function(){return a},Gw:function(){return u},Tg:function(){return l},so:function(){return i},ss:function(){return c},tc:function(){return o}});var r=t(55749);function i(e,n){for(var t=[],r=e.split(n),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&t.push(o)}return t}function o(e){return e.replace(/^<|>$/g,"")}function u(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function a(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function l(e){if(-1===e.indexOf("/"))return[null,null];if(e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var n=(0,r.Z)(e.split("/"));return[n[2],n.slice(3).join("/")]}var t=(0,r.Z)(e.split("/"));return[t[0],t.slice(1).join("/")]}function c(e){return e.replace(/^refs\/remotes\//,"")}},87803:function(e,n,t){t.d(n,{Z:function(){return y},h:function(){return i}});var r,i,o=t(57135),u=t(2272),a=t(96583),l=t(82417),c="# branch.oid ",s="# branch.head ",f="# branch.upstream ",d="# branch.ab ",h="# stash ",p=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,v=/^([RC])([0-9]+) (.+?)\t(.+)$/,g=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,m=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function y(e){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)((function(e){var n,t,r,i,o,p,v,g,y,w,Z,x,E,S,k,C,T,R,D,I,A;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=null,t=null,r=null,i=0,o=[],[4,e("git status ".concat(["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"].join(" ")),{serviceMethod:"git-status"})];case 1:if((p=a.sent()).error)return[2,p];v=p.output.replaceAll(m,"$1\t$2"),g=(0,l.so)(v,"\0"),y=!0,w=!1,Z=void 0;try{for(x=g[Symbol.iterator]();!(y=(E=x.next()).done);y=!0)(S=E.value).startsWith("#")?S.startsWith(c)?"(initial)"!==(k=S.substring(c.length))&&(n=k):S.startsWith(s)?"(detached)"!==(C=S.substring(s.length))&&(t=C):S.startsWith(f)?"(not queried)"!==(T=S.substring(f.length))&&(r={branch:T,ahead:0,behind:0}):S.startsWith(d)?r&&(R=(0,u.Z)(S.substring(d.length).split(" ").map((function(e){return Math.abs(parseInt(e,10))})),2),D=R[0],I=R[1],r.ahead=D,r.behind=I):S.startsWith(h)&&(i=parseInt(S.substring(h.length),10)):null!==(A=b(S))&&o.push(A)}catch(P){w=!0,Z=P}finally{try{y||null==x.return||x.return()}finally{if(w)throw Z}}return[2,{commit:n,branch:t,upstream:r,stashes:i,changes:o,error:null}]}}))}))).apply(this,arguments)}function b(e){var n=e[0];switch(e=e.substring(2),n){case r.IGNORED:return null;case r.UNTRACKED:return{type:{index:i.UNTRACKED,worktree:i.UNTRACKED},path:e,staged:!1,unmerged:!1};case r.UNMERGED:var t=e.match(g);if(!t)return null;var o=(0,u.Z)(t,12),a=o[1],l=o[2],c=o[11],s=Z(a);return{type:{index:s,worktree:Z(l)},path:c,staged:s!==i.UNMODIFIED,unmerged:!0};case r.ORDINARY:case r.RENAMED_OR_COPIED:var f=e.match(p);if(!f)return null;var d=(0,u.Z)(f,10),h=d[1],m=d[2],y=d[9],w=Z(h),b=Z(m),E=w!==i.UNMODIFIED;if(n===r.ORDINARY)return{type:{index:w,worktree:b},path:y,staged:E,unmerged:!1};if(n===r.RENAMED_OR_COPIED){var S=y.match(v);if(!S)return null;var k=(0,u.Z)(S,5),C=k[1],T=k[2],R=k[3],D=k[4];return{type:{index:w,worktree:b},path:R,staged:E,unmerged:!1,source:{type:x(C),score:parseInt(T,10),path:D}}}return null;default:return null}}function Z(e){switch(e){case".":default:return i.UNMODIFIED;case"M":return i.MODIFIED;case"T":return i.TYPE_CHANGED;case"A":return i.ADDED;case"D":return i.DELETED;case"R":return i.RENAMED;case"C":return i.COPIED;case"U":return i.UNMERGED}}function x(e){switch(e){case"R":default:return i.RENAMED;case"C":return i.COPIED}}!function(e){e.ORDINARY="1",e.RENAMED_OR_COPIED="2",e.UNMERGED="u",e.UNTRACKED="?",e.IGNORED="!"}(r||(r={})),function(e){e.UNTRACKED="UNTRACKED",e.UNMODIFIED="UNMODIFIED",e.MODIFIED="MODIFIED",e.TYPE_CHANGED="TYPE_CHANGED",e.ADDED="ADDED",e.DELETED="DELETED",e.RENAMED="RENAMED",e.COPIED="COPIED",e.UNMERGED="UNMERGED"}(i||(i={}))},4520:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(57135),i=t(96583),o=t(91926),u=t(19499),a=t(28639),l=t(27327),c=t(7131),s=t(89862);function f(e){var n=e.container,t=e.toolchain,f=e.beforeRun,d=function(){var e=function(e){v!==e&&(v=e,h.emit(a.zW.STATE_CHANGE,v))};e(p?m?a.Ah.STOPPING:"none"===g?a.Ah.IDLE:a.Ah.RUNNING:a.Ah.OFFLINE)},h=(0,l.ZP)(),p=null,v=a.Ah.OFFLINE,g="none",m=!1,y=Math.random();function w(){return(w=(0,r.Z)((function(e){var r,o,u,l,m,w,b,Z;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(v!==a.Ah.IDLE&&v!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+v);return o=Math.random(),y=o,h.emit(a.zW.LOCAL_RUN),g="before-run",d(),e||(l=(0,s.Z)(t.configs.current,[],null,(null===(u=t.configs.current)||void 0===u?void 0:u.entrypoint)||null)).length>0&&(e=l[0]),m=c.kg.timeStart({runnerId:null===e||void 0===e?void 0:e.runner.id,filePath:null===e||void 0===e?void 0:e.filePath,isInterpreter:null===e||void 0===e?void 0:e.runner.interpreter,replLanguage:null===(r=n.getContext())||void 0===r?void 0:r.repl.language}),[4,f(m,{runId:o.toString(),channelId:null===p||void 0===p?void 0:p.id,type:"shellrunner",runConfig:e})];case 1:if(i.sent(),y!==o)return[2];if("none"===g)return[2];if("server"===g)return[2];if(!p)throw new Error("State is RUNNING but shellrunner is null?");return"open"!==p.status||(g="optimistic",w={},e&&(w.runnerId=e.runner.id,w.filePath=e.filePath),b=performance.now(),p.send({runMain:w}),Z=p.onCommand((function(e){if("state"===e.body){Z();var n=performance.now()-b;m("run finished",{timeToRunningMs:n})}}))),[2]}}))}))).apply(this,arguments)}function b(){return(b=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){if(v!==a.Ah.IDLE&&v!==a.Ah.RUNNING)throw new Error("Can only send input when running or idle");if(!p)throw new Error("State is not OFFLINE but shellrunner is null?");return p.send({input:e}),[2]}))}))).apply(this,arguments)}return n.openChannel({name:"shellrunner",service:"shellrun2",skip:function(e){var n,t=e.repl;return!("nix"===(n=t.language)||!0===o.ZP.usesInterpreter(n)||!1!==o.ZP.usesRunProject(n))}},(function(e){var n=e.channel;return p=n,d(),n.onCommand((function(e){if(null!=e.state){var n=e.state===u.api.State.Stopped;m&&n&&(m=!1),n?"server"===g&&(g="none"):g="server",d()}else null!=e.output?h.emit(a.zW.OUTPUT,e.output):e.hint&&h.emit(a.zW.OUTPUT,"\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))})),function(){g="none",m=!1,p=null,d()}})),{mode:"shellrunner",run:function(e){return w.apply(this,arguments)},stopRun:function(){if(v!==a.Ah.RUNNING)throw new Error("stopRun must be called when running but got ".concat(v));if(!p)throw new Error("State is RUNNING but shellrunner is null?");if("before-run"===g)return g="none",void d();g="none",m=!0,d(),p.send({clear:{}})},sendInput:function(e){return b.apply(this,arguments)},resizeTerminal:function(e){if(!p)throw new Error("resizeTerminal must be called when online");p.send({resizeTerm:e})},onOutput:function(e){return h.on(a.zW.OUTPUT,e),function(){h.removeListener(a.zW.OUTPUT,e)}},onLocalRun:function(e){return h.on(a.zW.LOCAL_RUN,e),function(){h.removeListener(a.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return h.on(a.zW.STATE_CHANGE,e),function(){h.removeListener(a.zW.STATE_CHANGE,e)}},getRunState:function(){return v}}}var d=t(33033);var h,p=t(72006),v=t(92674),g=t.n(v),m=t(92153),y=t(66091);!function(e){e.MESSAGE="MESSAGE"}(h||(h={}));var w=function(){"use strict";function e(n){(0,y.Z)(this,e),this.buffer=new Array(n).fill(null),this.start=0,this.end=0,this.isFull=!1}var n=e.prototype;return n.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},n.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function b(e){var n=e.maxHistorySize,t=new w(n),r=(0,l.ZP)();return{emitMessage:function(e){t.write(e),r.emit(h.MESSAGE,e)},onMessage:function(e){return r.on(h.MESSAGE,e),Promise.resolve().then((function(){return e(t.readAll())})),function(){return r.removeListener(h.MESSAGE,e)}}}}var Z=t(9434);function x(e){return 1e3*e.seconds+e.nanos/1e6}var E,S=4e3,k="\x1b[?25l";function C(e){var n=e.container,t=e.toolchain,o=e.beforeRun,f=e.packager,d=e.debuggest,h=function(e){P=(0,m.ZP)(P,e)},v=function(e){var n=P.outputBlocks.find((function(n){return n.id===e}));if(!n)throw new Error("can't find block for id: ".concat(e));I.emit(a.zW.BLOCK_CHANGED,n)},y=function(){I.emit(a.zW.ALL_BLOCKS_CHANGED,P.outputBlocks)},w=function(e){P.runState!==e&&(h((function(n){n.runState=e})),I.emit(a.zW.STATE_CHANGE,e))},C=function(){A?P.runningStage!==E.BEFORE_RUN?P.runningStage!==E.STOPPING?P.runningStage===E.NONE?w(a.Ah.IDLE):w(a.Ah.RUNNING):w(a.Ah.STOPPING):w(a.Ah.BEFORE_RUN):w(a.Ah.OFFLINE)},T=function(e,n){var t=(null!==n&&void 0!==n?n:P).outputBlocks.filter((function(n){return n.type===e})),r=t[t.length-1];if(r)return r},R=function(e,n){var t;h((function(r){var i=T(e,r);i&&(t=i.id,n(i))})),t&&v(t)},D=function(){var e=d.mainClient.current,n=null===e||void 0===e?void 0:e.state.current;return{client:e,state:n,sendInput:function(n){return null===e||void 0===e?void 0:e.sendInput(n)},stop:function(){return null===e||void 0===e?void 0:e.stop()},isRunning:"running"===n,isStopped:void 0===n||null===n||"terminated"===n}},I=(0,l.ZP)(),A=null,P={runId:g()(),runState:a.Ah.OFFLINE,runningStage:E.NONE,outputBlocks:[]},N=function(e){var n=e.packager,t=e.updateState,r=e.getRunningBlockOfType,i=e.updateRunningBlockOfType,o=e.emitBlockUpdate,u=[];return u.push(n.onOutput((function(e){var n=r(a.kH.PACKAGER);null===n||void 0===n||n.emitMessage(e.replace(/\n/g,"\n\r"))}))),u.push(n.onError((function(e){i(a.kH.PACKAGER,(function(n){n.error?n.error+="\n"+e:n.error=e}))}))),u.push(n.onStateChanged((function(e){if(e){var n=g()();t((function(e){e.outputBlocks.push((0,p.Z)({id:n,localStartTime:Date.now(),isDone:!1,type:a.kH.PACKAGER},b({maxHistorySize:S}))),e.outputBlocks.length>20&&e.outputBlocks.shift()})),o(n)}else i(a.kH.PACKAGER,(function(e){e.emitMessage(k),e.localEndTime=Date.now(),e.isDone=!0}))}))),u}({packager:f,updateState:h,getRunningBlockOfType:T,updateRunningBlockOfType:R,emitBlockUpdate:v}),O=function(e){var n,t,r=e.debuggest,i=e.updateState,o=e.updateRunningBlockOfType,u=e.getRunningBlockOfType,l=e.emitBlockUpdate,c=e.emitRunState,s=e.stopCurrentRun,f=r.mainClient.subscribe((function(e){e&&(null===t||void 0===t||t(),null===n||void 0===n||n(),t=e.state.subscribe((function(e){if("initializing"===e){s();var n=g()();i((function(e){e.outputBlocks.push((0,p.Z)({id:n,localStartTime:Date.now(),isDone:!1,type:a.kH.DEBUGGER,debugState:"paused"},b({maxHistorySize:S})))})),l(n),c(a.Ah.RUNNING)}"paused"===e&&o(a.kH.DEBUGGER,(function(e){e.debugState="paused"})),"running"===e&&o(a.kH.DEBUGGER,(function(e){e.debugState="running"})),"stopping"===e&&c(a.Ah.STOPPING),"terminated"===e&&(o(a.kH.DEBUGGER,(function(e){e.localEndTime=Date.now(),e.emitMessage(k),e.isDone=!0})),c(a.Ah.IDLE))})),n=e.onOutput((function(e){var n=u(a.kH.DEBUGGER);null===n||void 0===n||n.emitMessage(e)})))}));return[n,t,f]}({debuggest:d,updateState:h,updateRunningBlockOfType:R,getRunningBlockOfType:T,emitRunState:w,emitBlockUpdate:v,stopCurrentRun:function(){h((function(e){e.runningStage=E.BEFORE_RUN})),null===A||void 0===A||A.send({clear:{}})}}),q=n.openChannel({name:"output",service:"output"},(function(e){var t=e.channel;return A=t,C(),t.onCommand((function(e){if(null!=e.state){var t=e.state===u.api.State.Stopped;return P.runningStage===E.STOPPING&&t&&h((function(e){e.runningStage=E.NONE})),t?P.runningStage===E.SERVER&&h((function(e){e.runningStage=E.NONE})):h((function(e){e.runningStage=E.SERVER})),void C()}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==P.outputBlocks.find((function(e){return e.type===a.kH.EXECUTION&&!e.isDone})))return;var r=e.outputBlockStartEvent.executionMode===u.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret",i=x(e.outputBlockStartEvent.measureStartTime),o=g()();h((function(e){e.outputBlocks.push((0,p.Z)({id:o,localStartTime:Date.now(),startTime:i,isDone:!1,type:a.kH.EXECUTION,executionMode:r},b({maxHistorySize:S}))),e.outputBlocks.length>20&&e.outputBlocks.shift()})),v(o)}if(null!=e.output){var l=T(a.kH.EXECUTION);null===l||void 0===l||l.emitMessage(e.output)}if(null!=e.stderr&&R(a.kH.EXECUTION,(function(n){n.stderr=(n.stderr||"")+e.stderr})),null!=e.error){var c=e.error;R(a.kH.EXECUTION,(function(e){e.error?e.error+="\n"+c:e.error=c}))}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var s,f=e.outputBlockEndEvent.exitCode;(0,Z.j)(Z.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:f,replId:null===(s=n.getContext())||void 0===s?void 0:s.repl.id,runId:P.runId});var d=x(e.outputBlockEndEvent.measureEndTime);R(a.kH.EXECUTION,(function(e){e.emitMessage(k),e.exitCode=f,e.localEndTime=Date.now(),e.endTime=d,e.isDone=!0}))}})),function(){A=null,h((function(e){e.runId=g()(),e.runState=a.Ah.OFFLINE,e.runningStage=E.NONE,e.outputBlocks.forEach((function(e){if(!e.isDone){e.emitMessage(k),e.localEndTime=Date.now(),e.isDone=!0;var n="Connection was lost";e.error?e.error+="\n"+n:e.error=n}}))})),C(),y()}}));function L(){return(L=(0,r.Z)((function(e){var r,u,l,f,d,v,m,y,w,b,x;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(P.runState!==a.Ah.IDLE&&P.runState!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+P.runState);return l=P.outputBlocks.length>1&&P.outputBlocks[P.outputBlocks.length-1],(0,Z.j)(Z.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(r=n.getContext())||void 0===r?void 0:r.repl.id,runId:P.runId,lastBlock:l?(0,p.Z)({type:l.type,isDone:l.isDone,endTime:l.endTime,startTime:l.startTime},l.type===a.kH.EXECUTION?{executionMode:l.executionMode,exitCode:l.exitCode,stderr:l.stderr}:{},l.type===a.kH.DEBUGGER?{debugState:l.debugState}:{}):void 0,previousBlockNumber:P.outputBlocks.length,previousBlocksAvgTimeMs:P.outputBlocks.length>1?Math.floor(P.outputBlocks.reduce((function(e,n){return n.endTime&&n.startTime?e+(n.endTime-n.startTime):e}),0)):void 0}),f=g()(),h((function(e){e.runId=f,e.runningStage=E.BEFORE_RUN})),I.emit(a.zW.LOCAL_RUN),C(),e||(v=(0,s.Z)(t.configs.current,[],null,(null===(d=t.configs.current)||void 0===d?void 0:d.entrypoint)||null)).length>0&&(e=v[0]),m=c.kg.timeStart({runnerId:null===e||void 0===e?void 0:e.runner.id,filePath:null===e||void 0===e?void 0:e.filePath,isInterpreter:null===e||void 0===e?void 0:e.runner.interpreter,replLanguage:null===(u=n.getContext())||void 0===u?void 0:u.repl.language}),[4,o(m,{runId:f,channelId:null===A||void 0===A?void 0:A.id,type:"outputs",runConfig:e})];case 1:if(i.sent(),P.runId!==f)return[2];if(P.runningStage===E.NONE)return[2];if(P.runningStage===E.SERVER)return[2];if(!A)throw new Error("State is RUNNING but outputs is null?");return"open"!==A.status||((y=D()).isStopped||y.stop(),w={},e&&(w.runnerId=e.runner.id,w.filePath=e.filePath),b=performance.now(),A.send({runMain:w}),x=A.onCommand((function(e){if("state"===e.body){x();var n=performance.now()-b;m("run finished",{timeToRunningMs:n})}}))),[2]}}))}))).apply(this,arguments)}function B(){return(B=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){if(n=D(),t=P.outputBlocks[P.outputBlocks.length-1].type===a.kH.DEBUGGER,n.isRunning&&t&&n.sendInput(e),P.runState!==a.Ah.IDLE&&P.runState!==a.Ah.RUNNING)throw new Error("Can only send input when running or idle");if(!A)throw new Error("State is not OFFLINE but outputs is null?");return"open"!==A.status||A.send({input:e}),[2]}))}))).apply(this,arguments)}return{mode:"outputs",run:function(e){return L.apply(this,arguments)},stopRun:function(){if(P.runState===a.Ah.RUNNING){var e=D();if(!e.isStopped)return e.stop(),h((function(e){e.runningStage=E.STOPPING})),void C();if(P.runningStage===E.BEFORE_RUN)return h((function(e){e.runningStage=E.NONE})),void C();h((function(e){e.runningStage=E.STOPPING})),C(),null===A||void 0===A||A.send({clear:{}})}},sendInput:function(e){return B.apply(this,arguments)},onLocalRun:function(e){return I.on(a.zW.LOCAL_RUN,e),function(){I.removeListener(a.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return I.on(a.zW.STATE_CHANGE,e),function(){return I.removeListener(a.zW.STATE_CHANGE,e)}},dispose:function(){q(),O.forEach((function(e){return null===e||void 0===e?void 0:e()})),N.forEach((function(e){return null===e||void 0===e?void 0:e()}))},getRunState:function(){return P.runState},getOutputBlocks:function(){return P.outputBlocks},clearBlockHistory:function(){h((function(e){e.outputBlocks=e.outputBlocks.filter((function(e){return!e.isDone}))})),y()},onBlockChanged:function(e){return I.on(a.zW.BLOCK_CHANGED,e),function(){return I.removeListener(a.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return I.on(a.zW.ALL_BLOCKS_CHANGED,e),function(){return I.removeListener(a.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,n){if(A&&"open"===A.status){var t=P.outputBlocks.find((function(n){return n.id===e}));if(!t)throw new Error("tried to resize terminal of non-existing block");t.isDone||A.send({resizeTerm:n})}},startBlock:function(e){if(e!==a.kH.UNIT_TEST)throw new Error("this API is only allowed for Autograder/UnitTest for historical reasons");var n=g()();return h((function(e){e.outputBlocks.push((0,p.Z)({id:n,localStartTime:Date.now(),isDone:!1,type:a.kH.UNIT_TEST},b({maxHistorySize:S})))})),v(n),{id:n}},endBlock:function(e){h((function(n){var t=n.outputBlocks.find((function(n){return n.id===e}));if(!t)throw new Error("couldn't find a block");if(t.type!==a.kH.UNIT_TEST)throw new Error("this API is only allowed for Autograder/UnitTest for historical reasons");t.emitMessage(k),t.localEndTime=Date.now(),t.isDone=!0})),v(e)},writeOutputToBlock:function(e,n){var t=P.outputBlocks.find((function(n){return n.id===e}));null===t||void 0===t||t.emitMessage(n)},writeErrorToBlock:function(e,n){h((function(t){var r=t.outputBlocks.find((function(n){return n.id===e}));if(!r)throw new Error("couldn't find a block");if(r.type!==a.kH.UNIT_TEST)throw new Error("this API is only allowed for Autograder/UnitTest for historical reasons");r.error?r.error+="\n"+n:r.error=n})),v(e)}}}function T(e){var n,t=e.container,o=e.toolchain,u=e.beforeRun,s=e.packager,h=e.debuggest,p=e.mode;if("shellrunner"===p)n=f({container:t,toolchain:o,beforeRun:u});else if("outputs"===p){if(!s)throw new Error("outputs mode requires packager");if(!h)throw new Error("outputs mode requires debugger");n=C({container:t,toolchain:o,beforeRun:u,packager:s,debuggest:h})}else"html"===p&&(n=function(e){var n=e.beforeRun,t=e.container,o=function(){(function(e){s!==e&&(s=e,u.emit(a.zW.STATE_CHANGE,s))})("none"===f?a.Ah.IDLE:a.Ah.RUNNING)},u=(0,l.ZP)(),s=a.Ah.OFFLINE,f="none",h=Math.random();function p(){return(p=(0,r.Z)((function(){var e,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:if(s!==a.Ah.IDLE&&s!==a.Ah.STOPPING)throw new Error("Cannot run while state is not IDLE or STOPPING, got state: "+s);return e=Math.random(),h=e,u.emit(a.zW.LOCAL_RUN),f="before-run",o(),t=c.kg.timeStart({replLanguage:"html"}),[4,n(t,{runId:e.toString(),type:"html"})];case 1:return r.sent(),h!==e||"none"===f||(f="running",o(),f="none",o()),[2]}}))}))).apply(this,arguments)}return t.onConnectionStateChanged((function(e){e===d.em.CONNECTED&&(f="none",o())})),{mode:"html",run:function(){return p.apply(this,arguments)},stopRun:function(){if(s!==a.Ah.RUNNING)throw new Error("stopRun must be called when running but got ".concat(s));f="none",o()},onStateChanged:function(e){return u.on(a.zW.STATE_CHANGE,e),function(){u.removeListener(a.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return u.on(a.zW.LOCAL_RUN,e),function(){u.removeListener(a.zW.LOCAL_RUN,e)}},getRunState:function(){return s}}}({beforeRun:u,container:t}));if(!n)throw new Error("mode not supported: "+p);return n}!function(e){e.BEFORE_RUN="BEFORE_RUN",e.SERVER="SERVER",e.NONE="NONE",e.STOPPING="STOPPING"}(E||(E={}))},28639:function(e,n,t){var r,i,o;t.d(n,{Ah:function(){return i},kH:function(){return o},zW:function(){return r}}),function(e){e.STATE_CHANGE="STATE_CHANGE",e.OUTPUT="OUTPUT",e.LOCAL_RUN="RUN",e.BLOCK_CHANGED="BLOCK_CHANGED",e.ALL_BLOCKS_CHANGED="ALL_BLOCKS_CHANGED"}(r||(r={})),function(e){e.OFFLINE="OFFLINE",e.IDLE="IDLE",e.BEFORE_RUN="BEFORE_RUN",e.RUNNING="RUNNING",e.STOPPING="STOPPING"}(i||(i={})),function(e){e.EXECUTION="EXECUTION",e.DEBUGGER="DEBUGGER",e.PACKAGER="PACKAGER",e.UNIT_TEST="UNIT_TEST"}(o||(o={}))},94284:function(e,n,t){t.d(n,{Z:function(){return h},w:function(){return d}});var r=t(57135),i=t(57389),o=t(72006),u=t(4405),a=t(2272),l=t(96583),c=t(34489),s=t(12583),f=t(4561),d=".env";function h(e){var n=e.fs,t={id:0,ops:[],requests:[]};function h(){return(h=(0,r.Z)((function(e){var n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,g()];case 1:return[2,(n=t.sent()[e])?{key:e,value:n}:void 0]}}))}))).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return v=(0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e=Object.entries,[4,g()];case 1:return[2,e.apply(Object,[n.sent()]).map((function(e){var n=(0,a.Z)(e,2);return{key:n[0],value:n[1]}}))]}}))})),v.apply(this,arguments)}function g(){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.readFile(d)];case 1:if((e=t.sent()).error===f.Df.NotFound)return[2,{}];if(e.error)throw e.error;return[2,c.Z.parse(e.content.toString())]}}))}))).apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,w([e])];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function w(e,n){return b.apply(this,arguments)}function b(){return b=(0,r.Z)((function(e,n){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return Array.isArray(e)||(e=Object.entries(e).map((function(e){var n=(0,a.Z)(e,2);return{key:n[0],value:n[1]}}))),(null===n||void 0===n?void 0:n.removeMissing)&&t.ops.push({op:"clear"}),e.forEach((function(e){return t.ops.push({op:"upsert",secret:e})})),[4,S()];case 1:return r.sent(),[2]}}))})),b.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,x([e])];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function x(e){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e.forEach((function(e){return t.ops.push({op:"remove",key:e})})),[4,S()];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function S(){return k.apply(this,arguments)}function k(){return k=(0,r.Z)((function(){var e,a,s,f,h,v,g,m,y,w,b,Z,x,E,S;return(0,l.__generator)(this,(function(k){switch(k.label){case 0:return e=t.id+=1,[4,p()];case 1:if(a=k.sent(),e!==t.id)return[2,new Promise((function(e){t.requests.push(e)}))];s=a.reduce((function(e,n){return(0,u.Z)((0,o.Z)({},e),(0,i.Z)({},n.key,n.value))}),{}),f=!0,h=!1,v=void 0;try{for(g=t.ops[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)switch((y=m.value).op){case"upsert":s[y.secret.key]=y.secret.value;break;case"remove":delete s[y.key];break;case"clear":w=!0,b=!1,Z=void 0;try{for(x=Object.keys(s)[Symbol.iterator]();!(w=(E=x.next()).done);w=!0)S=E.value,delete s[S]}catch(C){b=!0,Z=C}finally{try{w||null==x.return||x.return()}finally{if(b)throw Z}}}}catch(C){h=!0,v=C}finally{try{f||null==g.return||g.return()}finally{if(h)throw v}}return t.ops=[],[4,new Promise(function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.writeFile(d,c.Z.serialize(s)).finally((function(){t.requests.forEach((function(e){return e()})),t.requests=[]}))];case 1:return r.sent(),e(),[2]}}))}));return function(n){return e.apply(this,arguments)}}())];case 2:return[2,k.sent()]}}))})),k.apply(this,arguments)}return{readSecret:function(e){return h.apply(this,arguments)},readSecrets:p,writeSecret:function(e){return y.apply(this,arguments)},writeSecrets:w,removeSecret:function(e){return Z.apply(this,arguments)},removeSecrets:x,watchSecrets:function(e){var t,r=n.watchDir(s.Ql,{onChange:function(r){var i=r.find((function(e){return e.filename===d}));i&&!t&&(t=n.watchFile(d,{onChange:function(n){e.onChange(Object.entries(c.Z.parse(n.toString())).map((function(e){var n=(0,a.Z)(e,2);return{key:n[0],value:n[1]}})))},onError:function(n){var r;t=void 0,null===(r=e.onError)||void 0===r||r.call(e,n)}})),!i&&t&&(t(),t=void 0)},onError:function(){t&&(t(),t=void 0)}});return function(){t&&(t(),t=void 0),r()}}}}},89862:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(45942),i=t(33723);function o(e,n,t,o){if(!(null===e||void 0===e?void 0:e.runs))return[];var a=[];if(n=n.slice(),t){var l=n.indexOf(t);-1!==l&&(n.splice(l,1),n.splice(0,0,t))}if(o){var c=n.indexOf(o);-1!==c&&n.splice(c,1),n.splice(0,0,o)}var s=!0,f=!1,d=void 0;try{for(var h,p=n[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var v=h.value;if(v.match(/(\.[a-z0-9]+)$/)){var g=!0,m=!1,y=void 0;try{for(var w,b=e.runs[Symbol.iterator]();!(g=(w=b.next()).done);g=!0){var Z=w.value;if(Z.fileParam||Z.optionalFileParam){var x=(0,r.rF)(Z.fileTypeAttrs);null===x&&Z.language&&(x=r.$R.from(Z.language)),x&&(0,i.JW)(v,x)&&a.push({runner:Z,filePath:v})}}}catch(D){m=!0,y=D}finally{try{g||null==b.return||b.return()}finally{if(m)throw y}}}}}catch(D){f=!0,d=D}finally{try{s||null==p.return||p.return()}finally{if(f)throw d}}var E=!0,S=!1,k=void 0;try{for(var C,T=e.runs[Symbol.iterator]();!(E=(C=T.next()).done);E=!0){var R=C.value;R.fileParam||a.push({runner:R})}}catch(D){S=!0,k=D}finally{try{E||null==T.return||T.return()}finally{if(S)throw k}}return function(e){e.sort((function(e,n){var t=u(e),r=u(n);return t!==r?t-r:e.runner.interpreter===n.runner.interpreter?0:e.runner.interpreter?-1:1}))}(a),a}function u(e){var n,t,r;return(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith(".replit/"))?0:(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}},28435:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(48749);function o(){var e=(0,r.useContext)(i.Z);if(!e)throw new Error("Expected services in context");return e}},55102:function(e,n,t){t.d(n,{K:function(){return a}});var r=t(72006),i=t(28435),o=t(50959),u=t(63723);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)().userEvents,t=(0,u.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,o.useCallback)((function(i,o){t&&n.emit(i,(0,r.Z)({},e,o))}),[n,e,t])}},13528:function(e,n,t){t.d(n,{X:function(){return o},z:function(){return u}});var r=t(50959),i=r.createContext(null);function o(){return r.useContext(i)}var u=i.Provider},97866:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(62435),i=function(){};function o(e){var n=(0,r.e)(e);return n?n.delegateTooltip:i}},62435:function(e,n,t){t.d(n,{e:function(){return o}});var r=t(50959),i=t(13528);function o(e){var n=(0,i.X)(),t=(0,r.useCallback)((function(t){null===n||void 0===n||n.setStepTargetElement(e,t)}),[e,null===n||void 0===n?void 0:n.setStepTargetElement]);return n&&n.steps.some((function(n){return n.id===e}))?{delegateTooltip:t,isActive:!n.isLoading&&!n.isDone&&n.activeStep.id===e,activeStep:n.activeStep,done:n.done,goto:n.goto,id:n.id,isDone:n.isDone,isLoading:n.isLoading,next:n.next,prev:n.prev,restart:n.restart,steps:n.steps}:null}},65611:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(66091),i=t(5683),o=t(72006),u=t(4405),a=t(45347),l=t(74985),c=t(43182),s=t(26473),f=t(88965),d=t(50959),h=t(9558),p=t(49500),v=function(e){"use strict";(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).state={hasErrored:!1,error:null,errorInfo:null},e}var o=t.prototype;return o.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),p.error(e)},o.render=function(){var e,n,t;return this.state.hasErrored?(0,l.tZ)(s.G,{css:[f.l0.font.code,f.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},f.l0.backgroundColor.blurpleDefault,f.l0.height("100%")],children:(0,l.tZ)(s.G,{children:null!==(t=null===(e=this.state)||void 0===e||null===(n=e.error)||void 0===n?void 0:n.stack)&&void 0!==t?t:"An unknown error occurred."})}):this.props.children},t}(d.Component);function g(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,i=void 0===r||r,a=e.handleError,s=e.children,f=e.origin,d=void 0===f?"ErrorBoundary: (no origin provided)":f,p=e.tags,g=void 0===p?{}:p,m=e.extras,y=void 0===m?{}:m,w=(0,h.uV)();return(0,l.tZ)(v,{handleError:function(e,n){t?w({error:e,extras:(0,u.Z)((0,o.Z)({},y),{errorInfo:n}),tags:(0,u.Z)((0,o.Z)({},g),{errorBoundary:!0}),origin:d}):i&&c.$e((function(t){t.setTag("errorBoundary",!0),t.setTags(g),t.setExtra("errorInfo",n),t.setExtras(y),c.Tb(e)})),a&&a(e,n)},children:s})}},59519:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(74985),i=t(43312),o=t(7131),u=t(88965),a=t(26473),l=t(12583),c=t(50959),s=t(12235),f=t(45317),d=(0,i.iv)([u.l0.justify.center,u.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function h(e){var n,t=e.index,i=32*t+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:i,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:i,rx:"3",ry:"3",width:"".concat(100+(n=t,n%2!==0?-10*n:10*n)),height:16})]})}function p(e){var n=e.path,t=n===l.Ql,i=t?5:1;c.useEffect((function(){var e=o.kg.timeStart({isRootPath:t});return function(){e("time to load filetree folder")}}),[t,n]);var u="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(a.G,{css:d,children:(0,r.tZ)(s.Z,{speed:2,backgroundColor:f.TV.backgroundHighest,foregroundColor:f.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:u,children:Array(i).fill(null).map((function(e,n){return(0,r.tZ)(h,{index:n},n)}))})})}},87223:function(e,n,t){t.d(n,{st:function(){return y}});var r,i=t(72006),o=t(4405),u=t(74985),a=t(50959),l=t(66777),c=t(21371),s=t(60717),f=t(26473),d=t(53312),h=t(88965),p=t(6108),v=t(43312),g=(t(91046),t(84833),t(63723)),m=t(37268);!function(e){e.AddFile="AddFile",e.AddFolder="AddFolder",e.UploadFile="UploadFile",e.UploadFolder="UploadFolder",e.DownloadZip="DownloadZip",e.Duplicate="Duplicate",e.ShowHiddenFiles="ShowHiddenFiles",e.HideHiddenFiles="HideHiddenFiles",e.OpenTab="OpenTab",e.OpenPane="OpenPane",e.CopyLink="CopyLink",e.CopyFilePath="CopyFilePath",e.CopyFolderPath="CopyFolderPath",e.OpenShellHere="OpenShellHere",e.Rename="Rename",e.Download="Download",e.Delete="Delete",e.OpenWith="OpenWith"}(r||(r={}));var y={AddFile:{type:r.AddFile,text:"Add file"},AddFolder:{type:r.AddFolder,text:"Add folder"},UploadFile:{type:r.UploadFile,text:"Upload file"},UploadFolder:{type:r.UploadFolder,text:"Upload folder"},DownloadZip:{type:r.DownloadZip,text:"Download as zip"},Duplicate:{type:r.Duplicate,text:"Duplicate"},ShowHiddenFiles:{type:r.ShowHiddenFiles,text:"Show hidden files"},HideHiddenFiles:{type:r.HideHiddenFiles,text:"Hide hidden files"},OpenTab:{type:r.OpenTab,text:"Open tab"},OpenPane:{type:r.OpenPane,text:"Open pane"},CopyFilePath:{type:r.CopyFilePath,text:"Copy file path"},CopyFolderPath:{type:r.CopyFolderPath,text:"Copy folder path"},CopyLink:{type:r.CopyLink,text:"Copy link"},OpenShellHere:{type:r.OpenShellHere,text:"Open shell here"},Rename:{type:r.Rename,text:"Rename"},Download:{type:r.Download,text:"Download"},Delete:{type:r.Delete,text:"Delete"}},w=(h.l0.position.relative,h.l0.width(16),h.l0.height(16),{self:[h.l0.position.relative,h.l0.width(20),h.l0.height("100%"),h.l0.justify.center,{"& span":{height:"100%"}}],self2:[h.l0.position.relative,h.l0.width(16),h.l0.height("100%"),h.l0.justify.center,h.l0.pr(1)],button:[h.l0.display.flex,h.l0.align.center,h.l0.justify.center,h.l0.py(2),h.l0.top(0),h.l0.width("100%"),h.l0.border({width:0,color:"none"}),h.l0.cursor.pointer,h.l0.color.foregroundDimmest,h.l0.borderRadius(4),p.gU.filled,h.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[h.l0.display.flex,h.l0.align.center,h.l0.py(2),h.l0.width("100%"),h.l0.height("100%"),h.l0.cursor.pointer,h.l0.color.foregroundDimmest,h.l0.focusRing,h.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:h.TV.foregroundDefault}}],list:[h.l0.flex.column,h.l0.justify.center,h.l0.borderRadius(8),h.l0.zIndex(1),h.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[h.l0.color.foregroundDefault,h.l0.p(8),h.l0.fontWeight.normal,h.l0.cursor.pointer,{whiteSpace:"nowrap"},n&&[h.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:h.TV.accentNegativeDefault},":hover .option-label":{color:h.TV.white}}]]},optionLabel:function(e){return e?[h.l0.color.accentNegativeStronger]:[]}});function b(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,u.tZ)(f.G,{css:w.option(n,t),children:(0,u.tZ)(d.xv,{className:"option-label",css:w.optionLabel(n),multiline:!1,children:r})})}var Z=f.K.ul,x=f.K.li,E=f.K.button,S=f.K.div,k=a.forwardRef((function(e,n){var t=e.isActive,r=e.actions,p=e.onAction,v=e.onOpenChange,k=a.useRef(!1),C=(0,c.L7)({items:r,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(k.current||p(n),N())}}),T=C.isOpen,R=C.getToggleButtonProps,D=C.getMenuProps,I=C.highlightedIndex,A=C.getItemProps,P=C.openMenu,N=C.reset;a.useImperativeHandle(n,(function(){return{open:P}})),a.useEffect((function(){v&&v(T)}),[T,v]);var O=R(),q=(0,g.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,u.tZ)(f.G,{css:q?w.self2:w.self,children:(0,u.BX)(s.Z,{elevated:!0,showArrow:!0,isOpen:T,placement:"right-start",padding:0,onClickOutside:N,children:[(0,u.tZ)(m.Tg,{background:t?"default":"root",css:[h.l0.height("100%"),{background:t?h.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,u.tZ)(E,(0,o.Z)((0,i.Z)({},O),{css:q?w.button2:w.button,size:20,onClick:function(e){e.stopPropagation(),O.onClick(e)},children:(0,u.tZ)(l.Z,{})}))}),(0,u.tZ)(S,(0,o.Z)((0,i.Z)({},D({},{suppressRefError:!0})),{children:T?(0,u.tZ)(Z,{css:w.list,children:r.map((function(e,n){return(0,u.tZ)(x,(0,o.Z)((0,i.Z)({"data-cy":"filetree-node-action-".concat(e.type)},A({item:e,index:n,onClick:function(n){k.current=!0,setTimeout((function(){k.current=!1})),p(e),n.stopPropagation()}})),{children:(0,u.tZ)(b,{isHighlighted:I===n,isNegative:e.type===y.Delete.type,children:(0,u.BX)(f.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,u.tZ)(d.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)}))}):null}))]})})}));k.displayName="NodeActionsMenu",n.ZP=k},88031:function(e,n,t){t.d(n,{s:function(){return Xr},p:function(){return jr}});var r=t(57389),i=t(9970),o=t(74985),u=t(50959),a=t(71999),l=t(28999),c=t(28132),s=(0,u.createContext)(null);function f(e){return(0,o.tZ)(s.Provider,{value:e.store,children:e.children})}function d(){var e=(0,u.useContext)(s);if(!e)throw new Error("Expected store in context");return e}function h(e){return(0,a.Dv)(e,{store:d()})}function p(e){return(0,c.b)(e,d())}var v=function(e){return(0,a.b9)(e,{store:d()})};function g(e){return(0,l.lV)((0,u.useCallback)((function(n){return n(e)}),[e]),{store:d()})}var m=t(2272),y=t(90234),w=t(57135),b=t(96583),Z=t(4561),x=t(92153),E=t(12583),S=t(87978),k=t(26289),C=t(72091),T="No files",R="Loading...",D=t(83344);function I(e,n){return e.y+e.height===n}function A(e,n){var t=n.fromIndex;if("next"===n.dir){for(var r=t+1;r<e.length;r++){var i=e[r];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=t-1;o>=0;o--){var u=e[o];if(u&&("dir"===u.type||"file"===u.type))return u}return null}function P(e,n){return n.type===Z.Tv.Directory&&e.type!==Z.Tv.Directory?1:e.type===Z.Tv.Directory&&n.type!==Z.Tv.Directory?-1:(0,S.IV)(e.filename,n.filename)}function N(e){var n=e.row,t=e.baseDepth;return"dir"===n.type||"file"===n.type||"upload"===n.type?n.path===E.Ql?0:(0,S.U$)(n.path)-1-t:n.dir===E.Ql?0:(0,S.U$)(n.dir)-t}function O(e){var n=e.row,t=N({row:n,baseDepth:e.baseDepth});switch(n.type){case"file":case"dir":case"upload":return{text:(0,S.UO)(n.path),depth:t};case"error":return{text:n.message,depth:t};case"divider":return{text:n.label,depth:t};case"create":case"emptyDir":return{text:T,depth:t}}}var q=function(e,n){return e===E.Ql?n:e+"/"+n},L=function(e,n){return e===E.Ql&&1===(0,S.U$)(n)||(0,D.pC)(e,n)};function B(e){var n=e.root,t=void 0===n?E.Ql:n,r=e.dirInfo,o=e.filter,u=e.sort,a=e.getSection,l=e.readOnly,c=e.pendingUploads,s=e.pendingMoves,f=e.pathBeingRenamed,d=e.alwaysShowCreateRow,h=[],p=(null===c||void 0===c?void 0:c.length)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value,l=(0,S.Il)(a.targetPath)||E.Ql,c=n.get(l),s={filename:(0,S.UO)(a.targetPath),progress:a.progress};c?c.push(s):n.set(l,[s])}}catch(f){r=!0,i=f}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return n}(c):null,v=new Map,g=new Map;if(null===s||void 0===s?void 0:s.length){var y=!0,w=!1,b=void 0;try{for(var x,k=s[Symbol.iterator]();!(y=(x=k.next()).done);y=!0){var T=x.value,R=T.from,D=T.to;v.set(R.path,R.type),g.set(D,R.type)}}catch(I){w=!0,b=I}finally{try{y||null==k.return||k.return()}finally{if(w)throw b}}}return function e(n){var c=r.get(n);if(c&&!v.has(n)&&c.expanded)if(n!==t||!c.loading||c.children)if(c.error)h.push({type:"error",message:c.error.message,dir:n});else{var s=c.children?(0,i.Z)(c.children):void 0;s&&v.size>0&&(s=s.filter((function(e){return!v.has(q(n,e.filename))})));var y=!0,w=!1,b=void 0;try{for(var x,k=function(){var e=(0,m.Z)(x.value,2),t=e[0],r=e[1];if(!L(n,t))return"continue";var i=(0,S.UO)(t);if(null===s||void 0===s?void 0:s.some((function(e){return e.filename===i})))return"continue";s||(s=[]),s.push({filename:i,type:r})},T=g[Symbol.iterator]();!(y=(x=T.next()).done);y=!0)k()}catch(I){w=!0,b=I}finally{try{y||null==T.return||T.return()}finally{if(w)throw b}}var R=null===p||void 0===p?void 0:p.get(n);if(R){s||(s=[]);var D=!0,A=!1,P=void 0;try{for(var N,O=R[Symbol.iterator]();!(D=(N=O.next()).done);D=!0){var B=N.value,U=B.filename,G=B.progress;s.push({filename:U,type:Z.Tv.File,progress:G})}}catch(I){A=!0,P=I}finally{try{D||null==O.return||O.return()}finally{if(A)throw P}}}if(s)if(c.create||R||!s||0!==s.length){var F=function(e,n){var t=n.getSection,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=t(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===Z.Tv.File?"file":"dir",filename:s.filename};if(f){var h=i.get(f);h?h.push(d):i.set(f,[d])}else r.push(d)}}catch(I){u=!0,a=I}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var p=!0,v=!1,g=void 0;try{for(var y,w=i[Symbol.iterator]();!(p=(y=w.next()).done);p=!0){var b=(0,m.Z)(y.value,2),x=b[0],E=b[1];r.push({type:"divider",label:x}),(0,C.fN)(r,E)}}catch(I){v=!0,g=I}finally{try{p||null==w.return||w.return()}finally{if(v)throw g}}return r}(s.filter(o).sort(u),{getSection:n===E.Ql?a:function(){return null}}),M=-1,_=!0,z=!1,W=void 0;try{for(var H,j=function(){var t=H.value;if("error"===t.type||"emptyDir"===t.type)throw new Error("Expected dir, file, or divider row");if("divider"===t.type)return-1===M&&(M=h.length),h.push({type:"divider",dir:n,label:t.label}),"continue";var i=q(n,t.filename);if("dir"===t.type){var o={type:"dir",path:i};if(f===i&&(o.rename=!0),g.has(i)&&(o.pending=!0),h.push(o),!r.get(i))return"continue";e(i)}else if("upload"===t.type)h.push({type:"upload",path:i,progress:t.progress});else if(!R||!R.some((function(e){return e.filename===t.filename}))){var u={type:"file",path:i};f===i&&(u.rename=!0),g.has(i)&&(u.pending=!0),h.push(u)}},X=F[Symbol.iterator]();!(_=(H=X.next()).done);_=!0)j()}catch(I){z=!0,W=I}finally{try{_||null==X.return||X.return()}finally{if(z)throw W}}if(c.create||d){var K={type:"create",dir:n,fileType:c.create?c.create:void 0};-1===M?h.push(K):h.splice(M,0,K)}}else h.push({type:l?"emptyDir":"create",dir:n})}else h.push({type:"dir",path:n})}(t),h}var U,G,F,M=t(15859),_=(0,y.cn)(new Map),z=(0,y.cn)({width:0,height:0}),W=(0,y.cn)(0),H=(0,y.cn)(null),j=(0,y.cn)(new Map),X=(0,y.cn)((function(e){return null!==(U=e(te).root)&&void 0!==U?U:E.Ql})),K=(0,y.cn)(null),V=(0,y.cn)(null),$=(0,y.cn)(void 0),Y=(0,y.cn)(null,(function(e,n,t){e(ie)||n(V,t)})),Q=(0,y.cn)((function(e){var n=e(te).root,t=void 0===n?E.Ql:n;return t===E.Ql?0:(0,S.U$)(t)})),J=(0,y.cn)((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],r=0,o=!0,u=!1,a=void 0;try{for(var l,c=(0,i.Z)(e.values()).sort((function(e,n){return e.index-n.index}))[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f={height:s.height,y:s.y,cols:[]};if(t.push(f),0!==s.depth){var d=s.depth+n;d>r&&(r=d);for(var h="divider"===s.row.type||"error"===s.row.type||"create"===s.row.type||"emptyDir"===s.row.type?s.row.dir:(0,S.Il)(s.row.path),p=h.split("/"),v=0;v<(0,S.U$)(h);v++){var g=p.slice(0,Number(v+1)).join("/");f.cols.push(g)}}}}catch(M){u=!0,a=M}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}for(var y=new Map,w=n;w<r;w++){var b=[];y.set(w,b);var Z=!0,x=!1,E=void 0;try{for(var k,C=t[Symbol.iterator]();!(Z=(k=C.next()).done);Z=!0){var T=k.value,R=T.cols[w],D=T.y;if(R){var A=b[b.length-1];A&&I(A,D)?A.height+=T.height:b.push({y:D,height:T.height,dir:R,depth:w-n})}}}catch(M){x=!0,E=M}finally{try{Z||null==C.return||C.return()}finally{if(x)throw E}}}var P=[],N=!0,O=!1,q=void 0;try{for(var L,B=y[Symbol.iterator]();!(N=(L=B.next()).done);N=!0){var U,G=(0,m.Z)(L.value,2),F=(G[0],G[1]);(U=P).push.apply(U,(0,i.Z)(F))}}catch(M){O=!0,q=M}finally{try{N||null==B.return||B.return()}finally{if(O)throw q}}return P}(e(j),e(Q))})),ee=(0,y.cn)(!1),ne=(0,y.cn)(null,(function(e,n,t){var r=new Map,i=e(we),o=e(Q),u=!0,a=!1,l=void 0;try{for(var c,s=t.rows[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value,d=f.key.toString(),h=i[f.index];if(h){var p=Math.max(0,N({row:h,baseDepth:o}));r.set(f.index,{y:f.start,height:f.size,index:f.index,key:d,depth:p,row:h})}}}catch(v){a=!0,l=v}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}n(j,r),n(W,t.scrollHeight)})),te=(0,y.cn)({}),re=(0,M.kv)(te,(function(e){return null!==(G=e.onContextMenu)&&void 0!==G?G:null})),ie=(0,y.cn)((function(e){return Boolean(e(te).readOnly)||!e(ee)})),oe=(0,y.cn)((function(e){return null!==(F=e(te).fontSize)&&void 0!==F?F:14})),ue=function(e,n){if("divider"===n)switch(e){case 10:return 28;case 12:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:return 24;case 14:return 32;case 18:return 38;default:return 40}},ae=(0,y.cn)((function(e){return ue(e(oe),"file")})),le=(0,y.cn)((function(e){return function(e){switch(e){case 10:case 12:return 12;case 14:return 16;case 18:return 20;default:return 24}}(e(oe))})),ce=(0,y.cn)((function(e){return e(oe)<14?4:8})),se=(0,y.cn)((function(e){return e(oe)<=14?4:8})),fe=(0,y.cn)((function(e){return e(oe)<16?4:8})),de=(0,y.cn)((function(e){return function(e){switch(e){case 10:return 12;case 12:return 16;case 14:return 24;case 18:return 32;default:return 40}}(e(oe))})),he=(0,y.cn)((function(e){return function(e){switch(e){case 10:return 10;case 12:case 14:return 12;case 18:return 14;default:return 18}}(e(oe))})),pe=(0,y.cn)((function(e){return function(e){switch(e){case 10:case 12:return 10;case 14:case 18:return 16;default:return 20}}(e(oe))})),ve=(0,y.cn)(new Map);function ge(e){var n=e.filename;return k.nh.includes(n)?"Config files":k.uP.includes(n)?"Packager files":null}var me=(0,y.cn)([]),ye=(0,y.cn)([]),we=(0,y.cn)((function(e){var n,t,r=e(te),i=r.filter,o=r.alwaysShowCreateRow,u=r.root,a=void 0===u?E.Ql:u,l=r.sort,c=void 0===l?P:l,s=r.readOnly,f=void 0!==s&&s;return B({root:a,dirInfo:e(ve),filter:i,sort:c,readOnly:f,getSection:ge,pendingUploads:e(me),pathBeingRenamed:null!==(n=e(V))&&void 0!==n?n:void 0,pendingMoves:null!==(t=e(ye))&&void 0!==t?t:void 0,alwaysShowCreateRow:o})})),be=(0,y.cn)((function(e){var n=e(H);if(!n)return null;var t=e(we).findIndex((function(e){return("file"===e.type||"dir"===e.type)&&e.path===n}));return-1!==t?t:null})),Ze=(0,y.cn)(null,(function(e,n,t){var r,i=e(be),o=e(H);if("INPUT"!==(null===(r=document.activeElement)||void 0===r?void 0:r.tagName)&&null!==i&&null!==o){var u=e(we);switch(t.key){case"ArrowDown":t.preventDefault();var a=A(u,{dir:"next",fromIndex:i});return void("dir"!==(null===a||void 0===a?void 0:a.type)&&"file"!==(null===a||void 0===a?void 0:a.type)||n(H,a.path));case"ArrowUp":t.preventDefault();var l=A(u,{dir:"previous",fromIndex:i});return void("dir"!==(null===l||void 0===l?void 0:l.type)&&"file"!==(null===l||void 0===l?void 0:l.type)||n(H,l.path));case"ArrowLeft":case"ArrowRight":t.preventDefault();var c=e(ve).get(o);if(!c)return;return void("ArrowLeft"===t.key&&c.expanded?n(Se,o):"ArrowRight"!==t.key||c.expanded||n(Ce,o));case"Enter":case" ":if("Enter"===t.key&&!e(ie))return;return e(ve).has(o)?void n(Te,o):void e(te).onFileSelect({event:t,path:o,type:"keydown"})}}})),xe=(0,y.cn)(null,(function(e,n,t){var r;t.path===(null!==(r=e(te).root)&&void 0!==r?r:E.Ql)&&n(ee,!0),n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n=t.path===E.Ql?null:t.path+"/",r=!0,i=!1,o=void 0;try{for(var u,a=t.children[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l,c=u.value,s=n?n+c.filename:c.filename,f=e.get(s);if(c.type===Z.Tv.Directory)f||e.set(s,{expanded:!1});else f&&(null===(l=f.disposeWatcher)||void 0===l||l.call(f),e.delete(s))}}catch(h){i=!0,o=h}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var d=e.get(t.path);d&&(d.children=t.children,d.loading=!1,d.error=void 0)}))}))})),Ee=(0,y.cn)(null,(function(e,n,t){var r;t.path===(null!==(r=e(te).root)&&void 0!==r?r:E.Ql)&&n(ee,!0),n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n,r=e.get(t.path);r&&(r.loading=!1,r.error=t.error,null===(n=r.disposeWatcher)||void 0===n||n.call(r),r.disposeWatcher=null)}))}))})),Se=(0,y.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t];n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n=!0,t=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,l=e.get(a);l&&(l.expanded=!1,l.loading=!1,l.disposeWatcher&&(l.disposeWatcher(),l.disposeWatcher=null))}}catch(c){t=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(t)throw i}}}))}))})),ke=(0,y.cn)(null,(function(e,n,t){n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n,r=e.get(t);r&&(null===(n=r.disposeWatcher)||void 0===n||n.call(r),e.delete(t))}))}))})),Ce=(0,y.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t],i=e(te).fs;n(ve,(function(e){return(0,x.ZP)(e,(function(e){var t=!0,o=!1,u=void 0;try{for(var a,l=function(){var t,r=a.value,o=null!==(t=e.get(r))&&void 0!==t?t:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return n(Ee,{path:r,error:e})},onChange:function(e){return n(xe,{path:r,children:e})},onMoveOrDelete:function(){return n(ke,r)}})},c=r[Symbol.iterator]();!(t=(a=c.next()).done);t=!0)l()}catch(s){o=!0,u=s}finally{try{t||null==c.return||c.return()}finally{if(o)throw u}}}))}))})),Te=(0,y.cn)(null,(function(e,n,t){var r=e(ve).get(t);if(!r)return n(ve,(function(e){return(0,x.ZP)(e,(function(e){e.set(t,{expanded:!1})}))})),void n(Ce,t);r.expanded?n(Se,t):n(Ce,t)})),Re=(0,y.cn)((function(e){return e(te).manageWidth?e(ee)?function(e){var n=e.rows,t=e.baseDepth,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=O({row:s,baseDepth:t}),d=f.depth,h=f.text,p=i.get(d);if(p){var v=p.get(s.type);v&&(null===v||void 0===v?void 0:v.length)>h.length||p.set(s.type,h)}else i.set(d,new Map([[s.type,h]]))}}catch(N){u=!0,a=N}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var g=!0,y=!1,w=void 0;try{for(var b,Z=i[Symbol.iterator]();!(g=(b=Z.next()).done);g=!0){var x=(0,m.Z)(b.value,2),E=x[0],S=x[1],k=!0,C=!1,T=void 0;try{for(var R,D=S[Symbol.iterator]();!(k=(R=D.next()).done);k=!0){var I=(0,m.Z)(R.value,2),A=I[0],P=I[1];r.push({depth:E,type:A,text:P})}}catch(N){C=!0,T=N}finally{try{k||null==D.return||D.return()}finally{if(C)throw T}}}}catch(N){y=!0,w=N}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw w}}return r}({rows:e(we),baseDepth:e(Q)}):[{type:"dir",text:R,depth:1}]:null})),De=(0,y.cn)(null,(function(e,n,t){var r=e(te).onCreateStart;r?r({parentPath:t.parentPath,fileType:t.fileType}):(n(Ce,t.parentPath),n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=t.fileType)}))})),n(H,null))})),Ie=(0,y.cn)(null,(function(e,n,t){n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n=e.get(t);n&&(n.create=void 0)}))}))})),Ae=(0,y.cn)(null,(function(e,n,t){var r={path:t.path,type:t.fileType};n(H,r.path),n(qe,{node:r}),n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=void 0)}))})),r.type===Z.Tv.Directory&&n(Ce,r.path)})),Pe=(0,y.cn)(new Map),Ne=(0,y.cn)(null),Oe=(0,y.cn)(!0),qe=(0,y.cn)(null,(function(e,n,t){var r=t.node,i=t.mode,o=e(we),u=e(Ne);n(Oe,!i),n(Pe,(function(e){return(0,x.ZP)(e,(function(e){!function(e,n){var t=n.node,r=n.rows,i=n.mode,o=n.anchor;if(!i)return e.clear(),void e.set(t.path,t.type);if("multi"===i&&e.has(t.path))e.delete(t.path);else if("multi"!==i){var u=t.type===Z.Tv.Directory?"dir":"file",a=r.findIndex((function(e){return e.type===u&&e.path===t.path}));if(-1!==a){var l=(null===o||void 0===o?void 0:o.type)===Z.Tv.Directory?"dir":"file",c=o?r.findIndex((function(e){return e.type===l&&e.path===o.path})):-1;if(-1!==c){var s=c<a?r.slice(c,a+1):r.slice(a,c+1),f=!0,d=!1,h=void 0;try{for(var p,v=r[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;"file"!==g.type&&"dir"!==g.type||(s.includes(g)?e.set(g.path,"file"===g.type?Z.Tv.File:Z.Tv.Directory):e.delete(g.path))}}catch(m){d=!0,h=m}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}}}}else e.set(t.path,t.type)}(e,{node:r,rows:o,mode:i,anchor:u})}))}));var a=e(Pe);if(!(a.size>1)){var l=!0,c=!1,s=void 0;try{for(var f,d=a[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var h=(0,m.Z)(f.value,2),p=h[0],v=h[1];n(Ne,{path:p,type:v})}}catch(g){c=!0,s=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}})),Le=(0,y.cn)(null,(function(e,n){n(Pe,new Map),n(Oe,!0),n(Ne,null)})),Be=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,i,o;return(0,b.__generator)(this,(function(u){switch(u.label){case 0:return r=e(te).fs,[4,Promise.all(t.map(function(){var e=(0,w.Z)((function(e){var n;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,r.readDir(e)];case 1:return[2,(n=t.sent()).error?n:{path:e,children:n.children,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return i=u.sent(),(o=i.filter((function(e){return null!==e.error}))).length?[2,{errors:o}]:(n(ve,(function(e){return(0,x.ZP)(e,(function(e){var n=!0,t=!1,r=void 0;try{for(var o,u=i[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;if(a.error)throw new Error("Unexpected error");var l=e.get(a.path);l?(l.loading=!1,l.expanded=!0,l.children=a.children,l.error=void 0):e.set(a.path,{loading:!1,expanded:!0,children:a.children,error:void 0})}}catch(c){t=!0,r=c}finally{try{n||null==u.return||u.return()}finally{if(t)throw r}}}))})),[2,{errors:null}])}}))}));return function(n,t,r){return e.apply(this,arguments)}}());var Ue=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,o,u,a,l,c,s,f,d;return(0,b.__generator)(this,(function(h){switch(h.label){case 0:r=e(ve),o=[],u=!0,a=!1,l=void 0;try{for(c=function(e){var n=e.split("/");return n.pop(),[E.Ql].concat((0,i.Z)(n.map((function(e,t){return n.slice(0,t+1).join("/")}))))}(t.path)[Symbol.iterator]();!(u=(s=c.next()).done);u=!0)f=s.value,(null===(d=r.get(f))||void 0===d?void 0:d.expanded)||o.push(f)}catch(p){a=!0,l=p}finally{try{u||null==c.return||c.return()}finally{if(a)throw l}}return o.length?[4,n(Be,o)]:[3,2];case 1:h.sent(),h.label=2;case 2:return n(qe,{node:t}),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),Ge=(0,y.cn)(null),Fe=(0,y.cn)(null,(function(e,n,t){var r=e(Ge);if(r)for(var i=e(we),o=0;o<i.length;o++){var u=i[o];if(("file"===u.type||"dir"===u.type)&&u.path===t){r.scrollToIndex(o);break}}}));function Me(e,n){if(n===e.path)return!1;var t=n+"/"+(0,S.UO)(e.path);return t!==e.path&&(!(0,D.yr)(e.path,n)&&!(0,D.yr)(t,e.path))}var _e,ze=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,i,o,u,a,l,c,s,f;return(0,b.__generator)(this,(function(d){switch(d.label){case 0:return r=e(ve).get(t.to),(i=null===r||void 0===r?void 0:r.children)?[3,2]:[4,e(te).fs.readDir(t.to)];case 1:if((o=d.sent()).error)return[2];i=o.children,d.label=2;case 2:if(!i)throw new Error("Expected children");return u=function(e,n,t){return e.reduce((function(e,r){var i=(0,S.UO)(r.path),o=null===t||void 0===t?void 0:t.find((function(e){return e.filename===i}));return o&&e.push({type:o.type,path:n===E.Ql?o.filename:n+"/"+o.filename}),e}),[])}(t.nodes,t.to,i),(a=function(e,n){var t=(0,S.RQ)(e);return t.every((function(e){return Me(e,n)}))?t.map((function(e){var t=(0,S.UO)(e.path);return{from:e,to:n===E.Ql?t:n+"/"+t}})):null}(t.nodes,t.to))?(l=e(te).fs,u.length?u.some((function(e){return a.some((function(n){var t=n.from;return(0,D.yr)(e.path,t.path)}))}))?[2]:t.overwrite?[4,Promise.all(u.map(function(){var e=(0,w.Z)((function(e){var n;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===Z.Tv.Directory?l.deleteDir(e.path):l.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:(null===(c=e(te).onConflicts)||void 0===c||c({type:"move",nodes:t.nodes,to:t.to,conflicts:u}),[2]):[3,4]):[2];case 3:if(s=d.sent(),s.filter(Boolean).length)return[2];d.label=4;case 4:return n(ye,a),[4,Promise.all(a.map(function(){var e=(0,w.Z)((function(e){var n,t,r;return(0,b.__generator)(this,(function(i){switch(i.label){case 0:return n=e.from,t=e.to,[4,n.type===Z.Tv.Directory?l.moveDir(n.path,t):l.moveFile(n.path,t)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:n,to:t}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 5:return f=d.sent(),n(ye,[]),f.filter(Boolean).length?[2]:(n(Pe,new Map(a.map((function(e){return[e.to,e.from.type]})))),[2])}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),We=t(22011),He=t(50968),je=t(74685);function Xe(e){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,w.Z)((function(e){var n,t,r,o,u,a,l,c,s,f,d,h;return(0,b.__generator)(this,(function(p){switch(p.label){case 0:return n=e.parentPath,t=e.overwrite,r=e.fs,o=e.files,u=e.shouldUseFileTransferAPI,a=e.onStart,l=e.onUpload,c=e.onError,s=e.onDone,f=function(){var e=(0,w.Z)((function(e){var n,i,o,a,s,f,d;return(0,b.__generator)(this,(function(h){switch(h.label){case 0:return n=e.targetPath,i=e.file,o=e.progress,t?[3,2]:[4,r.stat(n)];case 1:if(h.sent().exists)return a={file:i,path:n,error:_e.AlreadyExists},c(a),[2,a];h.label=2;case 2:s=null,h.label=3;case 3:return h.trys.push([3,5,,6]),[4,(0,je.pV)(i)];case 4:return s=h.sent(),[3,6];case 5:return h.sent(),f={file:i,path:n,error:_e.FileRead},c(f),[2,f];case 6:return d=We.Z.from(s),u?[4,r.transferFile(n,d,(function(e,n){o.current=n/e}))]:[3,8];case 7:return h.sent(),[3,10];case 8:return[4,r.writeFile(n,d)];case 9:h.sent(),h.label=10;case 10:return l({file:i,path:n}),[2,{path:n,file:i}]}}))}));return function(n){return e.apply(this,arguments)}}(),d=o.map((function(e){var t=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,He.u)(0),file:e}})),a(d),[4,Promise.all(d.map(f))];case 1:return h=p.sent(),s({parentPath:n,uploads:h.filter((function(e){return!("error"in e)})),errors:h.reduce((function(e,n){return"error"in n?(0,i.Z)(e).concat([n]):e}),[])}),[2]}}))})),Ke.apply(this,arguments)}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(_e||(_e={}));var Ve=t(7131),$e=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,o,u,a,l,c,s,f,d,h;return(0,b.__generator)(this,(function(p){switch(p.label){case 0:return r=e(te).fs,o=t.parentPath||E.Ql,u=e(ve).get(o),(a=null===u||void 0===u?void 0:u.children)?[3,2]:[4,r.readDir(o)];case 1:if((l=p.sent()).error)return[2];a=l.children,p.label=2;case 2:if(!a)throw new Error("Expected children");return c=(0,i.Z)(new Set(t.files.map((function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name})))),s=a.filter((function(e){return c.some((function(n){return n===e.filename}))})),(f=s.length?s.map((function(e){return{path:o===E.Ql?e.filename:o+"/"+e.filename,type:e.type}})):null)&&!t.overwrite?(null===(d=e(te).onConflicts)||void 0===d||d({type:"upload",files:t.files,to:o,conflicts:s.map((function(e){return{path:o===E.Ql?e.filename:o+"/"+e.filename,type:e.type}}))}),[2]):f?[4,Promise.all(f.map(function(){var e=(0,w.Z)((function(e){var n;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===Z.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:[3,4];case 3:if(h=p.sent(),h.filter(Boolean).length)return[2];p.label=4;case 4:return Xe({parentPath:t.parentPath,files:t.files,fs:r,shouldUseFileTransferAPI:!0,onStart:function(e){n(me,(function(n){return(0,x.ZP)(n,(function(n){var t=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value;n.push(a)}}catch(l){r=!0,i=l}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}}))}))},onUpload:function(e){n(me,(function(n){return(0,x.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onError:function(e){n(me,(function(n){return(0,x.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onDone:function(e){var n=e.errors,t=e.parentPath;n.length||Ve.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:t})}}),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),Ye=t(51467),Qe=t(17403),Je=t(74906),en=t(86763),nn=t.n(en),tn=t(52783),rn=Qe.Type.Enum(Z.Tv),on=Qe.Type.Object({filename:Qe.Type.String({minLength:1}),type:rn}),un=Qe.Type.Object({scrollOffset:Qe.Type.Number({minimum:0}),dirInfo:Qe.Type.Record(Qe.Type.String(),Qe.Type.Object({expanded:Qe.Type.Boolean(),children:Qe.Type.Array(on)}))});function an(e,n){return Je.Z.set(cn(e),n)}function ln(e){return n=Je.Z.get(cn(e)),tn.B4.Check(un,n)?{dirInfo:new Map(Object.entries(n.dirInfo)),scrollOffset:n.scrollOffset}:null;var n}function cn(e){return"repl:workspace:filetree:"+e}var sn=Qe.Type.Array(Qe.Type.String()),fn="repl:workspace:filetree:savedKeys";function dn(){var e=Je.Z.get(fn);return tn.B4.Check(sn,e)?e:null}var hn=(0,M.kv)(te,(function(e){return e.localCacheKey?cn(e.localCacheKey):null})),pn=(0,y.cn)(null,(function(e){var n,t=e(te),r=t.localCacheKey,i=t.filter;if(r){var o,u=null!==(o=null===(n=e(Ge))||void 0===n?void 0:n.scrollOffset)&&void 0!==o?o:0,a=e(ve),l=!1,c=!0,s=!1,f=void 0;try{for(var d,h=a[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=(0,m.Z)(d.value,2)[1].children;if(l=Boolean(null===p||void 0===p?void 0:p.length))break}}catch(T){s=!0,f=T}finally{try{c||null==h.return||h.return()}finally{if(s)throw f}}if(l){var v=function(e,n){var t={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var u,a=e.dirInfo[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,m.Z)(u.value,2),c=l[0],s=l[1],f=s.expanded,d=s.children;if(d){var h=d.filter(n);h.length&&(t.dirInfo[c]={expanded:f,children:h})}}}catch(T){i=!0,o=T}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t}({dirInfo:a,scrollOffset:u},i),g=cn(r),y=dn();if(y){var w=y.filter((function(e){return e!==g}));w.unshift(g);var b=w.splice(20),Z=!0,x=!1,E=void 0;try{for(var S,k=b[Symbol.iterator]();!(Z=(S=k.next()).done);Z=!0){var C=S.value;Je.Z.remove(C)}}catch(T){x=!0,E=T}finally{try{Z||null==k.return||k.return()}finally{if(x)throw E}}Je.Z.set(fn,w)}else Je.Z.set(fn,[g]);return an(r,v)}}}));var vn=(0,y.cn)(null),gn=(0,y.cn)(null,(function(e,n,t){var r=[t];if(!e(Oe)){var i=!0,o=!1,u=void 0;try{for(var a,l=e(Pe)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,m.Z)(a.value,2),s=c[0],f=c[1];t.path!==s&&r.push({path:s,type:f})}}catch(d){o=!0,u=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}}n(vn,(0,S.RQ)(r))}));function mn(){return(mn=(0,w.Z)((function(e,n){var t;return(0,b.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all(n.map((function(n){return n.type===Z.Tv.Directory?e.deleteDir(n.path):e.deleteFile(n.path)})))];case 1:return t=r.sent(),[2,{error:t.filter((function(e){return e.error})).length?"Something went wrong deleting files":null}]}}))}))).apply(this,arguments)}function yn(){var e=p(vn),n=g(te);(0,u.useEffect)((function(){return e.subscribe((function(e){if(e){var t=n().onDeleteNodes;t&&t({nodes:e,confirm:function(){return function(e,n){return mn.apply(this,arguments)}(n().fs,e)}})}}))}),[n,e])}function wn(e){var n=(0,u.useState)((function(){var n,t=(0,y.MT)();t.set(te,e);var r,i=null!==(n=e.root)&&void 0!==n?n:E.Ql,o=e.localCacheKey?ln(e.localCacheKey):null;o&&t.set($,o.scrollOffset);var u=null!==(r=null===o||void 0===o?void 0:o.dirInfo)&&void 0!==r?r:new Map;return u.has(i)||u.set(i,{expanded:!0}),t.set(ve,u),e.focusedPath&&t.set(H,e.focusedPath),{store:t,create:function(e,n){if(n)t.set(De,{parentPath:n,fileType:e});else{var r=i,o=t.get(Ne);(null===o||void 0===o?void 0:o.type)===Z.Tv.File?r=(0,S.Il)(o.path)||E.Ql:(null===o||void 0===o?void 0:o.type)===Z.Tv.Directory&&(r=o.path),t.set(De,{parentPath:r,fileType:e})}},setPresenceState:function(e){t.set(_,e)},setFileStatus:function(e){t.set(K,e)},rename:function(e){t.set(Y,e)},move:function(e){t.set(ze,e)},upload:function(e){t.set($e,e)},onLoad:function(n){var t=e.fs.watchDir(i,{onChange:function(){n({error:null}),t()},onError:function(e){n({error:e}),t()}});return t},select:function(e){return null===e?t.set(Le):t.set(Ue,e)},scrollToPath:function(e){return t.set(Fe,e)},hasLocalCache:Boolean(o),getChildren:function(e){var n,r;return null!==(r=null===(n=t.get(ve).get(e))||void 0===n?void 0:n.children)&&void 0!==r?r:null},getSelectedNode:function(){return t.get(Ne)},getSelectedNodes:function(){return t.get(Pe)},deleteNodes:function(e){t.set(gn,e)},collapse:function(e){return t.set(Se,e)},getExpandedDirs:function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.Ql,t=new Set,r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,m.Z)(u.value,2),c=l[0],s=l[1];if(c!==n&&s.expanded)(n===E.Ql||(0,D.yr)(n,c))&&t.add(c)}}catch(f){i=!0,o=f}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===t.size?null:t}(t.get(ve),e)}}})),t=n[0];(0,u.useEffect)((function(){t.store.set(te,e)}),[t.store,e]),(0,u.useEffect)((function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(ve)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=(0,m.Z)(i.value,2),a=u[0];u[1].expanded&&t.store.set(Ce,a)}}catch(l){n=!0,r=l}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(ve)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u,a=(0,m.Z)(i.value,2),c=(a[0],a[1]);null===(u=c.disposeWatcher)||void 0===u||u.call(c)}}catch(l){n=!0,r=l}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}),[t.store]);var r=(0,Ye.Z)(e.onLoad);return(0,u.useEffect)((function(){return t.onLoad((function(e){var n;return null===(n=r.current)||void 0===n?void 0:n.call(r,e)}))}),[t,r]),t}var bn=t(88965),Zn=t(61025),xn=t(26473),En=t(3715),Sn=t(81202),kn=t.n(Sn),Cn=t(86033),Tn=t(15608),Rn=t(85919),Dn=(0,t(86093).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay"]),In=Dn.cssVars,An=Dn.styleTokens,Pn={paddingLeft:An.horizontalPadding,paddingRight:An.horizontalPadding},Nn={"&& svg":{minWidth:An.iconSize,minHeight:An.iconSize,width:An.iconSize,height:An.iconSize}},On=[bn.l0.truncate,{fontSize:An.fontSize}],qn=t(94327),Ln=t(88149);function Bn(e){var n=e.fileName,t=e.parentPath,r=t===E.Ql?"":t+"/",i=r+n,o=i.split("/");return{pathPrefix:r,newFilePath:i,segments:o}}function Un(e){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,w.Z)((function(e){var n,t,r,i,o,u,a,l,c,s,f,d,h,p,v,g,y,w,Z;return(0,b.__generator)(this,(function(b){switch(b.label){case 0:if(n=e.fileName,t=e.parentPath,r=e.fs,n.startsWith("/"))return[2,"File names cannot include forward slashes"];i=Bn({fileName:n,parentPath:t}),o=i.pathPrefix,u=i.newFilePath,a=i.segments,l=!0,c=!1,s=void 0,b.label=1;case 1:b.trys.push([1,7,8,9]),f=Object.entries(a)[Symbol.iterator](),b.label=2;case 2:return(l=(d=f.next()).done)?[3,6]:(h=(0,m.Z)(d.value,2),p=h[0],v=h[1],g=Number(p),y=[],g!==a.length-1?[3,4]:[4,r.stat(u)]);case 3:b.sent().exists&&y.push((0,S.UO)(u)),b.label=4;case 4:return(w=(0,qn.z)({fileName:v,siblingNames:y,parentPath:o+a.slice(0,g).join("/")}))?[2,w]:[3,5];case 5:return l=!0,[3,2];case 6:return[3,9];case 7:return Z=b.sent(),c=!0,s=Z,[3,9];case 8:try{l||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}}))})),Gn.apply(this,arguments)}function Fn(e){var n=Bn({fileName:e.fileName,parentPath:e.parentPath}),t=n.pathPrefix,r=n.segments,i=!0,o=!1,u=void 0;try{for(var a,l=Object.entries(r)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,m.Z)(a.value,2),s=c[0],f=c[1],d=Number(s),h=(0,qn.z)({fileName:f,siblingNames:[],parentPath:t+r.slice(0,d).join("/")});if(h)return h}}catch(p){o=!0,u=p}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return null}function Mn(e,n){return e.shiftKey?"bulk":"altKey"===n&&e.altKey||"cmdOrCtrlKey"===n&&(0,Ln.j)(e)?"multi":void 0}var _n=(0,y.cn)(null,(function(e,n,t){var r=t.event,i=t.path;n(H,i);var o=e(te).multiselectModifierKey;n(qe,{node:{path:i,type:Z.Tv.Directory},mode:o?Mn(r,o):void 0}),n(H,i),r.shiftKey||r.altKey||(0,Ln.j)(r)||n(Te,i)}));function zn(){return h(j)}function Wn(e){return h(function(e){return(0,Rn.Z)((function(){var n;return(0,y.cn)((function(t){var r;return null!==(n=null===(r=t(j).get(e))||void 0===r?void 0:r.row)&&void 0!==n?n:null}))}),[e])}(e))}function Hn(){return{fontSize:p(oe),fontSizeSmall:p(he),iconSize:p(le),scrollHeight:p(W),horizontalPadding:p(ce),borderRadius:p(se),gutterWidth:p(pe),minHeight:p(ae),iconTextGap:p(fe)}}function jn(e){return h(function(e){return(0,Rn.Z)((function(){return(0,M.kv)(ve,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.loading)}))}),[e])}(e))}function Xn(e){return h(function(e){return(0,Rn.Z)((function(){return(0,M.kv)(ve,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.expanded)}))}),[e])}(e))}function Kn(e){return h((0,Rn.Z)((function(){return(0,M.kv)(H,(function(n){return n===e?0:-1}))}),[e]))}function Vn(){var e,n=(0,u.useRef)(null),t=h(we),r=function(){var e=g(we),n=g(oe);return(0,Rn.Z)((function(){return function(t){var r=e()[t];return r?ue(n(),r.type):0}}),[e,n])}(),o=g(te),a=p(be),l=(0,u.useRef)(h($)),c=(0,Cn.MG)({count:t.length,overscan:null!==(e=o().overscan)&&void 0!==e?e:100,getScrollElement:function(){return n.current},getItemKey:function(e){var n=t[e];return n?"error"===n.type?"error:"+n.dir+n.message:"divider"===n.type?"divider:"+n.dir+n.label:"emptyDir"===n.type?"emptyDir:"+n.dir:"create"===n.type?"create:"+n.dir:n.type+":"+n.path:""},estimateSize:r,rangeExtractor:function(e){var n=(0,Tn.MK)(e);return null===a.current||n.includes(a.current)||void 0===t[a.current]?n:(0,i.Z)(n).concat([a.current])}});(0,u.useEffect)((function(){l.current&&c.scrollToOffset(l.current)}),[c,l]);var s=v(ne),f=c.getVirtualItems(),d=c.getTotalSize();(0,u.useEffect)((function(){s({rows:f,scrollHeight:d})}),[s,f,d]);var m=h(ee);(0,u.useEffect)((function(){if(m){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout((function(){return e(a.current)})),a.subscribe(e)}}),[c,a,m]);var y=v(Ge);return(0,u.useEffect)((function(){y(c)}),[y,c]),{scrollRef:n,virtualizer:c}}function $n(e){var n=(0,Rn.Z)((function(){return(0,M.kv)(j,(function(n){var t,i=n.get(e);return i?{style:(t={},(0,r.Z)(t,In.rowHeight,i.height+"px"),(0,r.Z)(t,In.rowY,i.y+"px"),(0,r.Z)(t,In.rowLeftIndent,"calc(".concat(i.depth," * ").concat(An.gutterWidth,")")),t),depth:i.depth}:void 0}),kn())}),[e]);return h(n)}function Yn(e){var n=e.index,t=e.path,r=(0,u.useRef)(null),i=p(H);(0,u.useEffect)((function(){var e=function(e){var n;null===(n=r.current)||void 0===n||n.setAttribute("tabIndex",e.toString())},o=function(r){e(r?r===t?0:-1:0===n?0:-1)};return o(i.current),i.subscribe(o)}),[i,t,n]),(0,u.useEffect)((function(){var e=function(e){null!==n&&clearTimeout(n),e===t&&document.activeElement!==r.current&&(n=setTimeout((function(){var e;null===(e=r.current)||void 0===e||e.focus()}),50))},n=null;e(i.current);var o=i.subscribe(e);return function(){null!==n&&clearTimeout(n),o()}}),[i,t]);var o=v(H);return[r,o]}function Qn(){return v(Y)}var Jn=t(72006),et=t(4405),nt=t(22004),tt=t(35343),rt=t(39526),it=t(27773),ot=t(33722),ut=t(79824),at=t(6108),lt=t(53312),ct=t(63743),st=t(46861),ft=t(59254),dt=t(81962),ht={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var n=e.state;n.styles.popper.width="".concat(n.rects.reference.width,"px")},effect:function(e){var n=e.state;(0,dt.Z)(n.elements.reference,HTMLElement)&&(n.elements.popper.style.width="".concat(n.elements.reference.offsetWidth,"px"))}},pt=t(94979),vt=t(40447),gt=t(37268),mt=t(34335),yt=t(6190),wt=(0,M.kv)(te,(function(e){return e.autocomplete}));var bt=(0,Zn.X)({icon:[Nn,{marginRight:An.iconTextGap}],item:[Pn,bn.l0.flex.row,bn.l0.align.center,at.gU.listItem,{height:An.rowHeight}],text:[On,bn.l0.flex.growAndShrink(1)]});function Zt(e){var n=e.id,t=e.items,r=e.activeIndex,i=e.onSuggestion,u=e.fileType,a=e.innerRef;return(0,o.tZ)(xn.G,{tag:"ul",id:n,"aria-label":"Suggestions",innerRef:a,children:t.map((function(e,n){var t=n===r;return(0,o.BX)(xn.G,{id:e.value,tag:"li",role:"option","aria-selected":t,style:{backgroundColor:t?at.vb.interactiveBackground:void 0,color:t?bn.TV.foregroundDefault:bn.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:bt.item,children:[(0,o.tZ)(xn.G,{css:bt.icon,children:u===Z.Tv.Directory?(0,o.tZ)(tt.Z,{}):(0,o.tZ)(nt.Z,{path:e.value})}),(0,o.tZ)(yt.x,{css:bt.text,text:e.value,highlight:e.highlight,dimmed:!t})]},e.value)}))})}var xt=[An.horizontalPadding,An.iconSize,An.iconTextGap].join(" + "),Et=[at.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(xt,")"),paddingRight:An.horizontalPadding,fontSize:An.fontSize}];var St=(0,Zn.X)({root:[bn.l0.flex.row,Pn,{padding:An.horizontalPadding}],icon:[Nn,bn.l0.color.accentNegativeDefault,{marginRight:An.iconTextGap}],text:[{fontSize:An.fontSize},bn.l0.color.foregroundDimmer,bn.l0.flex.growAndShrink(1)]});function kt(e){return(0,o.BX)(xn.G,{css:St.root,children:[(0,o.tZ)(xn.G,{css:St.icon,children:(0,o.tZ)(ut.Z,{})}),(0,o.tZ)(xn.G,{css:St.text,children:e.message})]})}var Ct=(0,Zn.X)({root:[bn.l0.position.relative,bn.l0.flex.growAndShrink(1),{height:"100%"}],icon:[Nn,bn.l0.position.absolute,bn.l0.left(An.horizontalPadding),bn.l0.top("50%"),{transform:"translateY(-50%)"}],input:Et,inputLoading:[Et,pt.p.backgroundPulse()],menu:[bn.l0.overflow("hidden"),{borderRadius:An.borderRadius,border:"1px solid",borderColor:bn.TV.outlineDefault}],label:[bn.l0.visuallyHidden]});function Tt(e){var n=(0,u.useId)(),t=(0,u.useId)(),i=function(){var e=(0,u.useRef)(null),n=Hn();(0,En.j)(e,n.fontSize,(function(e){return(0,r.Z)({},In.fontSize,e+"px")})),(0,En.j)(e,n.iconTextGap,(function(e){return(0,r.Z)({},In.iconTextGap,e+"px")})),(0,En.j)(e,n.borderRadius,(function(e){return(0,r.Z)({},In.borderRadius,e+"px")})),(0,En.j)(e,n.horizontalPadding,(function(e){return(0,r.Z)({},In.horizontalPadding,e+"px")})),(0,En.j)(e,n.iconSize,(function(e){return(0,r.Z)({},In.iconSize,e+"px")})),(0,En.j)(e,n.fontSize,(function(e){return(0,r.Z)({},In.rowHeight,ue(e,"file")+"px")})),(0,En.j)(e,n.iconTextGap,(function(e){return(0,r.Z)({},In.iconTextGap,e+"px")}));var t=(0,u.useState)(null),i=t[0],o=t[1],a=(0,u.useState)(null),l=a[0],c=a[1],s=(0,mt.D)(i,l,{modifiers:[{name:"offset",options:{offset:[0,4]}},ht],placement:"bottom-start"}),f=s.styles,d=s.attributes;return{menuRef:(0,ct.l)(e,c),menuAnchorRef:o,styles:f.popper,attributes:d.popper}}(),a=function(e){var n=e.onSuggestion,t=e.siblings,r=e.value,i=function(){c({items:[],activeIndex:null})},o=h(wt),a=(0,u.useState)({items:[],activeIndex:null}),l=a[0],c=a[1],s=(0,Ye.Z)(t),f=(0,Ye.Z)(r),d=(0,u.useTransition)()[1],p=o?function(e){d((function(){var n=o(e);c((function(e){return(0,x.ZP)(e,(function(e){e.items=n.filter((function(e){return e.value!==f.current&&!s.current.some((function(n){return n.filename===e.value}))}))}))}))}))}:null;return{items:l.items.length?l.items:null,activeIndex:l.activeIndex,query:p,onKeyDown:function(e){if("Enter"===e.key){var t=null!==l.activeIndex?l.items[l.activeIndex]:null;if(!t)return;return e.preventDefault(),n(t.value),i(),!0}return"ArrowDown"===e.key?(e.preventDefault(),c((function(e){return(0,x.ZP)(e,(function(e){null===e.activeIndex||e.activeIndex>e.items.length-1?e.activeIndex=0:e.activeIndex++}))})),!0):"ArrowUp"===e.key?(e.preventDefault(),c((function(e){return(0,x.ZP)(e,(function(e){null!==e.activeIndex?0!==e.activeIndex?e.activeIndex--:e.activeIndex=null:e.activeIndex=e.items.length-1}))})),!0):void 0},clear:i}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),l=g(Ge),c=(0,u.useState)(!0),s=c[0],f=c[1],d=(0,u.useRef)(null);(0,u.useEffect)((function(){var e;if(d.current){var n=null===(e=l())||void 0===e?void 0:e.scrollElement;if(n)return(0,ft.j)(d.current,(function(){return f(!0),function(){return f(!1)}}),{root:n})}}),[l]);var p=s&&Boolean(e.error||a.items),v=a.items&&a.activeIndex?a.items[a.activeIndex]:void 0,m=!e.error&&a.items?a.items:null,y=(0,u.useRef)(null),w=a.clear,b=(0,st.Z)((function(e){var n;(null===(n=y.current)||void 0===n?void 0:n.contains(e.target))||w()}),[w]);return(0,o.BX)(o.HY,{children:[(0,o.tZ)("label",{css:Ct.label,htmlFor:n,children:"file name"}),(0,o.BX)(xn.G,{css:Ct.root,innerRef:(0,ct.l)(y,i.menuAnchorRef),children:[(0,o.tZ)(xn.G,{css:Ct.icon,children:e.fileType===Z.Tv.Directory?(0,o.tZ)(tt.Z,{}):(0,o.tZ)(nt.Z,{path:e.value})}),(0,o.tZ)("input",{"aria-controls":a.query?t:void 0,"aria-expanded":a.items?"true":"false","aria-activedescendant":null===v||void 0===v?void 0:v.value,role:a.query?"combobox":void 0,id:n,ref:(0,ct.l)(e.inputRef,d),css:e.loading?Ct.inputLoading:Ct.input,value:e.value,onChange:e.loading?void 0:function(n){var t;e.onChange(n),null===(t=a.query)||void 0===t||t.call(a,{input:n.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(n){a.onKeyDown(n)||e.onKeyDown(n)},onBlur:m?void 0:e.onBlur})]}),(0,o.tZ)(vt.h,{children:(0,o.BX)(gt.Tg,(0,et.Z)((0,Jn.Z)({css:Ct.menu,elevated:!0,innerRef:i.menuRef,style:(0,et.Z)((0,Jn.Z)({},i.styles),{display:p?"block":"none"})},i.attributes),{children:[e.error?(0,o.tZ)(kt,{message:e.error}):null,m?(0,o.tZ)(Zt,{id:t,innerRef:b,items:m,activeIndex:a.activeIndex,onSuggestion:function(n){e.onSuggestion(n),w()},fileType:e.fileType}):null]}))})]})}var Rt=(0,Zn.X)({createFilePicker:[bn.l0.align.center,bn.l0.rowWithGap(4),{fontSize:An.fontSize,paddingRight:An.horizontalPadding,paddingLeft:An.horizontalPadding}],button:[bn.l0.reset.button,bn.l0.p(2),at.gU.filled,bn.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[On,bn.l0.color.foregroundDimmest],label:[bn.l0.visuallyHidden]});function Dt(e){var n=function(e){var n,t,r=v(De),i=v(Ie),o=v(Ae),a=(0,u.useState)(""),l=a[0],c=a[1],s=g(te),f=(0,u.useState)(!1),d=f[0],p=f[1],m=(0,u.useState)(null),y=m[0],x=m[1],S=(0,Rn.Z)((function(){return(0,M.kv)(ve,(function(n){return n.get(e)}))}),[e]),k=(0,Rn.Z)((function(){return(0,M.kv)(S,(function(e){return null!==(n=null===e||void 0===e?void 0:e.create)&&void 0!==n?n:null}))}),[S]),C=h((0,Rn.Z)((function(){return(0,M.kv)(S,(function(e){return null!==(t=null===e||void 0===e?void 0:e.children)&&void 0!==t?t:null}))}),[S])),T=h(k),R=function(){var n=(0,w.Z)((function(n){var t,r,i,u,a,l,f,d;return(0,b.__generator)(this,(function(h){switch(h.label){case 0:return T?(i=s().fs,u=null,0!==n.length?[3,1]:(u="File names cannot be empty",[3,4])):[2];case 1:return n.includes("/")?[4,Un({fileName:n,parentPath:e,fs:i})]:[3,3];case 2:return u=h.sent(),[3,4];case 3:u=(0,qn.z)({fileName:n,siblingNames:null!==(a=null===C||void 0===C?void 0:C.map((function(e){return e.filename})))&&void 0!==a?a:[],parentPath:e}),h.label=4;case 4:return u?(x(u),[2]):(l=e===E.Ql?null:e+"/",f=l?l+n:n,p(!0),T!==Z.Tv.Directory?[3,6]:[4,i.createDir(f)]);case 5:return d=h.sent(),[3,8];case 6:return[4,i.writeFile(f,new We.Z(""))];case 7:d=h.sent(),h.label=8;case 8:return d.error?(x("Something went wrong"),[2]):(p(!1),c(""),o({parentPath:e,path:f,fileType:T}),null===(r=(t=s()).onCreate)||void 0===r||r.call(t,{path:f,type:T}),[2])}}))}));return function(e){return n.apply(this,arguments)}}(),D=y;if(!D&&l.includes("/"))D=Fn({fileName:l,parentPath:e});else if(!D){var I;D=(0,qn.z)({fileName:l,siblingNames:null!==(I=null===C||void 0===C?void 0:C.map((function(e){return e.filename})))&&void 0!==I?I:[],parentPath:e})}return{value:l,setValue:c,fileType:T,create:R,creating:d,error:D,cancel:(0,Rn.Z)((function(){return function(){return i(e)}}),[e,i]),start:(0,Rn.Z)((function(){return function(n){return r({parentPath:e,fileType:n})}}),[e,r]),siblings:C}}(e.dir),t=(0,u.useRef)(null);return(0,u.useEffect)((function(){var e;n.fileType&&(null===(e=t.current)||void 0===e||e.focus())}),[n.fileType]),n.fileType?(0,o.tZ)(Tt,{siblings:n.siblings||[],type:"create",inputRef:t,loading:n.creating,error:n.error,value:n.value,fileType:n.fileType,onBlur:function(){n.cancel()},onChange:function(e){n.setValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&n.create(e.currentTarget.value):n.cancel()},onSuggestion:function(e){n.setValue(e),n.create(e)}}):(0,o.tZ)(It,{create:n.start})}function It(e){return(0,o.BX)(xn.G,{css:Rt.createFilePicker,children:[(0,o.tZ)(xn.G,{css:Rt.text,children:"Add a"}),(0,o.tZ)(xn.G,{tag:"button",css:Rt.button,onClick:function(){return e.create(Z.Tv.File)},children:"file"}),(0,o.tZ)(xn.G,{css:Rt.text,children:"or "}),(0,o.tZ)(xn.G,{tag:"button",css:Rt.button,onClick:function(){return e.create(Z.Tv.Directory)},children:"folder"})]})}var At=t(75205),Pt=t(23271),Nt=t(46995),Ot=t(6191),qt=t(30826),Lt=t.n(qt),Bt=t(69296),Ut=t(10422),Gt=t(90843),Ft=t(33024),Mt=t.n(Ft);function _t(e,n,t){return Math.floor(Math.min(n,Math.max(e,t)))}var zt=(0,y.cn)(0),Wt=(0,y.cn)(null),Ht=(0,y.cn)((function(e){var n=e(Wt);if(null===n)return null;var t=e(j),r=-1!==n?t.get(n):null;return r&&r.depth>0||"dir"===(null===r||void 0===r?void 0:r.row.type)?function(e,n){var t=e.get(n);if(!t)return null;var r=0,i=t.height,o="dir"===t.row.type?t.depth+1:t.depth;if("dir"===t.row.type)o=t.depth+1,r=t.y;else{o=t.depth;for(var u=n-1;u>=0;u--){var a=e.get(u);if(!a)break;if("dir"===a.row.type&&("file"===t.row.type||"upload"===t.row.type?L(a.row.path,t.row.path):a.row.path===t.row.dir)){i+=a.height,r=a.y;break}a.depth>=t.depth&&(i+=a.height)}}for(var l=n+1;l<e.size;l++){var c=e.get(l);if(!c)break;if(c.depth<=("dir"===t.row.type?t.depth:t.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(t,n):{y:e(zt),depth:1,height:e(z).height-8}})),jt="(".concat(An.dropPreviewDepth," - 1) * ").concat(An.gutterWidth),Xt=(0,Zn.X)({root:[bn.l0.position.absolute,bn.l0.top(0),bn.l0.left(0),bn.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(jt,"), ").concat(An.dropPreviewY,")"),width:"calc(100% - ".concat(jt,")"),height:An.dropPreviewHeight,opacity:An.dropPreviewOpacity,outline:"1px dashed ".concat(An.statusColor),outlineOffset:-1}]}),Kt=(0,u.memo)((function(){var e,n,t,i=p(Ht),a=p(ir),l=p(rr),c=(0,u.useRef)(null);(0,En.j)(c,i,(function(i){var o;return o={},(0,r.Z)(o,In.dropPreviewY,(null!==(e=null===i||void 0===i?void 0:i.y)&&void 0!==e?e:0)+"px"),(0,r.Z)(o,In.dropPreviewHeight,(null!==(n=null===i||void 0===i?void 0:i.height)&&void 0!==n?n:0)+"px"),(0,r.Z)(o,In.dropPreviewDepth,null!==(t=null===i||void 0===i?void 0:i.depth.toString())&&void 0!==t?t:"0"),o})),(0,En.j)(c,l,(function(e){return(0,r.Z)({},In.dropPreviewOpacity,e?"1":"0")})),(0,En.j)(c,a,(function(e){return(0,r.Z)({},In.statusColor,e?bn.TV.accentPrimaryDefault:bn.TV.accentNegativeDefault)}));var s=(0,Gt.T)();return(0,o.tZ)(xn.G,{style:{transition:s?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:c,css:Xt.root})})),Vt=(0,y.cn)(null,(function(e,n,t){if(null!==t){var r=!0,i=!1,o=void 0;try{for(var u,a=e(j)[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,m.Z)(u.value,2),c=l[0],s=l[1];if(!(t.y<s.y)&&!(t.y>s.y+s.height))return n(Wt,c),s}}catch(f){i=!0,o=f}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}n(Wt,-1)}})),$t=Qe.Type.Object({type:Qe.Type.Literal("nodes"),width:Qe.Type.Number(),height:Qe.Type.Number(),nodes:Qe.Type.Array(Qe.Type.Object({path:Qe.Type.String(),type:Qe.Type.Enum(Z.Tv)}))});function Yt(){var e=v(Vt),n=v(Wt),t=(0,u.useRef)(null),r=(0,u.useRef)(null),i=(0,u.useRef)(null),o=g(zt),a=v($e),l=v(ze),c=v(ir),s=(0,u.useRef)(null),f=g(ve),d=g(X),p=v(z),y=v(Ce),w=h(ie),b=(0,m.Z)((0,At.L)((function(){return{accept:[Z.Tv.File,Z.Tv.Directory,Ot.FILE],canDrop:function(){return!0},hover:function(n,u){var a=i.current;if(a){r.current&&function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=t.scrollZoneSize,i=t.scrollVelocity,o=t.scrollUpdateThrottle,u=Lt()((function(){var t=n.getClientOffset();if(!t)return[0,0];var o=t.x,u=t.y,a=e.getBoundingClientRect(),l=a.x,c=a.y,s=a.width,f=a.height,d=Math.min(s/2,r.w),h=Math.min(f/2,r.h),p=[[c,c+h],[c+f-h,c+f]],v=function(e,n){var t=(0,m.Z)(n,2),r=t[0],i=t[1];return Mt()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):Mt()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[v(o,[[l,l+d],[l+s-d,l+s]])*i.x,v(u,p)*i.y]}),o,{trailing:!1})();if(u){var a=(0,m.Z)(u,2),l=a[0],c=a[1];if(0!==l||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,h=e.scrollHeight,p=e.clientWidth,v=e.clientHeight;requestAnimationFrame((function(){e.scrollTop=_t(0,d-p,s+l),e.scrollTop=_t(0,h-v,f+c)}))}}}(r.current,u);var l=u.getClientOffset();if(l){var h,p=e({x:l.x-a.x,y:l.y-a.y+o()});p?"file"===p.row.type||"upload"===p.row.type?t.current=(0,S.Il)(p.row.path)||E.Ql:"dir"===p.row.type?t.current=p.row.path:t.current=p.row.dir:t.current=d();var v="nodes"!==n.type||(0,S.RQ)(n.nodes).every((function(e){return Me(e,null!==(h=t.current)&&void 0!==h?h:d())}));if(c(v),"dir"===(null===p||void 0===p?void 0:p.row.type)){var g=p.row.path;if(s.current){if(s.current.dir===g)return;clearTimeout(s.current.timer),s.current=null}if(v){var w=setTimeout((function(){var e;(null===(e=f().get(g))||void 0===e?void 0:e.expanded)||y(g)}),200);s.current={dir:g,timer:w}}}else s.current&&(clearTimeout(s.current.timer),s.current=null)}}},drop:function(e,n){var r,i=null!==(r=t.current)&&void 0!==r?r:d();if("nodes"===e.type)return l({to:i,nodes:e.nodes}),void(t.current=null);e.dirContent.then((function(e){a({parentPath:i===E.Ql?void 0:i,files:e.filter(Boolean)})})),t.current=null},collect:function(e){return{isOver:e.isOver()}}}}),[]),2),x=b[0].isOver,k=b[1],C=v(rr);(0,u.useEffect)((function(){if(C(x),x){var e,o=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();return i.current=o?{x:o.x,y:o.y}:null,void(o&&p({width:o.width,height:o.height}))}s.current&&(clearTimeout(s.current.timer),s.current=null),t.current=null,n(null)}),[C,x,n,p]);var T=v(zt);return(0,u.useEffect)((function(){var e=r.current;if(e){var n=Lt()((function(){T(e.scrollTop)}),200);return e.addEventListener("scroll",n),function(){n.cancel(),e.removeEventListener("scroll",n)}}}),[T]),{dropRef:w?void 0:k,containerRef:r}}var Qt=(0,y.cn)(null,(function(e,n,t){n(Pe,(function(e){return(0,x.ZP)(e,(function(e){e.set(t.path,t.type)}))}));var r=[t];if(e(Oe))return r;var i=!0,o=!1,u=void 0;try{for(var a,l=e(Pe)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,m.Z)(a.value,2),s=c[0],f=c[1];s!==t.path&&r.push({path:s,type:f})}}catch(d){o=!0,u=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return r}));function Jt(e){var n=v(Wt),t=v(Qt),r=h(ie),i=(0,u.useRef)(null),o=(0,m.Z)((0,Pt.c)({type:e.type,item:function(){var n,r,o=t(e),u=null!==(r=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:u.width,height:u.height}},collect:function(n){var t=n.getItem();return{isDragging:Boolean("nodes"===(null===t||void 0===t?void 0:t.type)&&t.nodes.some((function(n){return n.path===e.path})))}},end:function(){n(null)}}),3),a=o[0],l=o[1],c=o[2],s=a.isDragging;return(0,Bt.K)(c),{isDragging:s,dragRef:r?void 0:l,sizeRef:i}}var er=(0,Zn.X)({root:[bn.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(An.dragPreviewX,", ").concat(An.dragPreviewY,")"),pointerEvents:"none"}],item:[bn.l0.backgroundColor.backgroundHighest,bn.l0.flex.row,bn.l0.align.center,bn.l0.shadow(3),Pn,{height:An.rowHeight,borderRadius:An.borderRadius}],icon:[Nn,{marginRight:An.iconTextGap}],text:[On,bn.l0.flex.growAndShrink(1),{color:An.statusColor}],count:[On,bn.l0.backgroundColor.accentPrimaryDimmest,bn.l0.color.accentPrimaryStrongest,bn.l0.fontWeight.medium,bn.l0.position.absolute,bn.l0.left("calc(50% - 4px)"),bn.l0.top("calc(100% - 4px)"),bn.l0.borderRadius("full"),bn.l0.px(4),bn.l0.center,{fontSize:An.fontSizeSmall}]}),nr=(0,u.memo)((function(e){var n=(0,u.useRef)(null),t=Hn(),i=p(tr);return(0,En.j)(n,i,(function(e){var n;return n={},(0,r.Z)(n,In.dragPreviewX,(e?e.x:0)+"px"),(0,r.Z)(n,In.dragPreviewY,(e?e.y:0)+"px"),n})),(0,En.j)(n,t.horizontalPadding,(function(e){return(0,r.Z)({},In.horizontalPadding,e+"px")})),(0,En.j)(n,t.fontSize,(function(e){return(0,r.Z)({},In.fontSize,e+"px")})),(0,En.j)(n,t.fontSizeSmall,(function(e){return(0,r.Z)({},In.fontSizeSmall,e+"px")})),(0,En.j)(n,t.iconSize,(function(e){return(0,r.Z)({},In.iconSize,e+"px")})),(0,En.j)(n,t.iconTextGap,(function(e){return(0,r.Z)({},In.iconTextGap,e+"px")})),(0,En.j)(n,t.borderRadius,(function(e){return(0,r.Z)({},In.borderRadius,e+"px")})),(0,En.j)(n,t.gutterWidth,(function(e){return(0,r.Z)({},In.gutterWidth,e+"px")})),(0,o.tZ)(xn.G,{innerRef:n,css:er.root,children:(0,o.BX)(xn.G,{css:er.item,style:{width:e.width,height:e.height},children:[(0,o.tZ)(xn.G,{css:er.icon,children:e.type===Z.Tv.File?(0,o.tZ)(nt.Z,{path:e.path}):(0,o.tZ)(tt.Z,{})}),(0,o.tZ)(xn.G,{css:er.text,children:(0,S.UO)(e.path)}),e.count>1?(0,o.tZ)(xn.G,{css:er.count,children:e.count}):null]})})})),tr=(0,y.cn)(null),rr=((0,y.cn)((function(e){return null!==e(tr)})),(0,y.cn)(!1)),ir=(0,y.cn)(!1);function or(){var e=(0,Nt.f)((function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}})),n=e.isDragging,t=e.item,r=e.currentOffset,i=v(tr);if((0,u.useEffect)((function(){i(r?{x:r.x,y:r.y}:null)}),[i,r]),!n)return null;if(!tn.B4.Check($t,t))return null;var a=t.nodes,l=t.width,c=t.height,s=(0,m.Z)(a,1)[0];return s?(0,Ut.createPortal)((0,o.tZ)(nr,{type:s.type,path:s.path,count:a.length,width:l,height:c}),document.body):null}var ur=(0,Zn.X)({root:[{marginLeft:"auto",paddingLeft:An.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-cirlce":{strokeDashoffset:An.strokeDashoffset}}]});function ar(e){var n=h(oe)/2,t=n/2,i=2*t*Math.PI,a=(0,u.useRef)(null);return(0,En.j)(a,e.progress,(function(e){return(0,r.Z)({},In.strokeDashoffset,(i-e*i).toString())})),(0,o.tZ)(xn.G,{innerRef:a,css:ur.root,children:(0,o.BX)("svg",{css:ur.svg,height:2*n,width:2*n,children:[(0,o.tZ)("circle",{fill:bn.TV.backgroundHigher,r:n,cx:n,cy:n}),(0,o.tZ)("circle",{className:"inner-cirlce",stroke:bn.TV.foregroundDimmest,fill:"transparent",strokeWidth:n,strokeDasharray:i+" "+i,r:t,cx:n,cy:n})]})})}var lr,cr,sr,fr=t(87803),dr=(lr={},(0,r.Z)(lr,fr.h.ADDED,"A"),(0,r.Z)(lr,fr.h.UNTRACKED,"A"),(0,r.Z)(lr,fr.h.MODIFIED,"M"),(0,r.Z)(lr,fr.h.DELETED,"D"),(0,r.Z)(lr,fr.h.RENAMED,"R"),(0,r.Z)(lr,fr.h.COPIED,"C"),lr),hr=(cr={},(0,r.Z)(cr,fr.h.ADDED,bn.TV.greenDimmest),(0,r.Z)(cr,fr.h.UNTRACKED,bn.TV.greenDimmest),(0,r.Z)(cr,fr.h.MODIFIED,bn.TV.yellowDimmest),(0,r.Z)(cr,fr.h.DELETED,bn.TV.redDimmest),(0,r.Z)(cr,fr.h.RENAMED,bn.TV.tealDimmest),(0,r.Z)(cr,fr.h.COPIED,bn.TV.limeDimmest),cr),pr=(sr={},(0,r.Z)(sr,fr.h.ADDED,bn.TV.greenStrongest),(0,r.Z)(sr,fr.h.UNTRACKED,bn.TV.greenStrongest),(0,r.Z)(sr,fr.h.MODIFIED,bn.TV.yellowStrongest),(0,r.Z)(sr,fr.h.DELETED,bn.TV.redStrongest),(0,r.Z)(sr,fr.h.RENAMED,bn.TV.tealStrongest),(0,r.Z)(sr,fr.h.COPIED,bn.TV.limeStrongest),sr);function vr(e){return e===fr.h.ADDED||e===fr.h.UNTRACKED||e===fr.h.MODIFIED||e===fr.h.DELETED||e===fr.h.RENAMED||e===fr.h.COPIED}var gr={color:An.statusColor,fontSize:An.fontSizeSmall,minWidth:An.dirStatusIconSize,height:An.dirStatusIconSize},mr=(0,Zn.X)({fileIcon:[bn.l0.fontWeight.bold,bn.l0.px(2),bn.l0.center,gr],directoryCountIcon:[bn.l0.fontWeight.medium,bn.l0.borderRadius(4),bn.l0.px(2),bn.l0.center,gr,{backgroundColor:An.statusBackgroundColor}]});function yr(e){return(0,o.tZ)(xn.G,{css:mr.fileIcon,children:(0,o.tZ)(xn.G,{children:e.text})})}function wr(e){return(0,o.tZ)(xn.G,{css:mr.directoryCountIcon,children:(0,o.tZ)(xn.G,{children:e.count})})}function br(e){return h((0,Rn.Z)((function(){return(0,M.kv)(K,(function(n){return n?function(e,n){var t=null===e||void 0===e?void 0:e.get(n);if(!t)return null;var r=null;return t.worktree!==fr.h.UNMODIFIED?r=t.worktree:t.index!==fr.h.UNMODIFIED&&(r=t.index),r&&vr(r)?{color:pr[r],text:dr[r]}:null}(n,e):null}),kn())}),[e]))}function Zr(e){var n=(0,Rn.Z)((function(){return(0,M.kv)(K,(function(n){return n?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,m.Z)(u.value,2),c=l[0],s=l[1],f=s.index,d=s.worktree;(0,D.yr)(n,c)&&t.push({path:c,index:f,worktree:d})}}catch(v){i=!0,o=v}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===t.length)return null;var h=t.every((function(e){return e.index===fr.h.ADDED||e.worktree===fr.h.UNTRACKED}))?fr.h.ADDED:fr.h.MODIFIED;if(!vr(h))return null;var p=t.length;return{color:pr[h],backgroundColor:hr[h],count:p}}(n,e):null}),kn())}),[e]);return h(n)}function xr(e){var n=(0,m.Z)(function(e){var n=g(te),t=(0,u.useState)(null),r=t[0],i=t[1],o=(0,S.Il)(e.path)||E.Ql,a=(0,S.UO)(e.path),l=v(V),c=v(H),s=(0,u.useState)(a),f=s[0],d=s[1],p=(0,u.useState)(!1),m=p[0],y=p[1],x=(0,Rn.Z)((function(){return(0,M.kv)(ve,(function(e){var n;return null===(n=e.get(o))||void 0===n?void 0:n.children}))}),[o]),k=f!==a,C=h(x),T=null;if(k&&f.includes("/"))T=Fn({fileName:f,parentPath:o});else if(k){var R;T=(0,qn.z)({fileName:f,siblingNames:null!==(R=null===C||void 0===C?void 0:C.map((function(e){return e.filename})))&&void 0!==R?R:[],parentPath:o})}var D=function(){var t=(0,w.Z)((function(t){var r,u,s,f,d,h,p;return(0,b.__generator)(this,(function(v){switch(v.label){case 0:return T?[2]:t&&t!==a?(r=n().fs,u=null,t.includes("/")?[4,Un({fileName:t,parentPath:o,fs:r})]:[3,2]):[2];case 1:return u=v.sent(),[3,3];case 2:u=(0,qn.z)({fileName:t,siblingNames:null!==(s=null===C||void 0===C?void 0:C.map((function(e){return e.filename})))&&void 0!==s?s:[],parentPath:o}),v.label=3;case 3:return u?(i(u),[2]):(y(!0),f=o===E.Ql?null:o+"/",d=f?f+t:t,(h=(0,S.Il)(d)||E.Ql)===E.Ql?[3,6]:[4,r.stat(h)]);case 4:return v.sent().exists?[3,6]:[4,r.createDir(h)];case 5:v.sent(),v.label=6;case 6:return e.type!==Z.Tv.Directory?[3,8]:[4,r.moveDir(e.path,d)];case 7:return p=v.sent(),[3,10];case 8:return[4,r.moveFile(e.path,d)];case 9:p=v.sent(),v.label=10;case 10:return p.error?(i("Something went wrong"),y(!1),[2]):(l(null),c(d),[2])}}))}));return function(e){return t.apply(this,arguments)}}();return[{canRename:Boolean(f)&&k&&!T,value:f,renaming:m,error:r||T,siblings:C},{setValue:d,rename:D,cancel:function(){l(null),c(e.path)}}]}({path:e.path,type:e.fileType}),2),t=n[0],r=n[1],i=r.setValue,a=r.rename,l=r.cancel,c=(0,u.useRef)(null),s=(0,u.useRef)(t.value);return(0,u.useEffect)((function(){if(c.current){var e=s.current;if(e){var n=e.lastIndexOf(".");-1===n&&(n=e.length),c.current.focus(),c.current.setSelectionRange(0,n)}}}),[]),(0,o.tZ)(Tt,{siblings:t.siblings?t.siblings.filter((function(n){return n.filename!==(0,S.UO)(e.path)})):[],type:"rename",inputRef:c,loading:t.renaming,error:t.error,value:t.value,fileType:e.fileType,onBlur:function(e){t.canRename?a(e.currentTarget.value):t.error||l()},onChange:function(e){i(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&(t.canRename?a(e.currentTarget.value):t.error||l()):l()},onSuggestion:function(e){i(e),a(e)}})}var Er=t(66777),Sr=[bn.l0.position.absolute,bn.l0.top(0),bn.l0.left(0),{width:"calc(100% - ".concat(An.rowLeftIndent,")"),height:An.rowHeight,transform:"translateY(".concat(An.rowY,")"),marginLeft:An.rowLeftIndent}],kr=(0,Zn.X)({divider:(0,i.Z)(Sr).concat([Pn,bn.l0.flex.growAndShrink(1),bn.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:bn.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[bn.l0.truncate,bn.l0.color.foregroundDimmer,{fontSize:An.fontSizeSmall}],error:(0,i.Z)(Sr).concat([bn.l0.rowWithGap(4),bn.l0.align.center,Pn]),emptyDir:(0,i.Z)(Sr).concat([Pn,bn.l0.color.foregroundDimmest,bn.l0.justify.center,{paddingLeft:An.iconSize,paddingRight:An.horizontalPadding}]),row:(0,i.Z)(Sr).concat([bn.l0.flex.growAndShrink(1),bn.l0.flex.row,bn.l0.align.center,at.gU.nofill,{backgroundColor:An.nodeBackgroundColor,borderRadius:An.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+bn.TV.accentPrimaryDefault,zIndex:1},"@media (hover: hover)":(0,r.Z)({},In.contextMenuButtonDisplay,"none"),"&:hover, &:active, &:focus":(0,r.Z)({},In.contextMenuButtonDisplay,"flex"),transitionDuration:"0ms"}]),rowContent:[bn.l0.flex.row,bn.l0.align.center,bn.l0.flex.growAndShrink(1),Pn],uploadRow:(0,i.Z)(Sr).concat([bn.l0.flex.growAndShrink(1),bn.l0.align.center,bn.l0.flex.row,bn.l0.align.center,Pn,{backgroundColor:An.nodeBackgroundColor,borderRadius:An.borderRadius}]),createRow:(0,i.Z)(Sr).concat([bn.l0.justify.center]),icon:[Nn,{marginRight:An.iconTextGap}],fileInput:[bn.l0.flex.row,bn.l0.align.center],text:[On,bn.l0.flex.growAndShrink(1),{color:An.statusColor}],contextMenuButton:[bn.l0.reset.button,bn.l0.height("100%"),bn.l0.center,bn.l0.cursor.pointer,at.gU.filled,Nn,{display:An.contextMenuButtonDisplay,borderRadius:"0 ".concat(An.borderRadius," ").concat(An.borderRadius," 0"),transitionDuration:"0ms"}]});function Cr(e){var n=function(e){var n=(0,Rn.Z)((function(){var n;return(0,y.cn)((function(t){return null!==(n=t(_).get(e))&&void 0!==n?n:null}))}),[e]);return h(n)}(e.path),t=h(de);return(null===n||void 0===n?void 0:n.length)?(0,o.tZ)(ot.Z,{size:t,activeUsers:n}):null}function Tr(e){var n,t=(n=e.path,h((0,Rn.Z)((function(){return(0,y.cn)((function(e){var t=[],r=!0,o=!1,u=void 0;try{for(var a,l=e(_)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s=(0,m.Z)(a.value,2),f=s[0],d=s[1];if(!(0,D.yr)(n,f))return;(c=t).push.apply(c,(0,i.Z)(d))}}catch(h){o=!0,u=h}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}return t.length?t:null}))}),[n])));return(null===t||void 0===t?void 0:t.length)?(0,o.tZ)(ot.Z,{activeUsers:t}):null}function Rr(e){return(0,o.tZ)(xn.G,{title:"menu",tag:"button",css:kr.contextMenuButton,onClick:e.onClick,children:(0,o.tZ)(Er.Z,{})})}function Dr(e,n){var t=function(e){return p((0,Rn.Z)((function(){return(0,M.kv)(Pe,(function(n){return n.has(e)}))}),[e]))}(n);(0,En.j)(e,t,(function(e){return(0,r.Z)({},In.nodeBackgroundColor,e?bn.TV.backgroundHigher:"transparent")})),(0,u.useEffect)((function(){var n=function(n){e.current&&e.current.setAttribute("aria-selected",n?"true":"false")};return n(t.current),t.subscribe(n)}),[e,t,n])}var Ir=(0,u.memo)((function(e){var n=(0,u.useRef)(null),t=$n(e.index),i=Xn(e.path),a=jn(e.path),l=function(e){var n=(0,u.useState)(e),t=n[0],r=n[1];return(0,u.useEffect)((function(){if(e){var n=setTimeout((function(){return r(!0)}),500);return function(){clearTimeout(n)}}r(!1)}),[e]),t}(a),c=Qn(),s=h(X),f=Kn(e.path),d=function(e){var n=v(_n);return(0,Rn.Z)((function(){return function(t){n({event:t,path:e})}}),[n,e])}(e.path),p=(0,m.Z)(Yn({path:e.path,index:e.index}),2),g=p[0],y=p[1],w=e.path===s&&a,b=w?R:(0,S.UO)(e.path),x=Jt({path:e.path,type:Z.Tv.Directory}),E=x.dragRef,k=x.sizeRef,C=x.isDragging;Dr(n,e.path);var T,D,I,A=Zr(e.path),P=h(re);return(0,o.BX)(xn.G,{style:(0,et.Z)((0,Jn.Z)({},null===t||void 0===t?void 0:t.style),(I={},(0,r.Z)(I,In.statusColor,null!==(T=null===A||void 0===A?void 0:A.color)&&void 0!==T?T:bn.TV.foregroundDimmer),(0,r.Z)(I,In.statusBackgroundColor,null===A||void 0===A?void 0:A.backgroundColor),(0,r.Z)(I,"opacity",C?.1:void 0),I)),tabIndex:f,role:"treeitem","aria-label":b,dataCy:"filetree-entity","aria-expanded":i,"aria-level":(null!==(D=null===t||void 0===t?void 0:t.depth)&&void 0!==D?D:0)+1,css:kr.row,onFocus:function(){return y(e.path)},innerRef:(0,ct.l)(n,g,k,e.pending?void 0:E),onContextMenu:P?function(n){P(n,{path:e.path,type:Z.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&c(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&d(e)},children:[(0,o.BX)(xn.G,{title:e.path,css:kr.rowContent,onClick:e.pending?void 0:d,children:[(0,o.tZ)(xn.G,{css:kr.icon,children:w||l&&!i?(0,o.tZ)(it.Z,{}):(0,o.tZ)(o.HY,{children:i?(0,o.tZ)(rt.Z,{}):(0,o.tZ)(tt.Z,{})})}),(0,o.tZ)(xn.G,{css:kr.text,children:b}),A?(0,o.tZ)(wr,{count:A.count}):null,i?null:(0,o.tZ)(Tr,{path:e.path})]}),P?(0,o.tZ)(Rr,{onClick:function(n){P(n,{path:e.path,type:Z.Tv.Directory})}}):null]})})),Ar=(0,u.memo)((function(e){var n=(0,u.useRef)(null),t=$n(e.index),i=function(e){var n=g(te),t=v(qe),r=v(H);return(0,Rn.Z)((function(){return{onClick:function(i){var o=n(),u=o.onFileSelect,a=o.multiselectModifierKey,l=a?Mn(i,a):void 0;t({node:{path:e,type:Z.Tv.File},mode:l}),r(e),l||u({path:e,event:i,type:"click"})},onDoubleClick:function(t){var r=n().onFileDoubleClick;null===r||void 0===r||r(t,e)}}}),[e,n,r,t])}(e.path),a=i.onClick,l=i.onDoubleClick,c=Kn(e.path),s=Qn(),f=(0,m.Z)(Yn({path:e.path,index:e.index}),2),d=f[0],p=f[1],y=(0,S.UO)(e.path),w=Jt({path:e.path,type:Z.Tv.File}),b=w.dragRef,x=w.sizeRef,E=w.isDragging;Dr(n,e.path);var k,C,T,R=br(e.path),D=h(re);return(0,o.BX)(xn.G,{style:(0,et.Z)((0,Jn.Z)({},null===t||void 0===t?void 0:t.style),(T={},(0,r.Z)(T,In.statusColor,null!==(k=null===R||void 0===R?void 0:R.color)&&void 0!==k?k:bn.TV.foregroundDimmer),(0,r.Z)(T,"opacity",E?.1:void 0),T)),tabIndex:c,dataCy:"filetree-entity",css:kr.row,onFocus:function(){return p(e.path)},innerRef:(0,ct.l)(n,d,x,e.pending?void 0:b),role:"treeitem","aria-label":y,"aria-level":(null!==(C=null===t||void 0===t?void 0:t.depth)&&void 0!==C?C:0)+1,onDoubleClick:e.pending?void 0:l,onContextMenu:D?function(n){D(n,{path:e.path,type:Z.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&s(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&a(e)},children:[(0,o.BX)(xn.G,{title:e.path,css:kr.rowContent,onClick:e.pending?void 0:a,children:[(0,o.tZ)(xn.G,{css:kr.icon,children:(0,o.tZ)(nt.Z,{path:e.path})}),(0,o.tZ)(xn.G,{css:kr.text,children:y}),R?(0,o.tZ)(yr,{text:R.text}):null,(0,o.tZ)(Cr,{path:e.path})]}),D?(0,o.tZ)(Rr,{onClick:function(n){D(n,{path:e.path,type:Z.Tv.File})}}):null]})})),Pr=(0,u.memo)((function(e){var n=$n(e.index);return(0,o.tZ)(xn.G,{css:kr.divider,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(xn.G,{css:kr.dividerInner,children:(0,o.tZ)(xn.G,{css:kr.dividerText,children:e.label})})})})),Nr=(0,u.memo)((function(e){var n=$n(e.index);return(0,o.BX)(xn.G,{css:kr.error,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:[(0,o.tZ)(ut.Z,{}),(0,o.tZ)(lt.xv,{multiline:!1,children:e.message})]})})),Or=(0,u.memo)((function(e){var n=$n(e.index);return(0,o.tZ)(xn.G,{css:kr.emptyDir,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(xn.G,{css:kr.text,children:T})})})),qr=(0,u.memo)((function(e){var n=$n(e.index);return(0,o.tZ)(xn.G,{css:kr.createRow,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(Dt,{dir:e.dir})})})),Lr=(0,u.memo)((function(e){var n=$n(e.index),t=(0,S.UO)(e.path);return(0,o.tZ)(xn.G,{style:null===n||void 0===n?void 0:n.style,css:kr.createRow,role:"treeitem","aria-label":t,children:(0,o.tZ)(xr,{path:e.path,fileType:e.fileType})})})),Br=(0,u.memo)((function(e){var n=$n(e.index),t=(0,S.UO)(e.path);return(0,o.BX)(xn.G,{style:null===n||void 0===n?void 0:n.style,css:kr.uploadRow,role:"treeitem","aria-label":t,children:[(0,o.tZ)(xn.G,{css:kr.icon,children:(0,o.tZ)(nt.Z,{path:e.path})}),(0,o.tZ)(xn.G,{css:kr.text,children:t}),(0,o.tZ)(ar,{progress:e.progress})]})})),Ur=(0,u.memo)((function(e){var n=Wn(e.index);return n?"error"===n.type?(0,o.tZ)(Nr,{index:e.index,message:n.message}):"divider"===n.type?(0,o.tZ)(Pr,{index:e.index,label:n.label}):"emptyDir"===n.type?(0,o.tZ)(Or,{index:e.index}):"create"===n.type?(0,o.tZ)(qr,{index:e.index,dir:n.dir}):"upload"===n.type?(0,o.tZ)(Br,{index:e.index,path:n.path,progress:n.progress}):n.rename?(0,o.tZ)(Lr,{index:e.index,path:n.path,fileType:"file"===n.type?Z.Tv.File:Z.Tv.Directory}):"file"===n.type?(0,o.tZ)(Ar,{index:e.index,path:n.path,pending:Boolean(n.pending)}):(0,o.tZ)(Ir,{index:e.index,path:n.path,pending:Boolean(n.pending)}):null})),Gr=[An.horizontalPadding,An.rowLeftIndent,An.iconSize,An.iconTextGap].join(" + "),Fr=(0,Zn.X)({root:[bn.l0.overflow("hidden"),bn.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(Gr,")"),paddingRight:An.horizontalPadding}]}),Mr=(0,u.memo)((function(){var e=h(Re);return e?(0,o.tZ)(xn.G,{css:Fr.root,children:e.map((function(e){var n=e.type,t=e.text,i=e.depth,u=(0,r.Z)({},In.rowLeftIndent,"calc(".concat(i," * ").concat(An.gutterWidth,")")),a=n+i;return"divider"===n?(0,o.tZ)(xn.G,{style:u,css:kr.dividerInner,children:(0,o.tZ)(lt.xv,{css:kr.dividerInner,multiline:!1,children:t.toUpperCase()})},a):(0,o.tZ)(xn.G,{css:Fr.file,style:u,children:"create"===n?(0,o.tZ)(It,{create:function(){}}):(0,o.tZ)(xn.G,{css:kr.text,children:t.toUpperCase()})},a)}))}):null})),_r=(0,Zn.X)({content:[bn.l0.p(2),bn.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:An.minHeight}],scroll:[{position:"relative",height:An.scrollHeight}],root:[bn.l0.rowWithGap(0),bn.l0.align.center],gutter:[bn.l0.position.absolute,bn.l0.top(0),bn.l0.left(0),bn.l0.reset.button,bn.l0.align.end,bn.l0.cursor.pointer,{width:An.gutterWidth,"& > div":[bn.l0.height("100%"),bn.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:bn.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:bn.TV.accentPrimaryDefault,opacity:1}}]});var zr=(0,u.memo)((function(e){var n=zn(),t=Hn();(0,En.j)(e.scrollRef,t.fontSize,(function(e){var n;return n={},(0,r.Z)(n,In.fontSize,e+"px"),(0,r.Z)(n,In.dirStatusIconSize,e+"px"),n})),(0,En.j)(e.scrollRef,t.fontSizeSmall,(function(e){return(0,r.Z)({},In.fontSizeSmall,e+"px")})),(0,En.j)(e.scrollRef,t.iconSize,(function(e){return(0,r.Z)({},In.iconSize,e+"px")})),(0,En.j)(e.scrollRef,t.iconTextGap,(function(e){return(0,r.Z)({},In.iconTextGap,e+"px")})),(0,En.j)(e.scrollRef,t.horizontalPadding,(function(e){return(0,r.Z)({},In.horizontalPadding,e+"px")})),(0,En.j)(e.scrollRef,t.borderRadius,(function(e){return(0,r.Z)({},In.borderRadius,e+"px")})),(0,En.j)(e.scrollRef,t.scrollHeight,(function(e){return(0,r.Z)({},In.scrollHeight,e+"px")})),(0,En.j)(e.scrollRef,t.gutterWidth,(function(e){return(0,r.Z)({},In.gutterWidth,e+"px")})),(0,En.j)(e.scrollRef,t.minHeight,(function(e){return(0,r.Z)({},In.minHeight,e+"px")}));var a=v(Ze),l=Yt(),c=l.dropRef,s=l.containerRef,f=v(Le),d=h(re),p=h(X);return function(){var e,n=zn(),t=v(Fe),r=null===(e=h(Ne))||void 0===e?void 0:e.path,i=(0,Ye.Z)(r);(0,u.useEffect)((function(){i.current=r}),[r,i]),(0,u.useEffect)((function(){i.current&&(t(i.current),i.current=void 0)}),[n,t,i])}(),(0,o.BX)(xn.G,{css:_r.content,innerRef:(0,ct.l)(e.scrollRef,c,s),onKeyDown:a,onContextMenu:d?function(e){e.target===e.currentTarget&&d(e,{type:Z.Tv.Directory,path:p})}:void 0,onClick:function(e){e.target===e.currentTarget&&f()},children:[(0,o.tZ)(Mr,{}),(0,o.BX)(xn.G,{css:_r.scroll,role:"tree",children:[(0,i.Z)(n.values()).map((function(e){var n=e.key,t=e.index;return(0,o.tZ)(Ur,{index:t},n)})),(0,o.tZ)(Hr,{}),(0,o.tZ)(Kt,{}),(0,o.tZ)(or,{})]})]})})),Wr=(0,u.memo)((function(){var e=Vn().scrollRef;return yn(),function(){var e=h(hn),n=p(ve),t=v(pn);(0,u.useEffect)((function(){if(e){var r,i,o=null,u=null!==(r=window.requestIdleCallback)&&void 0!==r?r:window.requestAnimationFrame,a=null!==(i=window.cancelIdleCallback)&&void 0!==i?i:window.cancelAnimationFrame,l=nn()((function(){o&&a(o),o=u(t)}),1e3),c=n.subscribe(l);return document.addEventListener("visibilitychange",t),document.addEventListener("beforeunload",t),function(){l.cancel(),o&&a(o),document.removeEventListener("visibilitychange",t),document.removeEventListener("beforeunload",t),c(),t()}}}),[e,n,t])}(),(0,o.tZ)(zr,{scrollRef:e})})),Hr=(0,u.memo)((function(){var e=h(J),n=v(Se);return(0,o.tZ)(o.HY,{children:e.map((function(e){return(0,o.tZ)(xn.G,{tag:"button",onClick:function(){return n(e.dir)},css:_r.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(An.gutterWidth,"), ").concat(e.y,"px)")},children:(0,o.tZ)(xn.G,{})},"gutter"+e.dir+e.depth+e.y)}))})}));function jr(e){return wn(e)}function Xr(e){return(0,o.tZ)(f,{store:e.store,children:(0,o.tZ)(Wr,{})})}},53128:function(e,n,t){t.d(n,{FH:function(){return d},MY:function(){return b},WS:function(){return v},WU:function(){return s},em:function(){return g},fN:function(){return w},j3:function(){return p},mJ:function(){return h},mV:function(){return f},tz:function(){return m}});var r=t(2272),i=t(85919),o=t(92153),u=t(90234),a=t(15859),l=t(7653),c=(0,u.cn)(new Map),s=(0,u.cn)(null,(function(e,n,t){var r=t.messageId,i=t.abortController,u=(0,o.ZP)(e(c),(function(e){e.set(r,i)}));n(c,u)})),f=(0,u.cn)(null,(function(e,n,t){var r=t.messageId,i=(0,o.ZP)(e(c),(function(e){e.delete(r)}));n(c,i)})),d=(0,u.cn)(null,(function(e,n,t){var r,i=t.messageId;null===(r=e(c).get(i))||void 0===r||r.abort(),n(f,{messageId:i})})),h=(0,u.cn)(null,(function(e,n){var t=(0,o.ZP)(e(c),(function(e){var n=!0,t=!1,i=void 0;try{for(var o,u=e.entries()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=(0,r.Z)(o.value,2);a[0];a[1].abort()}}catch(l){t=!0,i=l}finally{try{n||null==u.return||u.return()}finally{if(t)throw i}}e.clear()}));n(c,t)})),p=function(){return(0,l.c1)(c).size>0},v=function(e){return(0,l.c1)((0,i.Z)((function(){return(0,a.kv)(c,(function(n){return Boolean(e&&n.has(e.id))}))}),[e]))},g=function(){return(0,l.$X)(h)},m=function(){return(0,l.$X)(d)},y=(0,u.cn)(new Set),w=(0,u.cn)(null,(function(e,n,t){var r=t.message,i=r.id,u=r.loading,a=(0,o.ZP)(e(y),(function(e){u?e.add(i):e.delete(i)}));n(y,a)})),b=function(){return(0,l.c1)(y).size>0}},89172:function(e,n,t){t.d(n,{Cd:function(){return g},KI:function(){return h},Og:function(){return p},Oy:function(){return v},RN:function(){return c},YY:function(){return f},d$:function(){return l},nE:function(){return a},wK:function(){return d}});var r=t(72006),i=t(90234),o=t(92153),u=t(7653),a=(0,i.cn)(!1),l=function(){return(0,u.c1)(a)},c=function(){return(0,u.wM)(a)},s=(0,i.cn)({}),f=(0,i.cn)(null,(function(e,n,t){var i=t.id,u=t.debugInfo,a=e(s),l=(0,o.ZP)(a,(function(e){e[i]||(e[i]={}),e[i]=(0,r.Z)({},e[i],u)}));n(s,l)})),d=function(e){var n=e.messageId;return(0,u.c1)(s)[n]},h=(0,i.cn)(""),p=function(){return(0,u.c1)(h)},v=(0,i.cn)(""),g=function(){return(0,u.c1)(v)}},24430:function(e,n,t){t.d(n,{$C:function(){return F},Cd:function(){return p.Cd},Gd:function(){return te},J:function(){return re},Jc:function(){return U},Og:function(){return p.Og},Qn:function(){return ue},SX:function(){return ee},Xq:function(){return _},ZT:function(){return Y},fr:function(){return oe},gp:function(){return X},jx:function(){return L},nB:function(){return K},oq:function(){return O},ql:function(){return ne},z_:function(){return G},zu:function(){return M}});var r=t(88733),i=t(57135),o=t(72006),u=t(4405),a=t(96583),l=t(43182),c=t(90234),s=t(85234),f=t.n(s),d=t(64918),h=t(7131),p=t(89172),v=t(84221),g=t(1926),m=t(25367),y=t(9434),w=t(17317),b=t(92153),Z=t(53128),x=t(57949),E=t(50959),S=t(28999),k=t(7653),C=t(18395),T=t(58542),R=t(98510),D=t(12785),I=t(8134),A=t(46486),P=t(52783),N=(0,c.cn)(0),O=function(){return(0,k.wM)(N)},q=(0,c.cn)(0),L=function(){return(0,k.wM)(q)},B=(0,c.cn)(""),U=function(){return(0,k.wM)(B)},G=function(){return(0,k.Dm)(B)},F=function(){return(0,k.$X)(B)},M=function(){return(0,k.wM)(v.qw)},_=function(){return(0,k.Dm)(v.qw)},z=(0,c.cn)(new Set),W=(0,c.cn)(null,(function(e,n,t){var r=(0,b.ZP)(e(z),(function(e){e.add(t)}));n(z,r)})),H=(0,c.cn)(null,(function(e,n,t){var r=(0,b.ZP)(e(z),(function(e){e.delete(t)}));n(z,r)})),j=(0,c.cn)((function(e){return e(z).size>0})),X=function(){return(0,k.c1)(j)},K=function(){return(0,k.Dm)(j)};function V(e){return{user:e.attribution,message:e.text}}var $=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:if(n(Z.mJ),n(v.qw,[]),n(D.r),!(t=e(x.tV)))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.createNewSession()];case 2:return r.sent(),[3,4];case 3:return r.sent(),l.Tb(new Error("Unable to initialize Ghostwriter Chat session")),[2];case 4:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}()),Y=function(){return(0,k.$X)($)},Q=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n,t){var i,l,c,s,f,b,E,S,k,C,T,R,D,I,A,P,N,O,q,L,B,U,G,F,M,_,z,W,H,j,X,K,$,Y,Q,J,ee,ne,te,re,oe,ue;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:i=t.chatInput,l=t.responseId,c=t.timesRegenerated,s=t.aiUsername,f=i.chatMessage,b=i.workspaceContext,E=i.messages,S=i.shouldUseAdvancedModelOverride,k=e(m.yH),C=("undefined"!==typeof S?S:e(m.EP).useAdvancedModel)&&k,T=f.type,R=f.codeReference,D=b.fileContext,I=b.mostRecentFile,A=e(g.qy),P=e(m.aK),N=e(m.gL),O=e(x.tV),"undefined"!==typeof(q=e(ie))&&(f.action=q),(0,y.j)(y.U3.GHOSTWRITER_CHAT_MESSAGE_SENT,{type:T,model:P,isAdvancedModel:C}),L={id:l,type:T,codeReference:R,text:"",loading:!0,author:{username:s,image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant",model:P,useAdvancedModel:C,timesRegenerated:c},B=new AbortController,n(Z.WU,{messageId:l,abortController:B}),a.label=1;case 1:if(a.trys.push([1,14,15,16]),n(w.Et,!0),U=function(e){var n=function(e){return!e.loading&&!e.error};return e.filter((function(t,r){return!(r<e.length-1&&!n(e[r+1]))&&n(e[r])&&"feedback"!==e[r].type})).map(V)}(E),G=performance.now(),F=void 0,!(0,d.uL)(P))throw new Error("Invalid chat model");if(!O||!N)throw new Error("Invalid Ghostwriter Chat client");_={chatHistory:U,message:f,model:P,useAdvancedModel:C,replId:N,sessionId:A,context:M={fileContext:D,mostRecentFile:I}},z={abortSignal:B.signal},W=O.sendMessage({body:_,options:z}),H=void 0,j="",X=!1,K=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),Y=(0,r.Z)(W),a.label=3;case 3:return[4,Y.next()];case 4:if(!(X=!(Q=a.sent()).done))return[3,6];if(J=Q.value,(ee=J).intentStreamChunk&&(H=ee.intentStreamChunk.intent),ee.debugStreamChunk&&(n(p.KI,ee.debugStreamChunk.fullPrompt),n(p.YY,{id:l,debugInfo:{fullPrompt:ee.debugStreamChunk.fullPrompt}}),n(p.YY,{id:l,debugInfo:{workspaceContext:M}})),F||(F=performance.now()-G,h.kg.time("ghostwriter chat time to first stream",F,{replid:N,chatId:A,chatModel:P,messageId:l,isAdvancedModel:C}),n(p.YY,{id:l,debugInfo:{timeToFirstStream:F}})),!ee.responseStreamChunk)return[3,5];ne=ee.responseStreamChunk,te=ne.stopReason,ne.stopReason&&(n(p.Oy,ne.stopReason),n(p.YY,{id:l,debugInfo:{stopReason:ne.stopReason}}),te=ne.stopReason),j+=ne.data,L=(0,u.Z)((0,o.Z)({},L),{loading:!1,text:j,intent:H,inferenceId:ee.responseId,useAdvancedModel:C,stopReason:te}),n(v.Mk,{message:L}),a.label=5;case 5:return X=!1,[3,3];case 6:return[3,13];case 7:return re=a.sent(),K=!0,$=re,[3,13];case 8:return a.trys.push([8,,11,12]),X&&null!=Y.return?[4,Y.return()]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(K)throw $;return[7];case 12:return[7];case 13:return n(ie,void 0),[3,16];case 14:return oe=a.sent(),n(w.Et,!1),"AbortError"===oe.name?(n(v.Mk,{message:(0,u.Z)((0,o.Z)({},L),{aborted:!0})}),[2]):(n(v.b9,{messageId:l,error:oe.message}),h.kg.error("ghostwriter chat client response error",{replid:N,chatId:A,chatModel:P,messageId:l,originalError:null!==(ue=null===oe||void 0===oe?void 0:oe.message)&&void 0!==ue?ue:oe}),[3,16]);case 15:return n(Z.mV,{messageId:l}),[7];case 16:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),J=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n,t,r){var i,o,u,l,c,s,d,h,p,y,w,b,Z,x,E;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return i=t.text,o=t.type,u=t.codeReference,l=(null===i||void 0===i?void 0:i.trim())||"",c=e(v.qw),(s=e(m.db))?(P.B4.Check(A.cZ,t)?n(C.W,t.codeReference.filePath):P.B4.Check(A.FL,t)?n(T.k8,t.codeReference.filePath):P.B4.Check(A.Mx,t)&&n(R.ev,t.codeReference.filePath),0===e(v.qw).length&&n(g.xk,Date.now()),d=f()(),h=f()(),n(W,d),p={id:d,type:o,codeReference:u,text:l,author:{username:s.username,image:s.image},attribution:"Human"},n(v.TC,{message:p}),y=e(m.EP).useAdvancedModel,w={id:h,type:o,codeReference:u,loading:!0,text:"Please wait while I think through your request\u2026",author:{username:r,image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant",useAdvancedModel:y},n(v.OV,{message:w}),[4,e(m.Iu).promise]):[2];case 1:return a.sent(),b=e(I.Z1),[4,e(I.r6)(b)];case 2:Z=a.sent(),x={fileContext:Z.ghostwriterFileContext.fileContext,mostRecentFile:Z.mostRecentFile},E={type:o,text:l,codeReference:u},a.label=3;case 3:return a.trys.push([3,,5,6]),[4,n(Q,{chatInput:{chatMessage:E,workspaceContext:x,messages:c},responseId:h,aiUsername:r})];case 4:return a.sent(),[3,6];case 5:return n(H,d),[7];case 6:return[2]}}))}));return function(n,t,r,i){return e.apply(this,arguments)}}()),ee=(0,c.cn)(null,function(){var e=(0,i.Z)((function(e,n,t){var r,i,o,u,l,c,s,f,d,p,g,y,w,b,Z,x,E,S;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return r=t.responseId,i=t.action,o=t.shouldUseAdvancedModelOverride,u=t.aiUsername,l=e(v.qw),c=l.findIndex((function(e){return e.id===r})),(s=-1!==c&&"Assistant"===l[c].attribution)?(f=l.slice(0,c),(d=f.pop())?(n(W,d.id),p=(l[c].timesRegenerated||0)+1,g=o||e(m.EP).useAdvancedModel,y=d.text,w=d.type,b=d.codeReference,Z={id:r,type:w,codeReference:b,loading:!0,text:"Please wait while I think through your request\u2026",author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant",timesRegenerated:p,useAdvancedModel:g},n(v.Mk,{message:Z}),[4,e(m.Iu).promise]):(h.kg.error("GW Chat error no human message before response message"),[2])):(h.kg.error("GW Chat error regenerate assistant message",{responseId:r,isResponseAssistantMessage:s}),[2]);case 1:return a.sent(),[4,e(I.r6)()];case 2:x=a.sent(),E={fileContext:x.ghostwriterFileContext.fileContext,mostRecentFile:x.mostRecentFile},S={type:w,text:y,codeReference:b,action:i},n(ie,i),a.label=3;case 3:return a.trys.push([3,,5,6]),[4,n(Q,{chatInput:{chatMessage:S,messages:f,workspaceContext:E,shouldUseAdvancedModelOverride:o},responseId:r,timesRegenerated:p,aiUsername:u})];case 4:return a.sent(),[3,6];case 5:return n(H,d.id),[7];case 6:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),ne=function(){var e=(0,k.Uu)();return(0,S.lV)((0,E.useCallback)(function(){var e=(0,i.Z)((function(e,n,t){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,n(J,t.chatMessage,"AI")];case 1:return[2,e.sent()]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),{store:e})},te=function(){var e=(0,k.Uu)();return(0,S.lV)((0,E.useCallback)(function(){var e=(0,i.Z)((function(e,n,t){var r,i,o;return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return r=t.responseId,i=t.action,o=t.shouldUseAdvancedModelOverride,[4,n(ee,{responseId:r,action:i,shouldUseAdvancedModelOverride:o,aiUsername:"AI"})];case 1:return[2,e.sent()]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),{store:e})},re=function(){var e=(0,Z.j3)(),n=(0,Z.MY)();return X()&&e&&!n},ie=(0,c.cn)(void 0),oe=function(){return(0,k.wM)(ie)},ue=function(){return(0,k.$X)(ie)}},18395:function(e,n,t){t.d(n,{W:function(){return u},j:function(){return l}});var r=t(7653),i=t(84221),o=t(90234),u=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("explainCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),a=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"explainCode"===e.type}))})),l=function(e){return(0,r.c1)(a).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))}},58542:function(e,n,t){t.d(n,{eD:function(){return c},k8:function(){return u},oQ:function(){return l}});var r=t(7653),i=t(84221),o=t(90234),u=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("generateCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),a=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"generateCode"===e.type}))})),l=function(e){return(0,r.c1)(a).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))},c=function(){return(0,r.$X)(u)}},98510:function(e,n,t){t.d(n,{Ef:function(){return c},ev:function(){return u},iH:function(){return l}});var r=t(7653),i=t(84221),o=t(90234),u=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("transformCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),a=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"transformCode"===e.type}))})),l=function(e){return(0,r.c1)(a).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))},c=function(){return(0,r.$X)(u)}},12785:function(e,n,t){t.d(n,{g:function(){return l},r:function(){return c}});var r=t(18967),i=t(7653),o=t(90234),u=t(50959),a=(0,o.cn)(new Set),l=function(e){var n=(0,i.c1)(a);(0,u.useEffect)((function(){if(e)return n.add(e),function(){n.delete(e)}}),[n,e])},c=(0,o.cn)(null,(function(e,n){var t=e(a),i=!0,o=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.dispatch({effects:r.Q.of(null)})}}catch(s){o=!0,u=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}}))},84221:function(e,n,t){t.d(n,{Mk:function(){return h},OV:function(){return d},TC:function(){return f},b9:function(){return p},nS:function(){return g},qw:function(){return s}});var r=t(9970),i=t(90234),o=t(92153),u=t(53128),a=t(92674),l=t.n(a),c=t(7653),s=(0,i.cn)([]),f=(0,i.cn)(null,(function(e,n,t){var i=t.message,o=e(s);n(s,(0,r.Z)(o).concat([i]))})),d=(0,i.cn)(null,(function(e,n,t){var i=t.message,o=e(s);n(u.fN,{message:i}),n(s,(0,r.Z)(o).concat([i]))})),h=(0,i.cn)(null,(function(e,n,t){var r=t.message,i=r.id,a=e(s),l=(0,o.ZP)(a,(function(e){var n;for(n=e.length-1;n>=0&&a[n].id!==i;n--);n>=0&&(e[n]=r)}));n(u.fN,{message:r}),n(s,l)})),p=(0,i.cn)(null,(function(e,n,t){var r=t.messageId,i=t.error,u=e(s),a=(0,o.ZP)(u,(function(e){var n=e.find((function(e){return e.id===r}));n&&(n.loading&&(n.text="",n.loading=!1),n.error=i)}));n(s,a)})),v=(0,i.cn)(null,(function(e,n,t){var i=t.feedback,o=t.message,u=e(s),a={id:l()(),type:"feedback",text:i,feedbackProvidedMessage:{id:o.id,text:o.text},attribution:"Assistant",useAdvancedModel:o.useAdvancedModel,author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"}};n(s,(0,r.Z)(u).concat([a]))})),g=function(){return(0,c.$X)(v)}},17317:function(e,n,t){t.d(n,{Et:function(){return o},Z9:function(){return l},Z_:function(){return u},rM:function(){return c}});var r=t(7653),i=t(90234),o=(0,i.cn)(!1),u=function(){return(0,r.wM)(o)},a=(0,i.cn)(!1),l=function(){return(0,r.wM)(a)},c=function(){return(0,r.$X)(a)}},1926:function(e,n,t){t.d(n,{Cp:function(){return f},jC:function(){return c},qy:function(){return a},ub:function(){return l},xk:function(){return s}});var r=t(7653),i=t(90234),o=t(85234),u=t.n(o),a=(0,i.cn)(u()()),l=function(){return(0,r.c1)(a)},c=function(){return(0,r.$X)(a)},s=(0,i.cn)(null),f=function(){return(0,r.c1)(s)}},25367:function(e,n,t){t.d(n,{$e:function(){return k},EP:function(){return c},Iu:function(){return E},Lw:function(){return y},Ne:function(){return x},Rx:function(){return Z},T9:function(){return s},aK:function(){return l},db:function(){return v},gL:function(){return f},iM:function(){return g},ll:function(){return b},yH:function(){return w}});var r=t(30312),i=t(90234),o=t(61871),u=t(7653),a=t(51631),l=(0,i.cn)(r.Fp),c=(0,i.cn)({useAdvancedModel:!0,setUseAdvancedModel:function(){}}),s=function(){return(0,u.c1)(c)},f=(0,i.cn)(null),d=(0,i.cn)(void 0),h=(0,i.cn)(!0),p=(0,i.cn)(void 0),v=(0,i.cn)((function(e){var n;return null===(n=e(d))||void 0===n?void 0:n.currentUser}));function g(e){return e.userSubscriptionType===a.HP.HackerPro||Boolean("UserPowerUpsTypes"===(null===e||void 0===e?void 0:e.userPowerUpsByType.__typename)&&e.userPowerUpsByType.ghostwriter.active)}var m=(0,i.cn)((function(e){var n=e(v);return Boolean(n&&g(n))})),y=function(){return(0,u.c1)(m)},w=(0,i.cn)(!1),b=function(){return(0,u.c1)(w)},Z=function(){return(0,u.$X)(w)},x=function(){return{currentUserData:(0,u.c1)(d),currentUserLoading:(0,u.c1)(h),currentUserError:(0,u.c1)(p),chatModel:(0,u.c1)(l)}},E=(0,i.cn)((0,o.Z)()),S=(0,i.cn)(null,(function(e,n,t){var r=t.chatModel,i=t.replId,o=t.currentUserData,u=t.currentUserLoading,a=t.currentUserError,s=t.advancedModelUserPref;n(l,r),n(f,i),n(d,o),n(h,u),n(p,a),n(c,s),e(E).resolve(!0)})),k=function(){return(0,u.$X)(S)}},80509:function(e,n,t){t.d(n,{Kz:function(){return s},dp:function(){return p},u0:function(){return d}});var r=t(57135),i=t(96583),o=t(90234),u=t(94516),a=t(7131),l=t(7653),c=(0,o.cn)(""),s=function(){return(0,l.wM)(c)},f=(0,o.cn)(null),d=function(){return(0,l.wM)(f)},h=(0,o.cn)(null,function(){var e=(0,r.Z)((function(e,n){var t,r,o;return(0,i.__generator)(this,(function(i){return(t=e(f))&&(r=e(c),o=e(u.FF),a.kg.info("Ghostwriter Debugger error buffered",{debuggerBuffer:r,ghostwriterDebugError:t,inferredInterpreter:o})),n(c,""),n(f,null),[2]}))}));return function(n,t){return e.apply(this,arguments)}}()),p=function(){return(0,l.$X)(h)}},8134:function(e,n,t){t.d(n,{U0:function(){return h},Xr:function(){return v},Xy:function(){return g},Z1:function(){return f},r6:function(){return d},zU:function(){return p}});var r=t(57135),i=t(9970),o=t(96583),u=t(7653),a=t(57949),l=t(28999),c=t(90234),s=t(50959),f=(0,c.cn)([]),d=(0,c.cn)((function(e){return e(a.Vx).getGhostwriterFileContext})),h=function(){var e=(0,u.Uu)();return(0,l.lV)((0,s.useCallback)(function(){var e=(0,r.Z)((function(e,n){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return t=e(f),[4,e(d)(t)];case 1:return[2,n.sent()]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[]),{store:e})};function p(){var e=(0,u.Uu)();return(0,l.lV)((0,s.useCallback)(function(){var e=(0,r.Z)((function(e,n,t){var r,u,a;return(0,o.__generator)(this,(function(o){return r=e(f),u=r.findIndex((function(e){return e.path===t.path})),a=(0,i.Z)(r),-1!==u?a[u]=t:a.push(t),n(f,a),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),{store:e})}function v(){var e=(0,u.Uu)();return(0,l.lV)((0,s.useCallback)(function(){var e=(0,r.Z)((function(e,n){return(0,o.__generator)(this,(function(e){return n(f,[]),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),[]),{store:e})}function g(){return(0,u.c1)(f)}},57949:function(e,n,t){t.d(n,{$0:function(){return g},G6:function(){return f},M0:function(){return x},OT:function(){return h},PM:function(){return w},U4:function(){return v},Vx:function(){return c},f9:function(){return l},n3:function(){return y},tV:function(){return b}});var r,i=t(57135),o=t(96583),u=t(7653),a=t(90234),l={getGhostwriterFileContext:(0,i.Z)((function(){return(0,o.__generator)(this,(function(e){return[2,{ghostwriterFileContext:{fileContext:[],truncatedFiles:[],overflowingFiles:[]},mostRecentFile:null}]}))})),insertCodeButtonComponent:function(){return null},openGhostwriterPane:function(){},ghostwriterClient:null},c=(0,a.cn)(l),s=(0,a.cn)((function(e){return e(c).insertCodeButtonComponent})),f=function(){return(0,u.c1)(s)},d=(0,a.cn)((function(e){return e(c).openGhostwriterPane})),h=function(){return(0,u.c1)(d)},p=(0,a.cn)(null),v=function(){return(0,u.c1)(p)},g=function(){return(0,u.$X)(p)},m=(0,a.cn)(null),y=function(){return(0,u.c1)(m)},w=function(){return(0,u.$X)(m)},b=(0,a.cn)((function(e){return e(c).ghostwriterClient})),Z=(0,a.cn)((function(e){var n;return null!==(r=null===(n=e(b))||void 0===n?void 0:n.isReady)&&void 0!==r&&r})),x=function(){return(0,u.c1)(Z)}},19594:function(e,n,t){t.d(n,{w:function(){return y},l:function(){return w}});var r=t(57135),i=t(2272),o=t(96583),u=t(50959),a=t(28639),l=t(80509),c=t(7131),s=/(((\w+Error)|(Error)): (.*)\r\n((?:\s+at .*\r\n)+))|(\/home\/runner(.*):\d+\r\n[\s\S]*((\w+Error)|(Error)): (.*)\r\n)/g,f=/(Traceback.*\r\n)?( +File.*(\r\n.*){1,2})*\r\n.*((\wError:)|(Exception:)).*/g,d=["abort","error","exception","fail","fatal","panic","traceback"].map((function(e){return"[".concat(e[0].toLowerCase()).concat(e[0].toUpperCase(),"]").concat(e.slice(1))})).join("|"),h=new RegExp("(.*(".concat(d,")(.*\\r\\n)+?\\x1b\\[31m(.|\\r\\n)*?\\x1b\\[[0-9;]*m)|(.*\\x1b\\[31m.*?(").concat(d,")(.|\\r\\n)*?\\x1b\\[[0-9;]*m.*)"),"g"),p=/\x1b\[[0-9;]*[A-Za-z]/g;var v=t(94516),g=t(28435);function m(e,n){if(!e)return null;var t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";return"nodejs"===n?null!==e.match(s):"python3"===n?null!==e.match(f):null!==e.match(h)}(e,n);return t?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",t=e.replace(p,""),r=null;return(r="nodejs"===n?t.match(s):"python3"===n?t.match(f):e.match(h))?r[r.length-1].replace(p,""):(c.kg.error("Ghostwriter Chat Debugger had no error - this should not have happened",{errorBuffer:e,interpreter:n}),"")}(e,n):null}function y(e){var n=e.runner,t=(0,v.R$)(),s=(0,u.useState)(a.Ah.IDLE),f=s[0],d=s[1],h=(0,i.Z)((0,l.u0)(),2),p=h[0],g=h[1],y=(0,l.dp)(),w=(0,i.Z)((0,l.Kz)(),2),b=w[0],Z=w[1],x=(0,u.useCallback)(function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){return f!==a.Ah.RUNNING||Z((function(n){return(n+e).slice(-2400)})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),[f,Z]),E=(0,u.useCallback)((function(e){e!==f&&(d(e),e!==a.Ah.RUNNING||y())}),[y,f]);return(0,u.useEffect)((function(){var e=setTimeout((function(){var e=m(b,t);e&&g(e)}),100);return function(){clearTimeout(e)}}),[b,t,g]),(0,u.useEffect)((function(){if(c.kg.info("Ghostwriter Debugger inferred interpreter",{interpreter:t}),"shellrunner"===n.mode){var e=[n.onOutput(x),n.onStateChanged(E)];return function(){e.forEach((function(e){return e()}))}}}),[t,n,x,E]),{parsedError:p,clearDebug:y}}function w(e){var n=(0,g.Z)().toolchain,t=(0,v.R$)(),r=(0,u.useState)(null),i=r[0],o=r[1],a=(0,u.useState)(""),l=a[0],c=a[1];return(0,u.useEffect)((function(){return e((function(e){c((function(n){return(n+e).slice(-2400)}))}))}),[e]),(0,u.useEffect)((function(){var e=setTimeout((function(){var e=t;if("unknown"===e){var r,i=null===(r=n.configs.current)||void 0===r?void 0:r.entrypoint;(null===i||void 0===i?void 0:i.endsWith(".js"))?e="nodejs":(null===i||void 0===i?void 0:i.endsWith(".py"))&&(e="python3")}var u=m(l,e);o(u)}),100);return function(){clearTimeout(e)}}),[l,t,n]),{parsedError:i}}},94516:function(e,n,t){t.d(n,{B:function(){return h},FF:function(){return s},R$:function(){return p}});var r=t(57135),i=t(96583),o=t(7653),u=t(73175),a=t(28435),l=t(90234),c=t(50959),s=(0,l.cn)("unknown");function f(e){var n,t,r,i;if(e.error)return"unknown";var o,u,a,l="unknown";if((null===(n=e.config.interpreter)||void 0===n||null===(t=n.command)||void 0===t?void 0:t.args)&&(null===(o=e.config.interpreter)||void 0===o||null===(u=o.command)||void 0===u||u.args.forEach((function(e){/nodejs/.test(e)?l="nodejs":/python3/.test(e)&&(l="python3")})),"unknown"!==l))return l;if((null===(r=e.config.run)||void 0===r?void 0:r.args)&&(null===(a=e.config.run)||void 0===a||a.args.forEach((function(e){/vite/.test(e)?l="vite":/node|npm/.test(e)?l="nodejs":/python3/.test(e)&&(l="python3")})),"unknown"!==l))return l;if(null===(i=e.config.packager)||void 0===i?void 0:i.language){var c,s=null===(c=e.config.packager)||void 0===c?void 0:c.language;if(/nodejs/.test(s)?l="nodejs":/python3/.test(s)&&(l="python3"),"unknown"!==l)return l}return"unknown"}function d(e){var n="unknown";return/nodejs|typescript/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3"),n}function h(){var e=(0,a.Z)().dotReplit,n=(0,u.Z)(),t=(0,o.$X)(s);(0,c.useEffect)((function(){function o(){return(o=(0,r.Z)((function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:r=i.sent();try{return o="unknown","unknown"===(o=f(r))&&(o=d(n)),t(o),[2,o]}catch(u){t("unknown")}return[2]}}))}))).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){t("unknown")}}),[e,n,t])}function p(){return(0,o.c1)(s)}},69118:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),i=t(74985),o=t(50959),u=t(60966),a=t(32874),l=t(70567),c=t(60200),s=t(85919),f=o.memo(u.ZP);function d(e){var n=e.source,t=e.sourcePos,o=e.fs,u=e.path,d=e.onCodeInsert,h=(0,a.l)(o,u),p=(0,c.Z)(n,100),v=(0,s.Z)((function(){return{img:h,a:function(e){return(0,i.tZ)(l.Z,(0,r.Z)({filePath:u},e))}}}),[h,u]);return(0,i.tZ)(f,{onCodeInsert:d,components:v,sourcePos:t,children:p})}},94749:function(e,n,t){t.d(n,{A:function(){return d},Z:function(){return f}});var r=t(74985),i=t(50959),o=t(87978),u=t(53312),a=t(88965),l=t(16296),c=t(9694),s=t(27773);function f(e){var n=e.fs,t=e.filePath,f=(0,i.useState)(null),h=f[0],p=f[1],v=(0,i.useState)(!0),g=v[0],m=v[1];return(0,i.useEffect)((function(){var e=n.watchFile(t,{onChange:function(e){p(e.toString("base64")),m(!1)},onError:function(){p(null),m(!1)},onMoveOrDelete:function(){p(null),m(!1)}});return function(){e(),m(!0),p(null)}}),[n,t]),g?(0,r.tZ)(s.Z,{}):h?(0,r.BX)(r.HY,{children:[(0,r.tZ)(d,{content:h,mime:(0,o.yC)(t)}),(0,r.tZ)(l.hU,{alt:"Download",css:[a.l0.position.absolute,a.l0.bottom(8),a.l0.right(8),a.l0.p(16)],children:(0,r.tZ)("a",{href:"data:text/plain;base64,".concat(h),download:(0,o.UO)(t),css:[a.l0.color.foregroundDimmer],children:(0,r.tZ)(c.Z,{})})})]}):(0,r.tZ)(u.xv,{multiline:!1,children:"Failed to load media file"})}var d=function(e){var n=e.content,t=e.mime,i=void 0===t?"":t;if(i.startsWith("video/"))return(0,r.tZ)("video",{src:"data:".concat(i,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(i.startsWith("image/"))return(0,r.tZ)("img",{alt:"Preview",src:"data:".concat(i,";base64,").concat(n),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(i.startsWith("audio/")){var o=i;return"audio/wave"===o&&(o="audio/wav"),(0,r.tZ)("audio",{src:"data:".concat(o,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===i?(0,r.tZ)("object",{data:"data:".concat(i,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,r.tZ)("embed",{src:"data:".concat(i,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,r.tZ)(u.xv,{multiline:!1,children:"File type not supported."})}},94965:function(e,n,t){t.d(n,{Z:function(){return E}});var r=t(74985),i=(t(50959),t(21651)),o=t(53312),u=t(95141),a=t(26473),l=t(90171),c=t(88965),s=t(82893),f=t.n(s),d=t(72006),h=t(43119),p=t(71440),v=t(24635);function g(){var e=(0,h.Z)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return g=function(){return e},e}var m={},y=(0,p.Ps)(g());var w=t(34547),b=t(61623),Z=t(59989),x=(0,t(61025).X)({root:[c.l0.colWithGap(32)],header:[c.l0.rowWithGap(16),c.l0.align.center],body:[c.l0.colWithGap(16)],staffHelpers:[c.l0.colWithGap(8),c.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),c.l0.overflow("hidden")],buttons:[c.l0.rowWithGap(16),c.l0.justify.end]}),E=function(e){var n,t=e.isOpen,s=(0,l.useRouter)(),h=function(e){var n=(0,d.Z)({},m,e);return v.a(y,n)}({skip:!t}).data,p=(0,w.Z)(),g=null===h||void 0===h||null===(n=h.currentUser)||void 0===n?void 0:n.isStaff;return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(a.G,{css:x.root,children:[(0,r.tZ)(a.G,{css:x.header,children:(0,r.tZ)(o.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can\u2019t run this Repl right now."})}),(0,r.BX)(a.G,{css:x.body,children:[(0,r.BX)(o.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(f(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(o.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),g?(0,r.BX)(a.G,{css:x.staffHelpers,children:[(0,r.BX)(a.G,{css:c.l0.rowWithGap(8),children:[(0,r.tZ)(b.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(Z.Z,{})}),(0,r.tZ)(o.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(a.G,{children:(0,r.BX)(o.xv,{children:["Repl ID ",p," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(a.G,{children:(0,r.BX)(o.xv,{multiline:!1,children:[(0,r.tZ)(f(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(p),children:"All datadog logs"})," ","\u2022"," ",(0,r.tZ)(f(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(p,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(a.G,{css:x.buttons,children:[(0,r.tZ)(u.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(u.zx,{text:"Leave",onClick:function(){s.push("/home","~/")}})]})]})})}},20387:function(e,n,t){var r=t(74985),i=(t(50959),t(21651)),o=t(53312),u=t(95141),a=t(26473),l=t(90171),c=t(95862),s=t(88965),f=t(61025),d=t(12901),h=t(46130),p=(0,f.X)({root:[s.l0.colWithGap(16)],header:[s.l0.rowWithGap(16),s.l0.align.center],body:[s.l0.pr(32),s.l0.colWithGap(16)],buttonRow:[s.l0.rowWithGap(16)],button:[s.l0.flex.growAndShrink(1)]});n.Z=function(e){var n=e.isOpen,t=(0,l.useRouter)(),s=(0,h.Vg)(t),f=(0,d.Z)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(a.G,{css:p.root,children:[(0,r.BX)(a.G,{css:p.header,children:[(0,r.tZ)(c.Z,{size:24}),(0,r.tZ)(o.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,r.BX)(a.G,{css:p.body,children:[(0,r.tZ)(o.xv,{children:"Your connection to this Repl has been temporarily interrupted. Usually this is because of a network issue. Please refresh."}),s?(0,r.tZ)(o.xv,{children:"If the issue continues please logout and re-login."}):null]}),(0,r.BX)(a.G,{css:p.buttonRow,children:[s||f?null:(0,r.tZ)(u.zx,{css:p.button,text:"Leave",onClick:function(){t.push("/home","~/")}}),(0,r.tZ)(u.zx,{text:"Refresh",colorway:"primary",css:p.button,onClick:function(){window.location.reload()}})]})]})})}},57670:function(e,n,t){t.d(n,{Z:function(){return s}});var r,i=t(57389),o=t(74985),u=t(88965),a=t(61623),l=t(2580),c=(0,t(43312).iv)([u.l0.focusRing,u.l0.display.flex,u.l0.center,u.l0.borderRadius(4),u.l0.backgroundColor.backgroundRoot,u.l0.color.foregroundDefault,u.l0.cursor.pointer,u.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i.Z)(r,u.wl.hover,[u.l0.backgroundColor.backgroundHigher]),(0,i.Z)(r,":focus",{outline:"none"}),r)]),s=function(e){var n=e.onClick;return(0,o.tZ)(a.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:n,css:c,children:(0,o.tZ)(l.Z,{size:16})})})}},57392:function(e,n,t){t.d(n,{l:function(){return s}});var r,i=t(57389),o=t(74985),u=t(88965),a=t(61623),l=t(3282),c=(0,t(43312).iv)([u.l0.focusRing,u.l0.display.flex,u.l0.center,u.l0.borderRadius(4),u.l0.backgroundColor.backgroundRoot,u.l0.color.foregroundDefault,u.l0.cursor.pointer,u.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i.Z)(r,u.wl.hover,[u.l0.backgroundColor.backgroundHigher]),(0,i.Z)(r,":focus",{outline:"none"}),r)]),s=function(e){var n=e.onClick;return(0,o.tZ)(a.u,{tooltip:"Search",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Search",onClick:n,css:c,children:(0,o.tZ)(l.Z,{size:16})})})}},30364:function(e,n,t){t.d(n,{R:function(){return c}});var r=t(74985),i=t(48306),o=t.n(i),u=t(88965),a=t(52544),l=t(50959);function c(e){var n=e.findNext,t=e.findPrevious,i=e.exit,c=(0,l.useRef)(null),s=(0,l.useState)(""),f=s[0],d=s[1];(0,l.useEffect)((function(){c.current&&c.current.focus()}),[]);return(0,r.BX)("div",{className:"jsx-cae03adee2975d4 search",children:[(0,r.tZ)("input",{ref:c,placeholder:"Find",value:f,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){return function(e){"Escape"!==e.key?"Enter"===e.key&&(e.shiftKey?t(f):n(f)):i()}(e)},css:[u.l0.focusRing],className:"jsx-cae03adee2975d4"}),(0,r.tZ)(a.Z,{size:"small",onClick:function(){return n(f)},children:"Next"}),(0,r.tZ)(a.Z,{size:"small",onClick:function(){return t(f)},children:"Previous"}),(0,r.tZ)(a.Z,{size:"small",onClick:i,children:"Exit"}),(0,r.tZ)(o(),{id:"cae03adee2975d4",children:".search.jsx-cae03adee2975d4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:30px}input.jsx-cae03adee2975d4{padding:4px var(--space-8)var(--space-4);background-color:var(--background-default);color:var(--foreground-default);height:24px;width:85px;border:none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}input.jsx-cae03adee2975d4::-webkit-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:focus{outline:none;border:var(--accent-primary-default)}input.jsx-cae03adee2975d4,.search button{margin:0 var(--space-4)}"})]})}},73437:function(e,n,t){t.d(n,{Z:function(){return z}});var r,i,o=t(2272),u=t(74985),a=t(43312),l=t(17074),c=t(51467),s=t(39995),f=t(88149),d=t(46130),h=t(53691),p=t(26473),v=t(88965),g=t(97866),m=t(19594),y=t(57389),w=t(61623),b=t(96893),Z=(0,a.iv)([v.l0.focusRing,v.l0.display.flex,v.l0.center,v.l0.borderRadius(4),v.l0.backgroundColor.blurpleDefault,v.l0.color.foregroundDefault,v.l0.cursor.pointer,v.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,y.Z)(r,v.wl.hover,[v.l0.backgroundColor.blurpleStronger]),(0,y.Z)(r,":focus",{outline:"none"}),r)]),x=function(e){var n=e.onClick;return(0,u.tZ)(w.u,{tooltip:"Debug with Ghostwriter",placement:"bottom-start",children:(0,u.tZ)("button",{"aria-label":"Debug with Ghostwriter",onClick:n,css:Z,children:(0,u.tZ)(b.Z,{size:16})})})},E=t(50959),S=t(53028),k=t(24430),C=t(22271),T=t(57670),R=t(19499),D=t(70232),I=t(28639);function A(e,n){var t,r;switch(e){case i.Init:t="5%",r="Loading...";break;case i.BlockMigration:t="10%",r="Optimizing files";break;case i.Booting:r="Booting Repl",t="20%";break;case i.LoadingFiles:r="Loading files",t="".concat(Math.floor(20+70*n).toString(),"%");break;case i.Ready:r="Ready",t="100%";break;default:(0,D.Z)(e)}return{percentString:t,message:r}}!function(e){e.Init="Init",e.BlockMigration="BlockMigration",e.Booting="Booting",e.LoadingFiles="LoadingFiles",e.Ready="Ready"}(i||(i={}));var P=(0,a.F4)({"0%":{opacity:0,top:0},"100%":{opacity:1,top:"-25px"}});function N(e){var n=e.onBootStatus,t=e.initialRunState,r=(0,E.useState)({current:t===I.Ah.OFFLINE?i.Init:i.Ready,previous:null}),o=r[0],a=r[1],l=(0,E.useState)(0),c=l[0],s=l[1];(0,E.useEffect)((function(){var e=0,t=0,r=null,o=null,u=function(){e=0,t=0,r=null,o&&(clearInterval(o),o=null)},l=n((function(n){var l;switch(function(n){var i=n.stage,a=n.progress,l=n.total;if(o&&clearInterval(o),i!==R.api.BootStatus.Stage.PULL_FILES&&i!==R.api.BootStatus.Stage.LOAD_BLOCK||!l)return u(),void s(0);if(!(e>a)&&t!==a){var c=Date.now(),f=0;f=r?(a-t)/(c-r)*50:5e4,r=c,t=a,o=setInterval((function(){(e+=f)>l&&(e=l),e=Math.max(e,a),s(e/l)}),50)}}(n),n.stage){case R.api.BootStatus.Stage.ACQUIRING:l=i.Booting;break;case R.api.BootStatus.Stage.BLOCK_MIGRATION:l=i.BlockMigration;break;case R.api.BootStatus.Stage.PULL_FILES:case R.api.BootStatus.Stage.LOAD_BLOCK:l=i.LoadingFiles;break;case R.api.BootStatus.Stage.COMPLETE:l=i.Ready;break;default:return}a((function(e){return e.current===l?e:{current:l,previous:e.current}}))}));return function(){u(),l()}}),[n]);var f=o.previous?A(o.previous,1):null,d=A(o.current,c);return(0,u.BX)("div",{css:{position:"absolute",left:"25%",right:"25%",top:"45%",backgroundColor:"transparent",color:"white",transition:"all 1s 0.5s",opacity:o.current===i.Ready?0:1},children:[(0,u.BX)("div",{children:[f?(0,u.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-100px",opacity:0,transition:"top 0.4s, opacity 0.4s"},children:[f.message,o.previous===i.LoadingFiles&&" 100%"]},f.message):null,(0,u.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-25px",opacity:1,animationName:P.toString(),animationDuration:"0.6s"},children:[d.message,o.current===i.LoadingFiles&&" ".concat(d.percentString)]},d.message)]}),(0,u.tZ)("div",{css:{background:"none",border:"solid white 1px",borderRadius:"10px"},children:(0,u.tZ)("div",{css:{height:"5px",width:d.percentString,backgroundColor:"#fff",transition:"width cubic-bezier(0.28, 0.26, 0.33, 1) 2s"}})})]})}var O=t(57392),q=t(30364),L=t(18837),B=t(26942);var U=(0,a.iv)([v.l0.flex.row,{opacity:"0",zIndex:100}]),G=(0,a.iv)([v.l0.flex.row,{zIndex:100}]),F=(0,a.iv)([v.l0.flex.row,v.l0.center,v.l0.justify.end,v.l0.position.absolute,v.l0.top(8),v.l0.right(8),v.l0.minHeight(30)]),M=function(e,n){var t=e.tracker,r=e.runner,i=e.debugClient,a=e.packager,v=e.onBootStatus,y=e.openPane,w=e.focusOnLoad,b=e.focusRef,Z=e.openFile,x=e.listFiles,S=(0,o.Z)(function(e){var n=e.tracker,t=e.runner,r=e.debugClient,i=e.packager,u=e.openFile,a=e.listFiles,l=(0,o.Z)((0,L.Z)(u&&a?{openFile:u,listFiles:a}:void 0),2),c=l[0],s=l[1],f=(0,E.useState)(""),d=f[0],h=f[1],p=n||function(){};return(0,E.useEffect)((function(){if(!c)return t.onOutput((function(e){return h((function(n){return n+e}))}))}),[c,t,h]),(0,E.useEffect)((function(){if(!c&&i)return i.onOutput((function(e){return h((function(n){return n+e.replace(/\n/g,"\n\r")}))}))}),[c,i,h]),(0,E.useEffect)((function(){var e=function(e){if(!c)throw new Error("Expected xterm");c.write(e.replace(/\n/g,"\n\r"))};if(c&&i){var n=i.onOutput((function(n){e(n)})),t=i.onError((function(){return e("\x1b[31m\n\nReplit: Package operation failed.\x1b[00m")})),r=i.onStateChanged((function(n){n&&e("\n\nReplit: Updating package configuration\n\n")}));return function(){n(),t(),r()}}}),[c,i]),(0,E.useEffect)((function(){d&&c&&(p("user:run:output",{bufferedOutput:d}),c.write(d),h(""))}),[c,d]),(0,E.useEffect)((function(){if(c){var e=function(){t.getRunState()!==I.Ah.OFFLINE&&t.resizeTerminal(c.getSize())},n=[];n.push(c.onResize(e).dispose);var i=[];n.push(c.onData((function(e){var n=(0,B.I)(e);"running"!==(null===r||void 0===r?void 0:r.state.current)?t.getRunState()!==I.Ah.OFFLINE?t.sendInput(n):i.push(n):r.sendInput(n)})).dispose),n.push(t.onOutput((function(e){p("user:run:output",{output:e}),c.write(e)})));var o=!1;return n.push(t.onStateChanged((function(n){if(n!==I.Ah.OFFLINE){if(o||(e(),o=!0),i.length){var r=!0,u=!1,a=void 0;try{for(var l,c=i[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;t.sendInput(s)}}catch(f){u=!0,a=f}finally{try{r||null==c.return||c.return()}finally{if(u)throw a}}i=[]}}else o=!1}))),t.getRunState()!==I.Ah.OFFLINE&&(e(),o=!0),function(){n.forEach((function(e){return e()}))}}}),[c,t,r]),[c,s,h]}({tracker:t,runner:r,debugClient:i,packager:a,openFile:Z,listFiles:x}),3),k=S[0],R=S[1],D=S[2],A=(0,o.Z)(E.useState(!1),2),P=A[0],G=A[1],M=(0,c.Z)(b);E.useEffect((function(){var e;null===(e=M.current)||void 0===e||e.call(M,k)}),[M,k]);var z=(0,c.Z)(w);E.useEffect((function(){k&&z.current&&k.focus()}),[k,z]);var W=(0,m.w)({runner:r}),H=W.parsedError,j=W.clearDebug,X=(0,d.T3)(),K=Boolean(H);E.useEffect((function(){return function(){j()}}),[j]);var V=(0,s.Z)().preferences.accessibleTerminal;E.useImperativeHandle(n,(function(){return{write:function(e){k?k.write(e):D((function(n){return n+e.replace(/\n/g,"\n\r")}))},clear:function(){k&&k.clear()},focus:function(){k&&k.focus()}}}));var $=(0,g.Z)(h.y.Output);return(0,u.BX)(p.G,{css:[C.EA.container],onKeyDown:function(e){"f"===e.key&&(0,f.j)(e)&&!e.shiftKey&&(G(!0),e.preventDefault())},innerRef:$,children:[(0,u.BX)(p.G,{css:F,children:[(0,u.BX)(p.G,{css:U,className:"controls",children:[P&&k?(0,u.tZ)(q.R,{findPrevious:k.findPrevious,findNext:k.findNext,exit:function(){return G(!1)}}):(0,u.tZ)(O.l,{onClick:function(){return G(!0)}}),(0,u.tZ)(T.Z,{onClick:function(){k&&(k.clear(),k.focus(),j())}})]}),K&&y?(0,u.tZ)(_,{clearDebug:j,parsedError:H,openPane:y}):null]}),V?null:(0,u.tZ)(l.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the console.'}),(0,u.tZ)(p.G,{css:X?C.EA.xterm:C.EA.xtermWithBorderRadius,innerRef:R}),v?(0,u.tZ)(N,{initialRunState:r.getRunState(),onBootStatus:v}):null]})};function _(e){var n=e.clearDebug,t=e.parsedError,r=e.openPane,i=(0,k.ql)();return(0,u.tZ)(p.G,{css:G,children:(0,u.tZ)(x,{onClick:function(){t&&(r({type:"ghostwriterChat"}),i({chatMessage:{type:"debugger",errorType:"console",text:(0,S.Vh)(t,"debugger")}}),n())}})})}var z=E.forwardRef(M)},22271:function(e,n,t){t.d(n,{N2:function(){return A},St:function(){return R},EA:function(){return I}});var r=t(2272),i=t(74985),o=t(50959),u=t(43312),a=t(30364),l=t(57392),c=t(57670),s=t(88149),f=t(17074),d=t(39995),h=t(61025),p=t(88965),v=t(26473),g=t(46130),m=t(48262),y=t(68408),w=t(9434),b=t(18837),Z=t(26942),x=t(90171),E=t(49684),S=t(55047),k=t(70232);function C(e){var n=e.sendInput,t=e.paste,r=(0,x.useRouter)(),i=(0,g.Vg)(r);(0,o.useEffect)((function(){if(i){var e=function(e){(0,S.gN)(e,(function(e){var r,i,o,u=e.type;switch(u){case E.cF.SHELL_INSERT_INPUT:i=e.id,o=e.input,n(o)?(0,S.gU)(i):(0,S.pl)(i);break;case E.cF.SHELL_COMMAND:"unknown"===(r=e.command)||(0,k.Z)(r);break;case E.cF.SHELL_PASTE_TEXT:t(e.text)?(0,S.gU)(e.id):(0,S.pl)(e.id);break;default:(0,k.Z)(u)}}))};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}}),[i,n,t])}var T=t(55102);function R(e){var n,t=e.onShellKey,i=e.onOutput,u=e.container,a=e.initialPwd,l=(0,r.Z)((0,b.Z)(),2),c=l[0],s=l[1],f=(0,y.Z)({service:"shell",container:u}),d=(0,T.K)({channelId:null===f||void 0===f||null===(n=f.channel)||void 0===n?void 0:n.id}),h=o.useRef(!1),p="",v="",g="",x=o.useCallback((function(e){if(!f.channel||!c)return!1;var n=u.client();if(!f.channel||"open"!==f.channel.status||n.getConnectionState()!==m.em.CONNECTED)return!1;var t=(0,Z.I)(e);return f.channel.send({input:t}),!0}),[c,f,u]);return C({sendInput:x,paste:function(e){return!!c&&(c.paste(e),!0)}}),o.useEffect((function(){if(f.channel&&c&&"open"===f.channel.status){var e=c.onKey((function(e){var n=e.key,r=e.domEvent;if("\r"===n){(0,w.j)(w.U3.SHELL_COMMAND_EVALED,{context:p});var i=v;v.endsWith(p)&&p.length>0&&(i=v.slice(0,-p.length)),d("user:shell:output:clean",{output:i,command:g}),d("user:shell:exec",{command:p}),d("user:shell:output",{output:v}),g=p,p="",v=""}else p+=n;t&&t(r)})),n=u.client(),r=c.onData((function(e){x(e)}));f.channel.onCommand((function(e){e.hint?c.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(c.write(e.output),null===i||void 0===i||i(e.output),v+=e.output)}));var o=function(){f.channel&&"open"===f.channel.status&&n.getConnectionState()===m.em.CONNECTED&&f.channel.send({resizeTerm:c.getSize()})};if(a&&!h.current){var l=a.replace(/"/g,'\\"');f.channel.send({input:'cd "'.concat(l,'"\n')}),h.current=!0}var s=c.onResize(o);return o(),function(){e.dispose(),r.dispose(),s.dispose()}}}),[f.channel,c,t,i,u,x,a]),[c,s,x]}var D=(0,u.iv)([p.l0.height("100%"),p.l0.overflow("hidden"),{"& .xterm":[p.l0.pl(8),p.l0.pt(8),p.l0.pb(4),p.l0.height("100%")]}]),I=(0,h.X)({container:[p.l0.coverContainer,{"&:focus-within .controls":{opacity:1}}],xterm:D,xtermWithBorderRadius:[D,{"& .xterm-viewport":[p.l0.borderRadius(0,0,8,8)]}]});function A(e){var n=e.shell,t=e.shellRef,u=e.className,h=(0,d.Z)().preferences.accessibleTerminal,m=(0,r.Z)(o.useState(!1),2),y=m[0],w=m[1],b=y&&n?(0,i.tZ)(a.R,{findPrevious:n.findPrevious,findNext:n.findNext,exit:function(){return w(!1)}}):(0,i.tZ)(l.l,{onClick:function(){return w(!0)}}),Z=(0,g.T3)();return(0,i.BX)(v.G,{className:u,css:[I.container],onKeyDown:function(e){"f"===e.key&&(0,s.j)(e)&&(w(!0),e.preventDefault())},children:[!h&&(0,i.tZ)(f.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,i.tZ)(v.G,{css:Z?I.xterm:I.xtermWithBorderRadius,innerRef:t}),n?(0,i.BX)(v.G,{className:"controls",css:[p.l0.position.absolute,p.l0.flex.row,p.l0.top(8),p.l0.right(8),p.l0.height(30),p.l0.align.center,{opacity:0,zIndex:4}],children:[b,(0,i.tZ)(c.Z,{onClick:n.clear})]}):(0,i.tZ)("code",{css:[p.l0.color.foregroundDimmest,p.l0.coverContainer,p.l0.p(8)],children:"Loading..."})]})}},13218:function(e,n,t){t.d(n,{Z:function(){return _}});var r=t(57135),i=t(2272),o=t(96583),u=t(74985),a=t(48306),l=t.n(a),c=t(50959),s=t(43182),f=t(92361),d=t(9434),h=t(34489),p=t(33033),v=t(48818),g=t(27773),m=t(21651),y=t(27352),w=t(61025),b=t(88965),Z=t(26473),x=t(55418),E=t(95141),S=t(95862),k=t(63723),C=t(34547),T=t(31146),R=t(97807),D=t(90171),I=t(72006),A=t(43119),P=t(71440),N=t(24635);function O(){var e=(0,A.Z)(["\n  query WorkspaceVncOutput($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        owner {\n          ... on Team {\n            id\n            username\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}var q={},L=(0,P.Ps)(O());var B,U=t(28317),G=t(60966);!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected",e.Errored="Errored"}(B||(B={}));var F="VNC_PASSWORD";function M(e){var n,t=function(e){var n=(0,I.Z)({},q,e);return N.a(L,n)}({skip:e.skip,variables:{replId:(0,C.Z)()}}).data,r="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null,i=null===r||void 0===r||null===(n=r.owner)||void 0===n?void 0:n.username;return r&&i?r.slug.length+i.length+2>63?null:function(e){var n=e.replSlug,t=e.username,r=(0,R.Z)()?T.js:T.ck,i=(0,T.mZ)(r);return"".concat(i,"//").concat(n,"--").concat(t,".").concat(r)}({username:i,replSlug:r.slug}):null}function _(e){var n=e.fs,a=e.container,w=(0,i.Z)(c.useState(null),2),b=w[0],Z=w[1],x=(0,i.Z)(c.useState(void 0),2),E=x[0],S=x[1],I=(0,i.Z)(c.useState(!1),2),A=I[0],P=I[1],N=(0,i.Z)(c.useState(B.Connecting),2),O=N[0],q=N[1],L=(0,i.Z)(c.useState(null),2),U=L[0],G=L[1],_=(0,i.Z)(c.useState(!1),2),z=_[0],H=_[1],j=(0,i.Z)(c.useState(!1),2),X=j[0],K=j[1],V=(0,i.Z)(c.useState(null),2),$=V[0],Y=V[1],Q=c.useRef(0),J=(0,v.Z)(),ee=(0,k.P5)({controlName:"flag-vnc-error-status",logFlagToAnalytics:!1}),ne=(0,k.P5)({controlName:"flag-vnc-dash-url",logFlagToAnalytics:!1}),te=(0,D.useRouter)().pathname,re=M({skip:!(ne&&("/replEnvironmentDesktop"===te||"/replEnvironmentMobile"===te)&&!(0,R.Z)())});(0,d.j)(d.U3.VNC_OPENED),c.useEffect((function(){if(re){if(a.getConnectionState()!==p.em.CONNECTED)return a.onConnectionStateChanged((function(e){e===p.em.CONNECTED&&re&&Y(re)}));if(!re)return;Y(re)}}),[a,re]),c.useEffect((function(){if(!re){if(a.getConnectionState()!==p.em.CONNECTED)return a.onConnectionStateChanged((function(e){e===p.em.CONNECTED&&a.getVncUrl().then((function(e){return Y(e)}))}));a.getVncUrl().then((function(e){return Y(e)}))}}),[a,re]);var ie=(0,i.Z)(c.useState(null),2),oe=ie[0],ue=ie[1],ae=c.useRef((function(){return null}));c.useEffect((function(){ae.current()}),[oe]);var le=(0,f.Z)((function(e){return ue(e.width&&e.height?{width:e.width,height:e.height}:null)}),{type:"throttle",wait:100}),ce=c.useRef((function(e){}));c.useEffect((function(){ce.current(X)}),[X]),c.useEffect((function(){if(!b){var e=!1;return t.e(994).then(t.bind(t,30994)).then((function(n){e||Z(n)})),function(){e=!0}}}),[b]),c.useEffect((function(){ee||O===B.Disconnected&&setTimeout((function(){J.current&&q(B.Connecting)}),Math.random()*(Math.pow(2,Q.current)-1)*1e3)}),[O,J,ee]),c.useEffect((function(){if(ee&&O===B.Disconnected){var e=setTimeout((function(){q(B.Connecting)}),Math.random()*(Math.pow(2,Q.current)-1)*1e3);return function(){clearTimeout(e)}}}),[O,J,ee]);var se=(0,C.Z)();c.useEffect((function(){if($&&U&&b&&O===B.Connecting){Q.current++;var e=b.default,t=a.getConnectionMetadata(),i={credentials:{username:null===t||void 0===t?void 0:t.token,password:E||""}};(0,d.j)(d.U3.VNC_CONNECTED);var u=new e(U,$,i);u.scaleViewport=!0,u.resizeSession=!0;var l=function(){J.current&&(Q.current=0,q(B.Connected))},c=function(e){var n=e.detail.capabilities.audio;H(void 0!==window.MediaSource&&!!n)},f=function(e){if(ae.current=function(){return null},ce.current=function(e){},u.removeEventListener("securityfailure",p),u.removeEventListener("disconnect",f),u.removeEventListener("capabilities",c),u.removeEventListener("connect",l),J.current){if(ee&&!e.detail.clean){var n=a.getConnectionMetadata(),t=n?(0,T.he)(n.token):null;return(0,d.j)(d.U3.VNC_ERRORED,{vncUrl:$,replId:se,cluster:null===t||void 0===t?void 0:t.cluster}),void q(B.Errored)}q(B.Disconnected)}},p=function(){if(J.current){var e=function(){P(!0)},t=function(){var t=(0,r.Z)((function(){var t,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.readFile(".env")];case 1:return t=o.sent(),J.current?t.error?(e(),[2]):(r=t.content.toString("utf8"),i=h.Z.parse(r),F in i?(S(i.VNC_PASSWORD),[2]):(e(),[2])):[2]}}))}));return function(){return t.apply(this,arguments)}}();t().catch((function(e){return s.Tb(e)}))}};return u.addEventListener("connect",l),u.addEventListener("capabilities",c),u.addEventListener("disconnect",f),u.addEventListener("securityfailure",p),ae.current=function(){return u._windowResize()},H(!1),K(!1),ce.current=function(n){n?((0,d.j)(d.U3.VNC_AUDIO_ENABLED),u.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):u.disableAudio()},function(){J.current||(ae.current=function(){return null},ce.current=function(e){},u.removeEventListener("securityfailure",p),u.removeEventListener("disconnect",f),u.removeEventListener("capabilities",c),u.removeEventListener("connect",l),u.disconnect())}}}),[b,U,a,$,n,E,O,J,ee,se]);var fe="vnc-output-".concat(O.toLowerCase());return(0,u.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[z?(0,u.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\ud83c\udfa7"," ",(0,u.tZ)("input",{type:"checkbox",checked:X,onChange:function(e){return K(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,u.tZ)("div",{ref:function(e){le(e),G(e)},"data-cy":fe,className:"jsx-612fb0831fb3a82c vnc-target"}),O===B.Connecting||O===B.Disconnected?(0,u.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,u.tZ)(g.Z,{size:32})}):null,O===B.Errored?(0,u.tZ)(W,{vncUrl:$,onRetry:function(){return q(B.Connecting)}}):null,(0,u.tZ)(m.u,{isOpen:A,onRequestClose:function(){return P(!1)},children:(0,u.tZ)(y.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return P(!1)},onConfirm:function(e){S(e),P(!1)}})}),(0,u.tZ)(l(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}var z=(0,w.X)({root:[b.l0.coverContainer,b.l0.center,b.l0.p(16)],inner:[b.l0.colWithGap(8),b.l0.width(250)],diagnosisContent:[b.l0.py(8)]});function W(e){var n=e.vncUrl,t=e.onRetry,r=null;if(n){var i=new URL("wss://10622591-6a32-44be-aa89-1421705f33ea.id.repl.co").hostname;r=(0,u.tZ)(U.Q,{headerContent:"Diagnosis",children:(0,u.tZ)(Z.G,{css:[z.diagnosisContent],children:(0,u.tZ)(G.ZP,{children:"Open this link and check if you can visit this URL from your browser:\n[".concat(i,"](https://").concat(i,").\n\nIf you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n")})})})}return(0,u.tZ)(Z.G,{css:z.root,children:(0,u.BX)(Z.G,{css:z.inner,children:[(0,u.tZ)(x.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,u.tZ)(E.zx,{iconLeft:(0,u.tZ)(S.Z,{}),text:"Try again",onClick:t})]})})}},10210:function(e,n,t){t.d(n,{T:function(){return y},W:function(){return w}});var r=t(57135),i=t(2272),o=t(96583),u=t(91926),a=t(20575),l=t(4561),c=t(12583),s=t(20854),f=t(43119),d=t(71440);function h(){var e=(0,f.Z)(["\n  query LoadDefaultFile($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return h=function(){return e},e}var p=(0,d.Ps)(h());var v=t(87978),g=".replit",m="replit.nix";function y(e,n){var t=n.startsWith("nix"),r=t?null:u.ZP.getMainFileName(n);if(r&&u.ZP.usesInterpreter(n)&&e.includes(r))return r;if(e.includes("Makefile"))return"Makefile";if(r&&e.includes(r))return r;if(!t&&e.includes(g))return".replit";var i=e.find(v.gK);return i||e.find((function(e){return(!t||![g,m].includes(e))&&!(0,a.C)(e)}))}function w(e){return b.apply(this,arguments)}function b(){return b=(0,r.Z)((function(e){var n,t,u,a,f,d,h,g,m,w,b,Z,x;function E(){return S.apply(this,arguments)}function S(){return S=(0,r.Z)((function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return(e=null===g||void 0===g?void 0:g.entrypoint)?(0,v.Il)(e)?[4,t.stat(e)]:[2,b.includes(e)?e:null]:[2,null];case 1:return[2,(n=r.sent()).exists&&n.type===l.Tv.File?e:null]}}))})),S.apply(this,arguments)}return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(n=e.dotReplit,t=e.fs,u=e.replId,!s.l)throw new Error("Expected apollo client");return[4,Promise.all([s.l.query({query:p,variables:{replId:u}}),t.readDir(c.Ql),n.getConfig()])];case 1:if(a=i.Z.apply(void 0,[r.sent(),3]),f=a[0].data,d=a[1],h=a[2],g=h.config,!d||d.error)throw new Error("Could not read files");return m=d.children,w=m.find((function(e){return e.type===l.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")})),b=m.filter((function(e){return e.type===l.Tv.File})).map((function(e){return e.filename})),[4,E()];case 2:return(Z=r.sent())?[2,{entrypoint:Z,readmeFile:null===w||void 0===w?void 0:w.filename}]:(x="Repl"===f.repl.__typename?f.repl.language:"",[2,{entrypoint:y(b,x),readmeFile:null===w||void 0===w?void 0:w.filename}])}}))})),b.apply(this,arguments)}},2462:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()}))}}function i(e){return new Promise((function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t}))}function o(e){return new Promise((function(n,t){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(o){var u=r.map((function(n){return o.drawImage(n,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));n({frames:u,preview:e.frames[0],width:e.width,height:e.height})}else t(new Error("failed to get canvas ctx"))})).catch(t)}))}t.d(n,{C:function(){return r},u:function(){return o}})},94327:function(e,n,t){t.d(n,{z:function(){return u}});var r=t(20575),i=t(12583),o=t(94284);function u(e){var n=e.siblingNames,t=e.fileName,u=e.initialValue,a=e.parentPath;if(t.includes("/"))return"File names cannot include forward slashes";if("."===t||".."===t)return'File names cannot be "'.concat(t,'"');if(t.match(/^\s/)||t.match(/\s$/))return"File names cannot start or end with whitespace";if(u!==t&&n.includes(t))return"A file or folder with that name already exists";if(t.length>100)return"File names cannot be longer than 100 characters";var l=a===i.Ql?t:a+"/"+t;return l===o.w?"You can create environment variables with the Secrets tool! (.env files are deprecated)":(0,r.C)(l)?'"'.concat(l,'" is reserved'):null}},18837:function(e,n,t){t.d(n,{Z:function(){return z}});var r,i=t(57135),o=t(2272),u=t(96583),a=t(43182),l=t(51467),c=t(39995),s=t(88794),f=t(54789),d=t(9558),h=t(50959),p=t(92361),v=t(30826);var g=t.n(v)()((function(){if("undefined"!==typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),(function(t){n.buffer=t,n.connect(e.destination),n.start(0)}))}}),500,{leading:!0,trailing:!0}),m="replit-icons-font";function y(){if(!document.getElementById(m)){var e=document.createElement("style");e.id=m,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}var w=t(7131),b="BESbswy",Z=3e3;function x(e){return E.apply(this,arguments)}function E(){return(E=(0,i.Z)((function(e){return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return document.fonts?[4,k(document.fonts,e)]:[3,2];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([T("serif",e),T("sans-serif",e),T("monospace",e)])]}}))}))).apply(this,arguments)}function S(e){var n=e.family,t=e.style,r=void 0===t?"normal":t,i=e.weight,o=void 0===i?"normal":i;return"".concat(r," ").concat(o," 100px ").concat(n)}function k(e,n){return C.apply(this,arguments)}function C(){return(C=(0,i.Z)((function(e,n){var t,r,i,o,a,l;return(0,u.__generator)(this,(function(u){return t=n.fontInfo,r=n.characters,i=void 0===r?b:r,o=n.timeout,a=void 0===o?Z:o,l=S(t),[2,new Promise((function(n,r){var o=!1,u=w.kg.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout((function(){o=!0,u("xterm font loading timed out"),n()}),a);e.load(l,i).then((function(){o||(u("xterm font loaded"),clearTimeout(c),n())})).catch((function(e){o||(clearTimeout(c),r(e))}))}))]}))}))).apply(this,arguments)}function T(e,n){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)((function(e,n){var t,r,i,o,a,l,c,s,f;return(0,u.__generator)(this,(function(u){return t=n.fontInfo,r=n.characters,i=void 0===r?b:r,o=n.timeout,a=void 0===o?Z:o,l=S(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),s=c.offsetWidth,c.style.font=l,(f=function(){return s!==c.offsetWidth})()?[2]:[2,new Promise((function(e,n){var r=setInterval((function(){f()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())}),50),i=setTimeout((function(){clearInterval(r),document.body.removeChild(c),f()?e():n(new Error("Font loading timed out "+t.family))}),a)}))]}))}))).apply(this,arguments)}function D(e){a.Tb(e)}var I='"ReplitHack"',A=400,P=700,N=String.fromCharCode(61095);function O(){return q.apply(this,arguments)}function q(){return(q=(0,i.Z)((function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return y(),[4,Promise.all([x({fontInfo:{family:"replit-icons"},characters:N}).catch(D),x({fontInfo:{family:I,weight:A.toString()}}).catch(D),x({fontInfo:{family:I,weight:A.toString(),style:"italic"}}).catch(D),x({fontInfo:{family:I,weight:P.toString()}}).catch(D),x({fontInfo:{family:I,weight:P.toString(),style:"italic"}}).catch(D)])];case 1:return e.sent(),[2]}}))}))).apply(this,arguments)}var L=t(49313),B=t(72123),U=t(28863),G=t(12901),F=t(59213);function M(){return Promise.all([(0,f.Z)((function(){return t.e(9784).then(t.t.bind(t,95244,23))})),(0,f.Z)((function(){return t.e(8296).then(t.t.bind(t,20229,23))})),(0,f.Z)((function(){return t.e(4925).then(t.t.bind(t,24925,23))})),(0,f.Z)((function(){return t.e(4420).then(t.t.bind(t,14420,23))})),(0,f.Z)((function(){return t.e(3573).then(t.t.bind(t,23573,23))})),(0,f.Z)((function(){return t.e(563).then(t.bind(t,563))})),(0,f.Z)((function(){return t.e(4239).then(t.t.bind(t,74239,23))})),(0,f.Z)((function(){return t.e(9058).then(t.t.bind(t,69058,23))}))])}function _(){if(function(){if(!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||parseInt(e[1],10)<16}())return!1;var e=document.createElement("canvas").getContext("webgl2");return Boolean(e)}function z(e){var n=(0,h.useState)(null),r=n[0],s=n[1],f=(0,h.useState)(null),v=f[0],m=f[1],y=(0,L.f)(),w=(0,c.Z)().preferences,b=w.fontSize,Z=w.accessibleTerminal,x=(0,d.uV)(),E=(0,G.Z)(),S=null===e||void 0===e?void 0:e.openFile,k=null===e||void 0===e?void 0:e.listFiles,C={screenReaderMode:Z,fileLinking:(0,h.useMemo)((function(){return S&&k?{openFile:S,listFiles:k}:null}),[S,k]),terminalTheme:y,fontSize:b,scrollback:null===e||void 0===e?void 0:e.scrollback},T=(0,l.Z)(C),R=(0,p.Z)((function(){!1!==(null===e||void 0===e?void 0:e.autoFit)&&(null===v||void 0===v||v.fit())}),{type:"debounce",wait:200}),D=(0,h.useRef)(null),N=(0,l.Z)(null===e||void 0===e?void 0:e.size),q=(0,B.Sy)();return(0,h.useLayoutEffect)((function(){if(r){var e=[];return function(){return n.apply(this,arguments)}().catch((function(e){e.message&&e.message.toLowerCase().includes("loading chunk")?a.$e((function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),a.Tb(new Error("Loading chunk failed"))})):x({error:e,origin:"Xterm: init"})})),function(){e.forEach((function(e){return e()}))}}function n(){return n=(0,i.Z)((function(){var n,t,i,a,l,c,s,f,d,h,p,v,y,w,b,Z,x,S,k,C,L;function G(e,n){F.X.openExternalUrl(n)}return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,Promise.all([M(),O()])];case 1:return i=o.Z.apply(void 0,[u.sent(),1]),a=(0,o.Z)(i[0],8),l=a[0].Terminal,c=a[1].FitAddon,s=a[2].SearchAddon,f=a[3].WebLinksAddon,d=a[4].Unicode11Addon,h=a[5].FileLinkAddon,p=a[6].CanvasAddon,v=a[7].WebglAddon,r?(w={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(y=T.current.scrollback)&&void 0!==y?y:1e3,tabStopWidth:4,fontFamily:"".concat(I,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:T.current.fontSize,lineHeight:1,fontWeight:A,fontWeightBold:P,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:T.current.terminalTheme,screenReaderMode:T.current.screenReaderMode},void 0!==(null===(n=N.current)||void 0===n?void 0:n.cols)&&(w.cols=N.current.cols),void 0!==(null===(t=N.current)||void 0===t?void 0:t.rows)&&(w.rows=N.current.rows),b=new l(w),T.current.fileLinking?(D.current=new h(T.current.fileLinking.openFile,T.current.fileLinking.listFiles),b.loadAddon(D.current)):D.current=null,Z=new c,b.loadAddon(Z),x=new f(E?G:void 0),b.loadAddon(x),S=new s,b.loadAddon(S),k=new d,b.loadAddon(k),b.unicode.activeVersion="11",b.onBell(g),b.open(r),e.push((function(){return b.dispose()})),function(){try{if(!_()){var e=new p;return void b.loadAddon(e)}var n=new v;b.loadAddon(n)}catch(r){var t=new p;b.loadAddon(t)}}(),C=!1,L=null,b.attachCustomKeyEventHandler((function(e){var n=(0,U.IX)(e);if(n){var t=n;L&&(t=(0,U.cZ)(L,n));var r=q(t);switch(r.kind){case B.Xp.NoMatch:L=null;break;case B.Xp.WaitingForChord:return L=r.key,!1;case B.Xp.MatchFound:return L=null,!1}}return!!W(b,e)&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!C)&&(C="escape"===e.key.toLowerCase(),!0))})),m({onKey:b.onKey.bind(b),onData:b.onData.bind(b),onResize:b.onResize.bind(b),write:b.write.bind(b),fit:function(){var e=r.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&Z.fit()},focus:function(){return b.focus()},clear:function(){return b.clear()},findPrevious:function(e,n){return S.findPrevious(e,n)},findNext:function(e,n){return S.findNext(e,n)},getSize:function(){return{cols:b.cols,rows:b.rows}},paste:function(e){return b.paste(e)},_term:b}),R(r),[2]):[2]}}))})),n.apply(this,arguments)}}),[r,R,T,x,N,q,E]),function(e,n,r){var i=r.screenReaderMode,o=r.fileLinking,u=r.terminalTheme;(0,h.useEffect)((function(){e&&u&&(e.options.theme=u)}),[e,u]),(0,h.useEffect)((function(){e&&(e.options.screenReaderMode=i)}),[e,i]),(0,h.useEffect)((function(){if(e)if(o){if(!n.current){var r=!1;return t.e(563).then(t.bind(t,563)).then((function(t){var i=t.FileLinkAddon;r||(n.current=new i(o.openFile,o.listFiles),e.loadAddon(n.current))})),function(){r=!0}}n.current.update(o.openFile,o.listFiles),n.current.reactivate()}else n.current&&n.current.deactivate()}),[e,o,n])}(null===v||void 0===v?void 0:v._term,D,C),(0,h.useEffect)((function(){var e=null===v||void 0===v?void 0:v._term;e&&b&&e.options.fontSize!==b&&(e.options.fontSize=b,e.refresh(0,e.rows-1),v.fit())}),[b,v]),[v,s]}function W(e,n){return!window.navigator.clipboard||("c"!==n.key.toLowerCase()||!n.ctrlKey||!n.shiftKey||("keyup"===n.type&&e.hasSelection()&&(0,s.Z)(e.getSelection()).catch((function(e){a.$e((function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),a.Tb(e)}))})),n.preventDefault(),n.stopPropagation(),!1))}},26942:function(e,n,t){t.d(n,{I:function(){return o}});var r="\x1b[200~",i="\x1b[201~";function o(e){return function(e){return e.startsWith(r)&&e.endsWith(i)}(e)?e.slice(r.length,e.length-i.length):e}},49313:function(e,n,t){t.d(n,{f:function(){return u}});var r=t(87693),i=t(45317),o=t(50959);function u(){var e=(0,r.F)().values;return(0,o.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)}),[e])}},64918:function(e,n,t){t.d(n,{J1:function(){return c},ce:function(){return g},hf:function(){return h},uL:function(){return l},yL:function(){return d}});var r,i=t(9970),o=t(17403),u=t(52783),a=t(46486);function l(e){return u.B4.Check(o.Type.Union([a.LD,a.t3]),e)}function c(e){return u.B4.Check(a.vD,e)}!function(e){e.Response="response",e.Error="error",e.Debug="debug",e.Intent="intent",e.TokenUsage="tokenUsage"}(r||(r={}));var s={messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:8e3,maxTotalTokens:4050},f={"codechat-bison":s,"text-davinci-003":s,"gpt-3.5-turbo":s,"gpt-3.5-turbo-0613":s,"gpt-3.5-turbo-0301":s,"gpt-3.5-turbo-16k-0613":{messageCharacters:5e3,responseTokens:4e3,fileContextCharacters:34e3,maxTotalTokens:16e3},"gpt-4":{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:12e3,maxTotalTokens:8e3},"gpt-4-32k":{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:48e3,maxTotalTokens:32e3}};function d(e){return f[e]}var h={model:"gpt-4",weeklyTokenLimit:621e3},p=a.LD.anyOf.map((function(e){return e.const})),v=a.t3.const,g=(0,i.Z)(p).concat([v])},34489:function(e,n,t){function r(e){var n=e.trim();return 0===n.length||n.startsWith("#")}function i(e,n){return e.split(n).length-1}function o(e){if(!e.includes("#"))return e;var n=e.split("#"),t=!1,r=[],o=!0,u=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;(1===i(s,'"')||i(s,"'"))&&(t?(t=!1,r.push(s)):t=!0),(0===r.length||t)&&r.push(s)}}catch(f){u=!0,a=f}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}return r.join("#")}function u(e,n){var t=e.trim();if(0===t.length)return t;var r=t.length-1,i='"'===t[0]&&'"'===t[r],o="'"===t[0]&&"'"===t[r];return(o||i)&&(t=t.slice(1,-1)),i&&(t=(t=t.replace(/\\./g,(function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e}))).replace(/\\([^$])/g,"$1")),o||(t=t.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,(function(e){var t=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===t)return e;if("\\"===t[1]||"("===t[2])return t[0].slice(1);var r=t[4];return""!==r?n[r]||"":e}))),t}t.d(n,{Z:function(){return l}});var a=t(2272);var l={parse:function(e){var n={},t=e.split(/\n|\r|\r\n/),i=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value;if(!r(f)){var d=(f=o(f)).indexOf("="),h=f.indexOf(":");if(-1!==h||-1!==d){var p=d;-1!==h&&(h<d||-1===d)&&(p=h);var v=f.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),g=u(f.slice(p+1),n);n[v]=g}}}}catch(m){a=!0,l=m}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}return n},serialize:function(e){return Object.entries(e).reduce((function(e,n){var t=(0,a.Z)(n,2),r=t[0],i=t[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+="".concat(r,'="').concat(i,'"\n')}),"")}}},91046:function(e,n,t){t.d(n,{BP:function(){return o},BY:function(){return i},U4:function(){return r.U4},Vh:function(){return u},fF:function(){return r.fF},tr:function(){return r.tr}});var r=t(97836);function i(e){if(!e)throw new Error("Expected baseUrl");var n;try{n=new URL(e)}catch(t){throw new Error("baseUrl failed to parse as URL")}if("https:"!==n.protocol)throw new Error("baseUrl must use https");return n.href.replace(/\/$/,"")}function o(e){return u(e,"extension.json")}function u(e,n){var t=i(e);return new URL(n,t).href}},97836:function(e,n,t){t.d(n,{MU:function(){return C},U4:function(){return E},fF:function(){return k},tr:function(){return S}});var r=t(2272),i=t(17403),o=t(52783),u=t(72963),a=t.n(u),l=t(14723),c=t(32508),s=t.n(c),f=t(14709),d=t.n(f),h=t(94099),p=i.Type.String({minLength:1,maxLength:64}),v=i.Type.Object({path:i.Type.String({minLength:1}),label:i.Type.String({minLength:1})}),g=i.Type.Object({image:(0,h.K5)(i.Type.String({minLength:1})),title:i.Type.String({minLength:1,maxLength:60}),body:i.Type.String({minLength:1,maxLength:512})}),m=i.Type.Object({glob:i.Type.String({minLength:1}),handler:i.Type.String({minLength:1}),name:(0,h.K5)(i.Type.String({minLength:1})),icon:(0,h.K5)(i.Type.String({minLength:1}))}),y=i.Type.Object({handler:i.Type.String({minLength:1}),name:(0,h.K5)(i.Type.String({minLength:1})),icon:(0,h.K5)(i.Type.String({minLength:1}))}),w=i.Type.Union(l.l.map((function(e){return i.Type.Literal(e)}))),b=i.Type.Object({name:w,reason:i.Type.String()}),Z=i.Type.Object({page:i.Type.String()}),x=i.Type.Object({name:i.Type.String({minLength:1,maxLength:60}),description:i.Type.String({minLength:1,maxLength:255}),scopes:(0,h.K5)(i.Type.Array(b)),longDescription:(0,h.K5)(i.Type.String({minLength:1})),icon:(0,h.K5)(i.Type.String({minLength:1})),tags:(0,h.K5)(i.Type.Array(p,{maxItems:16})),coverImages:(0,h.K5)(i.Type.Array(v,{maxItems:16})),fileHandlers:(0,h.K5)(i.Type.Array(m,{maxItems:4})),tools:(0,h.K5)(i.Type.Array(y,{maxItems:4})),website:(0,h.K5)(i.Type.String()),authorEmail:(0,h.K5)(i.Type.String()),background:(0,h.K5)(Z),features:(0,h.K5)(i.Type.Array(g,{minItems:1,maxItems:10}))});function E(e){var n=function(n,t,r){return{manifest:null,error:new h.Jg([{type:t,schema:x,path:n,value:e,message:r}])}};if(o.B4.Check(x,e)){if(e.website&&!s()(e.website))return n("website",o.B0.StringFormat,"website must be a valid url");if(e.authorEmail&&!d()(e.authorEmail))return n("authorEmail",o.B0.StringFormat,"authorEmail must be a valid email");var t,i,u=null!==(t=e.fileHandlers)&&void 0!==t?t:[],l=!0,c=!1,f=void 0;try{for(var p,v=u.entries()[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var g=(0,r.Z)(p.value,2),m=g[0],y=g[1];if(!a()(y.glob))return n("fileHandlers[".concat(m,"].glob"),o.B0.StringFormat,"glob must be a valid glob pattern")}}catch(B){c=!0,f=B}finally{try{l||null==v.return||v.return()}finally{if(c)throw f}}if(u&&u.length>1){var w=!0,b=!1,Z=void 0;try{for(var E,S=u.entries()[Symbol.iterator]();!(w=(E=S.next()).done);w=!0){var k=(0,r.Z)(E.value,2),C=k[0],T=k[1];if(!T.icon||!T.name)return n("fileHandlers[".concat(C,"]"),o.B0.ObjectRequiredProperty,"When at least two fileHandlers are provided, they must all specify a name and icon")}}catch(B){b=!0,Z=B}finally{try{w||null==S.return||S.return()}finally{if(b)throw Z}}}var R=null!==(i=e.tools)&&void 0!==i?i:[];if(R&&R.length>1){var D=!0,I=!1,A=void 0;try{for(var P,N=R.entries()[Symbol.iterator]();!(D=(P=N.next()).done);D=!0){var O=(0,r.Z)(P.value,2),q=O[0],L=O[1];if(!L.icon||!L.name)return n("tool[".concat(q,"]"),o.B0.ObjectRequiredProperty,"When at least two tools are provided, they must all specify a name and icon")}}catch(B){I=!0,A=B}finally{try{D||null==N.return||N.return()}finally{if(I)throw A}}}return{manifest:e,error:null}}return{manifest:null,error:(0,h.ZA)(x,e)}}function S(e){var n=E(e);if(n.manifest)return n.manifest;throw n.error}function k(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:null!==(e=t.name)&&void 0!==e?e:"Unnamed Extension",description:null!==(n=t.description)&&void 0!==n?n:"(no description)"}}function C(e,n){return!!e.scopes&&void 0!==e.scopes.find((function(e){return e.name===n}))}},14723:function(e,n,t){t.d(n,{k:function(){return r},l:function(){return i}});var r=[{key:"read",friendlyName:"Read files",description:"Read any file in your Repl"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your Repl and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your Repl"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your Repl"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}];var i=r.map((function(e){return e.key}))},22126:function(e,n,t){function r(e,n){return{ok:!1,error:e,errorExtras:n}}function i(e){return{ok:!0,value:e}}t.d(n,{Ok:function(){return i},U:function(){return r}});var o={Ok:i,Err:r};n.Z=o},59253:function(e,n,t){t.d(n,{MF:function(){return l},TI:function(){return a},lv:function(){return f},uC:function(){return c},yb:function(){return s}});var r=t(91926),i=t(12583),o=t(26289),u=t(92404);function a(e){var n=(0,u.nV)(e)[1];return!!n&&(n===i.oh||n===i.AS)}function l(e){return".env"===e.toString()||".breakpoints"===e.toString()||".cache"===e.toString()||(0,u.X2)((0,u.S1)(".cache"),e)}function c(e){return o.nh.includes(e.toString())}function s(e,n){return Boolean(n&&r.ZP.isLangFileBinary(n,e.toString()))}function f(e,n){if(!n)return!1;var t=(0,u.nV)(e).slice(1),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=!0,f=!1,d=void 0;try{for(var h,p=t[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){if(h.value.toString().match(c))return!0}}catch(v){f=!0,d=v}finally{try{s||null==p.return||p.return()}finally{if(f)throw d}}}}catch(v){i=!0,o=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return!1}},51446:function(e,n,t){t.d(n,{Y:function(){return o}});var r=t(57135),i=t(96583);function o(e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){return n=e.container,t=e.service,[2,new Promise((function(e){var r=n.openChannel({service:t},(function(n){var t=n.channel;return e([t,r]),r}))}))]}))}))).apply(this,arguments)}},22946:function(e,n,t){t.d(n,{Z:function(){return d}});var r,i=t(57135),o=t(2272),u=t(96583),a=t(19499),l=t(43182),c=t(27327),s=t(22126),f=t(51446);function d(e){var n=e.container,t=function(e){var n=p.get(e);return n||(n={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},p.set(e,n),n)},d=function(e){var i=t(e);if(i.didCallOpenChannel)throw new Error("Already called open channel");i.didCallOpenChannel=!0,i.closeChannel=n.openChannel({service:"packager3",name:e||"packager",action:a.api.OpenChannel.Action.ATTACH_OR_CREATE},(function(n){var t=n.channel;return t.onCommand((function(n){if(null!=n.state){var t=n.state===a.api.State.Running;h.emit(r.STATE_CHANGED,t,e)}else null!=n.output?h.emit(r.OUTPUT,n.output,e):null!=n.error&&h.emit(r.ERROR,n.error,e)})),e?t.request({packageSetPackagerRequest:{packagerId:e}}).then((function(){i.packagerChannel=t,h.emit(r.CHANNEL_OPENED,t,e)})):(i.packagerChannel=t,h.emit(r.CHANNEL_OPENED,t,e)),function(){i.packagerChannel=null}}))},h=(0,c.ZP)(),p=new Map;function v(e){return g.apply(this,arguments)}function g(){return g=(0,i.Z)((function(e){var t,r,i,a,l=arguments;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:0,[4,(0,f.Y)({container:n,service:"packager3"})];case 1:return r=o.Z.apply(void 0,[u.sent(),2]),i=r[0],a=r[1],e?[4,i.request({packageSetPackagerRequest:{packagerId:e}})]:[3,3];case 2:u.sent(),u.label=3;case 3:if("open"!==i.status){if(t>5)throw new Error("Failed to getAnonymousPackagerChannel");return[2,v(e,t+1)]}return[2,[i,a]]}}))})),g.apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)((function(e){var n;return(0,u.__generator)(this,(function(i){return(n=t(e)).didCallOpenChannel||d(e),n.packagerChannel&&"open"===n.packagerChannel.status?[2,n.packagerChannel]:[2,new Promise((function(n){h.once(r.CHANNEL_OPENED,(function(t,r){r===e&&n(t)}))}))]}))}))).apply(this,arguments)}return{addPackages:function(e,n){return(0,i.Z)((function(){var t,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,m(n)];case 1:return"open"!==(t=o.sent()).status?[2,!1]:(r=e.map((function(e){return{name:e.name,spec:e.version}})),[4,t.request({packageAdd:{pkgs:r}})]);case 2:return(i=o.sent()).channelClosed?[2,!1]:[2,Boolean(i.ok)]}}))}))()},removePackages:function(e,n){return(0,i.Z)((function(){var t,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,m(n)];case 1:return"open"!==(t=o.sent()).status?[2,!1]:(r=e.map((function(e){return{name:e}})),[4,t.request({packageRemove:{pkgs:r}})]);case 2:return(i=o.sent()).channelClosed?[2,!1]:[2,Boolean(i.ok)]}}))}))()},searchPackages:function(e,n){return(0,i.Z)((function(){var t,r,i,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,v(n)];case 1:return t=o.Z.apply(void 0,[u.sent(),2]),r=t[0],i=t[1],[4,r.request({packageSearch:{query:e}})];case 2:return(a=u.sent()).channelClosed?[2,[]]:(i(),"packageSearchResp"===a.body&&a.packageSearchResp?[2,a.packageSearchResp.results||[]]:(l.Tb(new Error("Unknown packager3 command ".concat(a.body,". ")+"Expected packageSearchResp. Received error: ".concat(a.error))),[2,[]]))}}))}))()},fetchPackageInfo:function(e,n){return(0,i.Z)((function(){var t,r,i,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,v(n)];case 1:return t=o.Z.apply(void 0,[u.sent(),2]),r=t[0],i=t[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:return(a=u.sent()).channelClosed?[2,void 0]:(i(),"packageInfoResp"===a.body&&a.packageInfoResp?[2,a.packageInfoResp.pkg||void 0]:(l.Tb(new Error("Unknown packager3 command ".concat(a.body,". ")+"Expected packageInfoResp. Received error: ".concat(a.error))),[2,void 0]))}}))}))()},installPackages:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,i.Z)((function(){var t,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,m(e)];case 1:return"open"!==(t=o.sent()).status?[2,(0,s.U)("ChannelClosed")]:[4,t.request({packageInstall:{useNewResponse:!0,disableGuess:n}})];case 2:return(r=o.sent()).error?[2,(0,s.U)(r.error)]:r.channelClosed?[2,(0,s.U)("ChannelClosed")]:(i=r.packageInstallResponse)?[2,(0,s.Ok)(i)]:[2,(0,s.U)("No package install response found")]}}))}))()},listSpecfile:function(e){return(0,i.Z)((function(){var n,t,r,i,a,c,s;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,v(e)];case 1:return n=o.Z.apply(void 0,[u.sent(),2]),t=n[0],r=n[1],[4,t.request({packageListSpecfile:{}})];case 2:if((i=u.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":return(c=null===(a=i.packageListSpecfileResp)||void 0===a?void 0:a.pkgs)?[2,{packages:c,error:null}]:[2,{packages:null,error:"list specfile returned an empty response"}];default:return s="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",l.Tb(new Error(s)),[2,{packages:null,error:s}]}return[2]}}))}))()},getPackagerIds:function(){return Array.from(p.keys())},clearPackager:function(e){var n=p.get(e);(null===n||void 0===n?void 0:n.closeChannel)&&n.closeChannel(),p.delete(e)},onOutput:function(e){return h.on(r.OUTPUT,e),function(){h.removeListener(r.OUTPUT,e)}},onError:function(e){return h.on(r.ERROR,e),function(){h.removeListener(r.ERROR,e)}},onStateChanged:function(e){return h.on(r.STATE_CHANGED,e),function(){h.removeListener(r.STATE_CHANGED,e)}}}}!function(e){e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED"}(r||(r={}))},62069:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(57135),i=t(96583),o=t(50968),u=t(88688);function a(e){var n=e.container,t=e.dotReplit,a=function(){return s.current?Promise.resolve(s.current):new Promise((function(e){var n=s.subscribe((function(t){t&&(n(),e(t))}))}))},l=(0,o.u)(null),c=(0,o.u)(null),s=(0,o.u)(null);return n.openChannel({service:"toolchain"},(function(e){var n=e.channel;s.set(n);var t=n.onCommand((function(e){e.toolchainChanged?l.current=e.toolchainChanged.configs:e.nixModulesChanged&&(c.current=e.nixModulesChanged.modules)}));return n.request({toolchainGetRequest:{}}).then((function(e){var n;l.current=(null===(n=e.toolchainGetResponse)||void 0===n?void 0:n.configs)||null})),n.request({nixModulesGetRequest:{}}).then((function(e){var n;c.current=(null===(n=e.nixModulesGetResponse)||void 0===n?void 0:n.modules)||null})),function(){t()}})),{configs:l,modules:c,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise((function(e){var n=l.subscribe((function(t){if(n(),null===t)throw new Error("Returned toolchain config should not be null");e(t)}))}))},getRegistry:function(){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,a()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,e.sent().nixModulesGetRegistryResponse||null]}}))}))()},addModule:function(e){return(0,r.Z)((function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==u.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return-1!==(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).indexOf(e)?[3,3]:(r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])]);case 2:i.sent(),i.label=3;case 3:return[2]}}))}))()},removeModule:function(e){return(0,r.Z)((function(){var n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==u.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[],(a=r.filter((function(n){if(e===n)return!1;var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e}))).length===r.length?[2]:[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(a)}])];case 2:return i.sent(),[2]}}))}))()},upgradeModule:function(e,n){return(0,r.Z)((function(){var r,o,a,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==u.Yt.NotFound)throw new Error("Failed to read .replit"+o.error);return a=(null===(r=o.config)||void 0===r?void 0:r.modules)||[],l=a.map((function(t){return e===t?n:t})),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}}))}))()},buildModules:function(){return(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=this,[4,a()];case 1:return n=t.sent(),[2,new Promise((function(t){var r=e.configs.subscribe((function(e){e&&(r(),t(void 0))}));n.send({nixModulesBuildRequest:{}})}))]}}))})).apply(this)}}}},94099:function(e,n,t){t.d(n,{Jg:function(){return v},K5:function(){return p},ZA:function(){return g}});var r=t(66091),i=t(5683),o=t(9970),u=t(83451),a=t(45347),l=t(17403),c=t(52783),s=t(98278),f=t.n(s),d=t(92087),h=t.n(d);l.FormatRegistry.Set("uuid",(function(e){return f()(e)})),l.FormatRegistry.Set("date-time",(function(e){return h()(e)}));var p=function(e){return l.Type.Optional(l.Type.Union([l.Type.Null(),e]))},v=function(e){"use strict";(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).name="Schema validation error",i.message=e.map((function(e){return"".concat(e.path,": ").concat(e.message)})).join("\n"),i.issues=e,i}return t}((0,u.Z)(Error));function g(e,n){var t=(0,o.Z)(c.B4.Errors(e,n));return new v(t)}}}]);
//# sourceMappingURL=9749-f628db1b3eb9c2ba.js.map