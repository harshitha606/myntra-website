!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e8dda5c1-f7f9-4aa0-9d99-4e332fab27e1",e._sentryDebugIdIdentifier="sentry-dbid-e8dda5c1-f7f9-4aa0-9d99-4e332fab27e1")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"15e16f7d"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9863],{44038:function(e,t,n){n.d(t,{Z:function(){return l},c:function(){return r}});var r="https://twitter.com/intent/tweet";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.url,l=e.hashtags,i=e.via,a=new URLSearchParams;t&&a.append("text",t),n&&a.append("url",n),l&&a.append("hashtags",l.join(",")),i&&a.append("via",i);var o=a.toString();return o.length>0?"".concat(r,"?").concat(o):r}},97652:function(e,t,n){function r(e,t){var n=t.existing,r=t.getKey,l=new Map,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;l.set(r(c),c)}}catch(S){a=!0,o=S}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var d=new Set,p=[],h=!0,f=!1,g=void 0;try{for(var v,m=n[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var Z=r(v.value),b=l.get(Z);b&&(p.push(b),d.add(Z))}}catch(S){f=!0,g=S}finally{try{h||null==m.return||m.return()}finally{if(f)throw g}}var w=!0,y=!1,R=void 0;try{for(var x,G=e[Symbol.iterator]();!(w=(x=G.next()).done);w=!0){var C=x.value;d.has(r(C))||p.push(C)}}catch(S){y=!0,R=S}finally{try{w||null==G.return||G.return()}finally{if(y)throw R}}return p}n.d(t,{Z:function(){return r}})},59706:function(e,t,n){n.d(t,{Z:function(){return hn}});var r=n(57389),l=n(74985),i=n(50959),a=n(26473),o=n(86080),s=n(88965),u=n(53312),c=n(27773),d=n(57135),p=n(72006),h=n(4405),f=n(2272),g=n(96583),v=n(95141),m=n(55418),Z=n(37268),b=n(61623),w=n(79824),y=n(29884),R=n(89138),x=n(18314),G=n(79451),C=n(38110),S=n(66091),T=n(5683),B=n(83451),I=n(45347),V=n(3341),k=n.n(V),P=n(51631),_=n(43119),F=n(71440),U=n(24635);function E(){var e=(0,_.Z)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}var D={},W=(0,F.Ps)(E(),o.FW);var X=n(15436),L=n(23789),z=n(51467),A=n(50216);function H(){var e=(0,_.Z)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return H=function(){return e},e}var M={},N=(0,F.Ps)(H(),o.FW);function O(e){return e.message||"Something went wrong saving updates to your Repl"}function j(){var e=(0,f.Z)(function(e){var t=(0,p.Z)({},M,e);return A.D(N,t)}(),2),t=e[0],n=e[1];function r(){return(r=(0,d.Z)((function(e){return(0,g.__generator)(this,(function(r){switch(r.label){case 0:if(n.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:r.sent().data,error:null}];case 3:return[2,{data:null,error:O(r.sent())}];case 4:return[2]}}))}))).apply(this,arguments)}return{data:n.data,loading:n.loading,error:n.error&&O(n.error),updateRepl:function(e){return r.apply(this,arguments)}}}function K(){var e=(0,_.Z)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var $={},Y=(0,F.Ps)(K(),o.FW);function q(e){var t,n,r,l,i,a,o;return e.error?e.error.message||"Something went wrong saving your Cover page":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(n=t.setReplViewSettings)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(l=r.setReplViewSettings)||void 0===l?void 0:l.__typename)||"UserError"===(null===(i=e.data)||void 0===i||null===(a=i.setReplViewSettings)||void 0===a?void 0:a.__typename)?e.data.setReplViewSettings.message:(null===(o=e.data)||void 0===o?void 0:o.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function Q(){var e=(0,f.Z)(function(e){var t=(0,p.Z)({},$,e);return A.D(Y,t)}(),2),t=e[0],n=e[1];function r(){return(r=(0,d.Z)((function(e){var r;return(0,g.__generator)(this,(function(l){switch(l.label){case 0:if(n.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:(r=l.sent()).data,error:q(r)}];case 3:return l.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}}))}))).apply(this,arguments)}return{data:n.data,loading:n.loading,error:q(n),setReplViewSettings:function(e){return r.apply(this,arguments)}}}function J(){var e=(0,_.Z)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return J=function(){return e},e}var ee={},te=(0,F.Ps)(J(),o.FW);function ne(e){var t,n,r,l,i,a,o;return e.error?e.error.message||"Something went wrong saving your Repl Tags":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(n=t.setReplTags)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(l=r.setReplTags)||void 0===l?void 0:l.__typename)||"UserError"===(null===(i=e.data)||void 0===i||null===(a=i.setReplTags)||void 0===a?void 0:a.__typename)?e.data.setReplTags.message:(null===(o=e.data)||void 0===o?void 0:o.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function re(){var e=(0,f.Z)(function(e){var t=(0,p.Z)({},ee,e);return A.D(te,t)}(),2),t=e[0],n=e[1];function r(){return(r=(0,d.Z)((function(e){var r;return(0,g.__generator)(this,(function(l){switch(l.label){case 0:if(n.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:(r=l.sent()).data,error:ne(r)}];case 3:return l.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}}))}))).apply(this,arguments)}return{data:n.data,loading:n.loading,error:ne(n),setReplTags:function(e){return r.apply(this,arguments)}}}var le,ie=n(4429),ae=n(79790),oe=n(9434),se=1e3;function ue(e){return"repl_file"===e||"repl_image"===e}!function(e){e.ReplFile="repl_file",e.ReplImage="repl_image"}(le||(le={}));var ce=function(e){"use strict";(0,T.Z)(n,e);var t=(0,I.Z)(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return n}((0,B.Z)(Error)),de=function(e){"use strict";(0,T.Z)(n,e);var t=(0,I.Z)(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return n}((0,B.Z)(Error)),pe=function(e){"use strict";(0,T.Z)(n,e);var t=(0,I.Z)(n);function n(){return(0,S.Z)(this,n),t.apply(this,arguments)}return n}((0,B.Z)(Error));function he(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function fe(e){return e?e.length>se?{message:"Description should not be more than ".concat(se," characters")}:void 0:{message:"What does this Repl do?"}}function ge(e){var t,n,r,l,a,o=(0,X.Y)(e.replId||null,(function(e){return e?null:{message:"Select a Repl to share"}})),s=function(e){var t=(0,p.Z)({},D,e);return U.a(W,t)}({variables:{id:o.value||""},skip:!o.value}),u="Repl"===(null===(t=s.data)||void 0===t?void 0:t.repl.__typename)?s.data.repl:null,c=Boolean(null===u||void 0===u?void 0:u.publishedAs),h=(0,X.Y)("",he),f=(0,X.Y)("",fe),v=(0,X.Y)(null,(function(){return null})),m=(0,X.Y)(le.ReplImage,(function(){return null})),Z=(0,X.Y)(null,(function(){return null})),b=(0,X.Y)("",e.fileValidator),w=(0,X.Y)([],(function(){return null})),y=(0,z.Z)(u),R=(0,X.Y)(!1,(function(e){var t=y.current;return e&&(null===t||void 0===t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null===t||void 0===t?void 0:t.publishedAs)!==P.O2.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}})),x=[o,h,f,v,m,Z,w,b,R],G=Q(),C=re(),S=j(),T=(0,ie.O)(),B=(0,ae.r)(),I=(null===u||void 0===u||null===(n=u.replViewSettings)||void 0===n?void 0:n.defaultView)&&ue(u.replViewSettings.defaultView)?u.replViewSettings.defaultView:le.ReplImage,V=(0,z.Z)(h.setValue),_=(0,z.Z)(f.setValue),F=(0,z.Z)(w.setValue),E=(0,z.Z)(v.setValue),A=(0,z.Z)(Z.setValue),H=(0,z.Z)(m.setValue),M=(0,z.Z)(b.setValue),N=(0,z.Z)(R.setValue);(0,i.useEffect)((function(){var e,t,n,r;u&&(N.current("Template"===u.publishedAs),H.current(I),M.current(null!==(t=null===(e=u.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),V.current(u.isRenamed?u.title:"",{preventTouch:!0}),_.current(null!==(n=u.description)&&void 0!==n?n:"",{preventTouch:!0}),F.current(u.tags),E.current(u.iconUrl.endsWith(".svg")?null:u.iconUrl),A.current(null!==(r=u.imageUrl)&&void 0!==r?r:null))}),[u,A,E,F,V,_,I,H,M,N]);var O,K=(0,L.W)(v.setValue),$=K.previewUrl||v.value||(null===u||void 0===u?void 0:u.iconUrl)||(null===u||void 0===u?void 0:u.templateInfo.iconUrl),Y=null!==(O=null===(r=x.filter((function(e){return(e!==b||m.value===le.ReplFile)&&e.error})))||void 0===r||null===(l=r[0])||void 0===l||null===(a=l.error)||void 0===a?void 0:a.message)&&void 0!==O?O:null;function q(){return q=(0,d.Z)((function(){var e,t,n,r,l,i,a,o,s,c,d;return(0,g.__generator)(this,(function(p){switch(p.label){case 0:if(!u)throw new ce("Missing repl");if(t=u.title!==h.value,n=u.description!==f.value,r=u.iconUrl!==v.value,l="repl_image"===m.value&&u.imageUrl!==Z.value,i=b.value&&"repl_file"===m.value&&(null===(e=u.replViewSettings)||void 0===e?void 0:e.replFile)!==b.value,a=m.value&&I!==m.value,o=!k()(u.tags,w.value),!(t||n||r))return[3,2];if(h.error||f.error||v.error)throw new ce;return[4,S.updateRepl({id:u.id,title:t?h.value:void 0,description:n?f.value:void 0,iconUrl:r?v.value:void 0})];case 1:if((s=p.sent()).error)throw new de(s.error);p.label=2;case 2:if(!(a||l||i))return[3,4];if(m.value===le.ReplImage&&Z.error||m.value===le.ReplFile&&b.error)throw new ce;return[4,G.setReplViewSettings({replId:u.id,defaultView:"repl_image"===m.value?P.bV.ReplImage:P.bV.ReplFile,replImage:l?Z.value:void 0,replFile:i?b.value:void 0})];case 3:if((c=p.sent()).error)throw new de(c.error);p.label=4;case 4:if(!o)return[3,6];if(w.error)throw new ce;return[4,C.setReplTags({replId:u.id,tags:w.value.map((function(e){return e.id}))})];case 5:if((d=p.sent()).error)throw new de(d.error);p.label=6;case 6:return[2]}}))})),q.apply(this,arguments)}function J(){return(J=(0,d.Z)((function(){var t,n;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:if(!u)throw new ce("Missing repl");if(Y)throw new ce(null!==Y&&void 0!==Y?Y:"Something went wrong");return R.value?[4,B.createDeployment({input:{replId:u.id,description:f.value,iconUrl:$||u.iconUrl}})]:[3,2];case 1:if((t=r.sent()).error)throw new pe(t.error);return(0,oe.j)(oe.U3.POST_MADE,{source:e.source,replType:"template_repl",title:h.value,description:f.value,tags:w.value.map((function(e){return e.id})),defaultView:m.value}),[2];case 2:return[4,T.publish({input:{replId:u.id}})];case 3:if((n=r.sent()).error)throw new pe(n.error);return(0,oe.j)(oe.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:h.value,description:f.value,tags:w.value.map((function(e){return e.id})),defaultView:m.value}),[2]}}))}))).apply(this,arguments)}var ee=S.loading||G.loading||C.loading,te=S.error||G.error||C.error,ne=T.loading||B.loading,se=T.error||B.error;return{selectedRepl:u,isReplLoading:s.loading,replLoadingError:s.error,replIdField:o,replTitleField:h,replDescriptionField:f,iconUrlField:v,coverDefaultViewField:m,coverUrlField:Z,coverFileField:b,tagsField:w,isTemplateField:R,replIconInput:K,replIconUrl:$,inputError:Y,save:function(){return q.apply(this,arguments)},isSaving:ee,savingError:te,publish:function(){return J.apply(this,arguments)},isPublishing:ne,publishingError:se,isPublished:c}}var ve=i.createContext(null),me=function(e){var t=i.useContext(ve);if(!t)throw new Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},Ze=function(){var e=i.useContext(ve);if(!e)throw new Error("usePublishForm must be used within a PublishInputContext");return e},be=n(9970),we=n(41340),ye=n(43312),Re=n(3861),xe=n(21371);function Ge(){var e=(0,_.Z)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return Ge=function(){return e},e}function Ce(){var e=(0,_.Z)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return Ce=function(){return e},e}var Se={},Te=(0,F.Ps)(Ge()),Be=(0,F.Ps)(Ce(),Te);var Ie=n(17387),Ve=n(60200),ke=n(97652),Pe=/^[0-9a-zA-Z]+$/,_e=function(e){return e.id};function Fe(e){var t=e.search,n=e.filter,r=function(e){var t=(0,p.Z)({},Se,e);return U.a(Be,t)}({variables:{limit:t?10:3,search:t}}).data,l=(0,i.useState)({official:[],community:[],newTag:[]}),a=l[0],o=l[1],s=(0,i.useMemo)((function(){if(r){var e=[],l=[],i=new Set,a=!0,o=!1,s=void 0;try{for(var u,c=r.tagGroups.official[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;i.add(d.id.toLowerCase()),n(d)&&e.push(d)}}catch(w){o=!0,s=w}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var p=!0,h=!1,f=void 0;try{for(var g,v=r.tagGroups.community[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var m=g.value;i.add(m.id.toLowerCase()),n(m)&&l.push(m)}}catch(w){h=!0,f=w}finally{try{p||null==v.return||v.return()}finally{if(h)throw f}}var Z=l.find((function(e){return e.id===t})),b=!t||Z||i.has(t.toLowerCase())?void 0:{id:t,isOfficial:!1};return{official:e,community:l,newTag:b&&n(b)?[b]:[]}}}),[r,n,t]);return(0,i.useEffect)((function(){if(s){var e=s.official,t=s.community,n=s.newTag;o((function(r){return{official:(0,ke.Z)(e,{existing:r.official,getKey:_e}),community:(0,ke.Z)(t,{existing:r.community,getKey:_e}),newTag:n}}))}}),[s]),{tagGroups:a,reset:function(){o({official:[],community:[],newTag:[]})}}}var Ue=n(6108),Ee=n(80703),De=n(54316),We=a.K.ul,Xe=a.K.li;function Le(e){var t=e.children;return(0,l.tZ)(a.G,{css:[s.l0.px(8),s.l0.pt(8)],children:(0,l.tZ)(u.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function ze(e){var t=e.highlighted,n=e.tag;return(0,l.tZ)(a.G,{css:[s.l0.rowWithGap(8),s.l0.p(8),t&&{backgroundColor:Ue.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,l.BX)(a.G,{css:[s.l0.flex.growAndShrink(1),s.l0.rowWithGap(4),s.l0.align.center],children:[(0,l.tZ)(u.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,l.tZ)(De.Z,{}):null]})})}var Ae=i.memo((function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,l.tZ)(Ee.Z,{css:[s.l0.minWidth(200)],children:r.sections.reduce((function(e,r){return e.sections.push((0,l.BX)(Xe,{children:[(0,l.tZ)(Le,{children:r.title}),(0,l.tZ)(We,{css:[s.l0.pt(4),s.l0.pb(8)],children:r.tags.map((function(r){var i=e.itemIndex++;return(0,l.tZ)(Xe,(0,h.Z)((0,p.Z)({},t({item:r,index:i})),{children:(0,l.tZ)(ze,{tag:r,highlighted:n===i})}),r.id)}))})]},r.title)),e}),{sections:[],itemIndex:0}).sections})})),He=a.K.div,Me=a.K.input,Ne=(0,ye.iv)([s.l0.fontSize(12),s.l0.pl(24),s.l0.pr(8),s.l0.py(4)]);function Oe(){return(0,l.tZ)(u.xv,{multiline:!1,css:[s.l0.px(4),s.l0.flex.row,s.l0.align.center,s.l0.position.absolute,s.l0.height("100%"),s.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,l.tZ)(Re.Z,{size:12})})}function je(e){var t=e.text,n=e.children;return(0,l.BX)(Z.Tg,{elevated:!0,css:[s.l0.position.relative,s.l0.minWidth(30),s.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:s.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,l.tZ)(Oe,{}),(0,l.tZ)(u.xv,{css:[{visibility:"hidden"},Ne],multiline:!1,children:t}),n]})}function Ke(e){var t=function(e){var t=e.onRemove,n=e.onSelect,r=e.filter,l=void 0===r?function(){return!0}:r,i=e.inputValue,a=e.setInputValue,o=(0,Ve.Z)(i,100),s=(0,z.Z)(n),u=Fe({search:o,filter:l}),c=u.tagGroups,d=u.reset,p=(0,xe.Kb)({inputValue:i,items:(0,be.Z)(c.official).concat((0,be.Z)(c.community),(0,be.Z)(c.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(d(),a(""),p.reset(),p.openMenu())}});return(0,Ie.Z)((function(){p.selectedItem&&s.current(p.selectedItem)}),[p.selectedItem]),{tagGroups:c,combobox:p,onChange:function(e){var t=e.currentTarget.value;t&&!Pe.test(t)||t.length>30||a(t)},onKeyDown:function(e){""===i&&"Backspace"===e.key&&(e.preventDefault(),t())}}}(e),n=t.combobox,r=t.tagGroups,o=t.onChange,u=t.onKeyDown,c=(0,i.useMemo)((function(){return function(e){var t=[];return e.official.length&&t.push({title:"Official Tags",tags:e.official}),e.community.length&&t.push({title:"Community Tags",tags:e.community}),e.newTag.length&&t.push({title:"Create new tag",tags:e.newTag}),0===t.length?null:{type:"sections",sections:t}}(r)}),[r]),d="Add tag";return(0,l.BX)(a.G,{children:[(0,l.tZ)(He,(0,h.Z)((0,p.Z)({},n.getComboboxProps()),{css:[s.l0.flex.row],children:(0,l.tZ)(je,{text:n.inputValue||d,children:(0,l.tZ)(Me,(0,p.Z)({css:[s.l0.coverContainer,Ne,s.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":s.l0.color.foregroundDefault,"&:focus::placeholder":s.l0.color.foregroundDimmest}]},n.getInputProps({placeholder:d,onChange:o,onKeyDown:u,onFocus:function(){n.openMenu()}})))})})),(0,l.tZ)(He,(0,h.Z)((0,p.Z)({},n.getMenuProps()),{css:[s.l0.position.relative],children:c&&n.isOpen?(0,l.tZ)(Ae,{getItemProps:n.getItemProps,highlightedIndex:n.highlightedIndex,data:c}):null}))]})}function $e(e){var t=e.tags,n=e.max,r=void 0===n?5:n,o=e.onAdd,u=e.onRemove,c=t.map((function(e){return e.id})),d=(0,i.useState)(""),p=d[0],h=d[1];return(0,l.BX)(a.G,{css:[s.l0.flex.row,s.l0.flex.wrap,{margin:"calc(-1 * ".concat(s.TV.space4,")")}],children:[t.map((function(e,t){return(0,l.tZ)(a.G,{css:[s.l0.m(4)],children:(0,l.tZ)(we.g,{small:!0,tag:e,onClick:function(){return u(t)}})},e.id)})),t.length<r?(0,l.tZ)(a.G,{css:[s.l0.m(4)],children:(0,l.tZ)(Ke,{onSelect:o,filter:function(e){return!c.includes(e.id.toLowerCase())},inputValue:p,setInputValue:h,onRemove:function(){var e=t.length-1;e>=0&&(h(t[e].id),u(e))}})}):null]})}var Ye=function(){var e=me("tags");return(0,l.BX)(a.G,{css:[s.l0.colWithGap(8)],children:[(0,l.tZ)(a.G,{css:[s.l0.colWithGap(4)],children:(0,l.tZ)($e,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,be.Z)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,be.Z)(e.value.slice(0,t)).concat((0,be.Z)(e.value.slice(t+1))))}})}),(0,l.BX)(a.G,{css:s.l0.rowWithGap(4),children:[(0,l.tZ)(u.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,l.BX)(u.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},qe=n(20685);function Qe(){var e=(0,_.Z)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return Qe=function(){return e},e}function Je(){var e=(0,_.Z)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return Je=function(){return e},e}var et={},tt=(0,F.Ps)(Qe()),nt=(0,F.Ps)(Je(),tt);var rt=n(84730),lt=n(56123),it=n(3282),at=n(2075),ot=n(34204),st=a.K.div,ut=a.K.li,ct={searchValue:"",loading:!1,repls:[]};function dt(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,h.Z)((0,p.Z)({},e),{loading:!1,repls:(0,ke.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,h.Z)((0,p.Z)({},e),{loading:!0});case"searchValue":return(0,h.Z)((0,p.Z)({},e),{searchValue:t.searchValue})}}function pt(){var e=(0,i.useReducer)(dt,ct),t=e[0],n=e[1],r=function(e){var t=(0,p.Z)({},et,e);return U.a(nt,t)}({variables:{search:(0,Ve.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}}).loading;(0,i.useEffect)((function(){r&&n({type:"loading"})}),[r]);var l=(0,i.useCallback)((function(e){return n({type:"searchValue",searchValue:e||""})}),[]);return{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:l}}function ht(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function ft(e){var t,n=i.useRef(null);(0,ot.rf)((function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())}),[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&ht(e.selectedRepl)===e.inputValue?(0,l.tZ)(a.G,{css:[s.l0.px(8),s.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,l.tZ)(lt.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,l.BX)(a.G,{css:[{position:"relative"}],children:[(0,l.BX)(st,(0,h.Z)((0,p.Z)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,l.tZ)(qe.II,(0,p.Z)({css:[s.l0.pr(32),r&&s.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,l.tZ)(a.G,{css:[s.l0.center,s.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,l.tZ)(c.Z,{}):(0,l.tZ)(it.Z,{})})]})),(0,l.tZ)(st,(0,h.Z)((0,p.Z)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,l.BX)(Ee.Z,{children:[e.loading&&0===e.repls.length?(0,l.tZ)(ut,{css:[s.l0.center,s.l0.py(32)],children:(0,l.tZ)(c.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,l.tZ)(ut,{css:[s.l0.center,s.l0.py(32)],children:(0,l.tZ)(u.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map((function(t,n){return(0,l.tZ)(ut,(0,h.Z)((0,p.Z)({},e.getItemProps({item:t,index:n})),{children:(0,l.tZ)(at.Z,{taller:!0,filter:"",title:ht(t),subtitle:(0,rt.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,l.tZ)(lt.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)}))]}):null}))]})}var gt=n(38029);function vt(e){var t=e.error,n=e.dataCy;return t?(0,l.BX)(a.G,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:[(0,l.tZ)(w.Z,{css:[s.l0.color.accentNegativeStronger]}),(0,l.tZ)(u.xv,{css:[s.l0.flex.growAndShrink(1),s.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var mt=a.K.label,Zt=i.forwardRef((function(e,t){return(0,l.tZ)(mt,(0,h.Z)((0,p.Z)({},e),{ref:t,css:s.l0.color.foregroundDimmer}))})),bt=function(){var e=(0,gt.U)()("repl"),t=me("replId"),n=me("iconUrl"),r=pt(),i=(0,xe.Kb)({id:e,items:r.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;r.setSearchValue(t)},onSelectedItemChange:function(e){(null===e||void 0===e?void 0:e.selectedItem)&&(t.setValue(e.selectedItem.id),i.closeMenu())},itemToString:ht});return(0,l.BX)(a.G,{css:[s.l0.colWithGap(4)],children:[(0,l.tZ)(Zt,{css:s.l0.color.foregroundDimmer,htmlFor:e,children:"Repl"}),(0,l.tZ)(ft,{getComboboxProps:i.getComboboxProps,getInputProps:i.getInputProps,getItemProps:i.getItemProps,getMenuProps:i.getMenuProps,isOpen:i.isOpen,highlightedIndex:i.highlightedIndex,inputValue:i.inputValue,selectedRepl:i.selectedItem?(0,h.Z)((0,p.Z)({},i.selectedItem),{iconUrl:n.value||i.selectedItem.iconUrl}):void 0,repls:r.repls,loading:r.loading,onFocus:function(e){i.selectedItem&&(e.preventDefault(),e.currentTarget.select(),r.setSearchValue("")),i.openMenu()}})]})},wt=function(){var e=(0,gt.U)(),t=e("replName"),n=e("replDescription"),r=Ze(),i=r.replIdField,o=r.replTitleField,c=r.replDescriptionField,d=r.isSaving;return(0,l.BX)(a.G,{css:[s.l0.colWithGap(16),s.l0.flex.growAndShrink(1)],children:[!i.value||i.touched?(0,l.tZ)(bt,{}):null,(0,l.BX)(a.G,{css:[s.l0.colWithGap(4)],children:[(0,l.tZ)(a.G,{css:[s.l0.flex.row,s.l0.align.baseline,s.l0.justify.spaceBetween],children:(0,l.tZ)(Zt,{css:[s.l0.color.foregroundDimmer,{lineHeight:s.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),o.value]}),(0,l.BX)(a.G,{css:[s.l0.colWithGap(4)],children:[(0,l.BX)(a.G,{css:[s.l0.flex.row,s.l0.align.baseline,s.l0.justify.spaceBetween],children:[(0,l.tZ)(Zt,{css:[s.l0.color.foregroundDimmer,{lineHeight:s.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,l.BX)(u.xv,{multiline:!1,css:{color:c.value.length>se?s.TV.accentNegativeStronger:s.TV.foregroundDimmest},children:[c.value.length,"/",se]})]}),(0,l.tZ)(qe.B,{id:n,value:c.value,disabled:!i.value||d,onChange:function(e){c.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[s.l0.minHeight(128),s.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),c.touched?(0,l.tZ)(vt,{error:c.error,dataCy:"publish-form-repl-description-error"}):null]})]})},yt=n(30779),Rt=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,l.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,l.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?s.TV.accentPrimaryDimmest:void 0},children:n}),(0,l.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,l.tZ)("rect",{width:"268",height:"17",fill:s.TV.backgroundDefault}),(0,l.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:s.TV.accentPositiveDimmer}),(0,l.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:s.TV.backgroundHighest}),(0,l.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:s.TV.backgroundHighest}),(0,l.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?s.TV.accentPrimaryDefault:s.TV.outlineDimmer}),t?(0,l.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:s.TV.white}):null,(0,l.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?s.TV.accentPrimaryDefault:s.TV.outlineDimmer,strokeWidth:"1"})]})]})},xt=n(34809),Gt=function(e){var t=function(e){var t=i.useRef(null),n={onClick:function(e){var n;return e.preventDefault(),e.stopPropagation(),null===(n=t.current)||void 0===n?void 0:n.click()}};return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,l=n.files;if(r.valid){var i=l?l[0]:null;i&&e(i)}},"aria-hidden":"true",ref:t,accept:xt.W9.join(","),type:"file"},buttonProps:n,inputRef:t}}(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,l.BX)(l.HY,{children:[(0,l.tZ)("input",(0,h.Z)((0,p.Z)({},n),{css:{display:"none"}})),i.cloneElement(e.children,r)]})},Ct=n(28568),St=n(90393),Tt=n(87978);function Bt(e){return e.slice().sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{file:e,pathDepth:(0,Tt.U$)(e)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file}))}var It=a.K.ol,Vt=a.K.li,kt=(0,ye.iv)([s.l0.py(4),s.l0.borderRadius(8),{border:"1px solid ".concat(s.TV.outlineDimmest),borderRadius:s.TV.borderRadius8,backgroundColor:Ue.vb.interactiveBackground,zIndex:s.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:s.TV.space8,listStyle:"none"}]),Pt={backgroundColor:Ue.vb.interactiveBackgroundActive},_t={backgroundColor:s.TV.accentPrimaryDimmer},Ft=(0,ye.iv)([s.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,p.Z)({},Pt),":active":(0,p.Z)({},_t)}}]);function Ut(e){var t=e.fs,n=e.initiallySelectedFile,r=e.onFileSelect,o=e.onClear,c=i.useRef(null),v=function(e){var t=e.fs,n=(0,f.Z)(i.useState({isLoading:!0,error:null,files:[]}),2),r=n[0],l=n[1];return i.useEffect((function(){function e(){return(e=(0,d.Z)((function(){var e,n,r;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.listFiles()];case 1:if((e=i.sent()).error)throw new Error(e.error);return r=Bt(null!==(n=e.files)&&void 0!==n?n:[]),l({isLoading:!1,error:null,files:r}),[3,3];case 2:return i.sent(),l({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),(0,p.Z)({},r)}({fs:t}),m=v.isLoading,Z=v.files,b=v.error,w=function(e){var t=e.files,n=e.inputRef,r=e.initiallySelectedFile,l=(0,f.Z)(i.useState(!1),2),a=l[0],o=l[1],s=(0,f.Z)(i.useState(t),2),u=s[0],c=s[1],d=i.useCallback((function(e){return t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}))}),[t]),g=(0,xe.Kb)({items:u,isOpen:a,initialInputValue:r,initialSelectedItem:u.find((function(e){return e===r})),onIsOpenChange:function(e){o(Boolean(e.isOpen))},onInputValueChange:function(e){var t;c(d(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),v=i.useCallback((function(){var e;o(!1),null===(e=n.current)||void 0===e||e.blur()}),[n]);return i.useEffect((function(){var e;c(d(null!==(e=g.inputValue)&&void 0!==e?e:""))}),[t,d,g.inputValue]),i.useEffect((function(){g.selectedItem&&v()}),[g.selectedItem,v]),(0,h.Z)((0,p.Z)({},g),{closeMenu:v,items:u})}({files:Z,inputRef:c,initiallySelectedFile:n}),y=(0,z.Z)(r);return i.useEffect((function(){w.selectedItem&&y.current(w.selectedItem)}),[w.selectedItem,y]),(0,l.BX)(a.G,{children:[(0,l.tZ)(a.G,(0,h.Z)((0,p.Z)({},w.getComboboxProps({refKey:"innerRef"})),{css:[s.l0.position.relative],children:(0,l.tZ)(St.E,(0,h.Z)((0,p.Z)({},w.getInputProps({onFocus:w.openMenu,ref:c,refKey:"inputRef",disabled:m,placeholder:"Search your files"})),{onClear:function(){var e;w.reset(),null===(e=c.current)||void 0===e||e.focus(),o()},loading:m}))})),(0,l.BX)(a.G,(0,h.Z)((0,p.Z)({},w.getMenuProps({refKey:"innerRef"})),{css:[s.l0.position.relative],children:[b?(0,l.tZ)(a.G,{css:[s.l0.p(8)],children:(0,l.tZ)(u.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!b&&w.isOpen?(0,l.tZ)(It,{css:[kt],children:w.items.length>0?w.items.map((function(e,t){return(0,l.tZ)(Vt,(0,h.Z)((0,p.Z)({css:[Ft,w.highlightedIndex===t&&Pt,e===w.selectedItem&&_t]},w.getItemProps({item:e,index:t,onClick:function(){w.closeMenu()}})),{children:(0,l.tZ)(u.xv,{multiline:!1,children:e})}),e)})):(0,l.tZ)(Vt,{css:[s.l0.p(8)],children:(0,l.BX)(u.xv,{multiline:!1,children:['No files found for "',w.inputValue,'"']})})}):null]}))]})}var Et=n(32905),Dt=n(77006),Wt=n(58079),Xt=[{value:le.ReplImage,text:"Photo"},{value:le.ReplFile,text:"File"}],Lt=function(e){var t=e.fs,n=(0,gt.U)(),r=n("coverPage"),i=Ze(),o=i.selectedRepl,m=i.coverFileField,Z=i.coverUrlField,b=i.coverDefaultViewField,w=(0,f.Z)((0,Wt.Z)(function(){var e=(0,d.Z)((function(e){var t;return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return(null===e||void 0===e?void 0:e.length)&&(t=e[0]).type.startsWith("image/")?[4,x.uploadImage(t,Et.N.ReplCoverImage)]:[2];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),2),y=w[0],R=w[1],x=(0,L.W)(Z.setValue);return(0,l.BX)(a.G,(0,h.Z)((0,p.Z)({css:[s.l0.colWithGap(16)]},R),{children:[(0,l.BX)(a.G,{css:s.l0.colWithGap(12),children:[(0,l.tZ)(a.G,{css:[s.l0.rowWithGap(8)],children:(0,l.tZ)(yt.E,{tag:"fieldset",css:[s.l0.rowWithGap(24)],name:r,value:b.value,onChange:function(e){ue(e.target.value)&&b.setValue(e.target.value)},children:Xt.map((function(e){return(0,l.BX)(a.G,{css:[s.l0.rowWithGap(8)],children:[(0,l.tZ)(yt.Y,{id:n(e.value),value:e.value}),(0,l.tZ)("label",{htmlFor:n(e.value),children:e.text})]},e.value)}))})}),b.value===le.ReplImage&&(0,l.BX)(a.G,{css:[s.l0.colWithGap(4),s.l0.align.center],children:[(0,l.tZ)(Gt,{onFile:function(e){return x.uploadImage(e,Et.N.ReplCoverImage)},children:(0,l.tZ)(v.zx,{colorway:y?"primary":void 0,text:"Upload a cover photo",iconLeft:x.isLoading?(0,l.tZ)(c.Z,{}):(0,l.tZ)(Ct.Z,{}),stretch:!0})}),(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),b.value===le.ReplFile&&(0,l.BX)(a.G,{css:[s.l0.colWithGap(8)],children:[(0,l.tZ)(Ut,{fs:t,initiallySelectedFile:m.value,onFileSelect:m.setValue,onClear:function(){return m.setValue("")}},null===o||void 0===o?void 0:o.id),(0,l.tZ)(vt,{error:m.error})]})]}),b.value===le.ReplImage&&(0,l.BX)(Rt,{active:y,showPlayButton:b.value===le.ReplImage&&!!Z.value&&!x.isLoading,children:[b.value===le.ReplImage&&Z.value?(0,l.tZ)(Dt.y,{src:Z.value,alt:"cover"}):null,x.isLoading?(0,l.tZ)(a.G,{css:[{position:"absolute",inset:0},s.l0.align.center,s.l0.justify.center],children:(0,l.tZ)(c.Z,{color:s.TV.white,size:24})}):null]})]}))},zt=(n(68912),function(){me("iconUrl");var e=Ze(),t=e.replIconInput,n=e.replIconUrl;return(0,l.BX)(a.G,{css:[s.l0.colWithGap(16),s.l0.align.center],children:[(0,l.BX)(a.G,{css:[s.l0.colWithGap(8)],children:[(0,l.BX)(a.G,{css:[s.l0.rowWithGap(8)],children:[(0,l.tZ)(Gt,{onFile:function(e){return t.uploadImage(e,Et.N.ReplIcon)},css:s.l0.backgroundColor.accentNegativeDefault,children:(0,l.tZ)(v.zx,{text:"Upload image",iconLeft:(0,l.tZ)(Ct.Z,{}),css:[s.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}),null]}),t.error?(0,l.tZ)(a.G,{children:(0,l.tZ)(m.E,{icon:(0,l.tZ)(w.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,l.tZ)(lt.LN,{alt:"icon",size:84,iconUrl:n,isLoading:Boolean(t.previewUrl),css:[s.l0.backgroundColor.backgroundHigher]})]})}),At=n(34860),Ht=n(97746),Mt=n(33033),Nt=n(10702),Ot=n(9558),jt=n(54981),Kt=n(5670);function $t(e){var t=e.repl,n=e.currentUser,r=(0,f.Z)((0,Ot.qg)(),2),l=r[0],a=r[1],o=(0,Ot.ic)(),s=(0,f.Z)(i.useState((function(){return function(e){var t=e.throwBsod,n=(0,Mt.ZP)({onUnrecoverableError:(0,Kt.Z)({throwBsod:t,origin:"Publish: services/onUnrecoverableError"})}),r=(0,Ht.Z)({container:n});return{container:n,fs:r,dotReplit:(0,Nt.Z)({container:n,fs:r})}}({throwBsod:a})})),1),u=s[0],c=u.container,d=u.fs,p=u.dotReplit,h=(0,f.Z)(i.useState((function(){return c.getConnectionState()===Mt.em.CONNECTED})),2),g=h[0],v=h[1],m=(0,At.b)(t?{repl:t,currentUser:n}:null),Z=(0,jt.S)();return i.useEffect((function(){if(t&&m&&c.getConnectionState()===Mt.em.DISCONNECTED)return c.connect({context:m,getMinimumRetryDelayMs:Z}),function(){return c.close()}}),[t,c,m]),i.useEffect((function(){var e=c.onConnectionStateChanged((function(e){v(e===Mt.em.CONNECTED)}));return e}),[c]),{isConnected:g,container:c,fs:d,dotReplit:p,bsodId:null===l||void 0===l?void 0:l.eventId,devClearBsod:function(){return o()}}}var Yt=n(84079),qt=n(4561);var Qt=n(44385),Jt=a.K.button,en=function(){return(0,l.tZ)(a.G,{css:[s.l0.flex.row,s.l0.flex.grow(1),{borderTop:"1px solid ".concat(s.TV.outlineDimmest)}]})},tn=function(e){var t=e.isActive,n=e.isComplete,r=e.children,i=e.onClick,a=e.disabled;return(0,l.BX)(Jt,{type:"button",css:[s.l0.reset.button,s.l0.position.relative,Ue.gU.nofill,t&&s.l0.backgroundColor.backgroundHigher,s.l0.p(4),s.l0.borderRadius(4)],onClick:i,disabled:a,children:[(0,l.tZ)(u.xv,{variant:"small",multiline:!1,children:r}),n?(0,l.tZ)(Qt.Z,{size:6,strokeWidth:6,color:s.TV.foregroundDimmer,css:[s.l0.position.absolute,{top:2,right:-2}]}):null]})},nn=n(16679),rn=n(92369),ln=n(58292),an=function(){var e=me("isTemplate"),t=(0,gt.U)()("templateCheckbox");return(0,l.BX)(a.G,{css:[s.l0.colWithGap(8)],children:[(0,l.BX)(a.G,{css:[s.l0.colWithGap(8)],children:[(0,l.BX)(a.G,{css:[s.l0.rowWithGap(8)],children:[(0,l.tZ)(nn.X,{id:t,checked:e.value,onChange:function(t){return e.setValue(t.target.checked)}}),(0,l.tZ)("label",{htmlFor:t,children:"Submit as Template for Review"})]}),(0,l.tZ)(vt,{error:e.error})]}),(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"This is a good option for Repls meant as starting points for future work."}),(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"The Replit team will review your Template before it is live on the Templates page."}),(0,l.tZ)(a.G,{css:[s.l0.align.start],children:(0,l.tZ)(rn.Z,{href:"https://docs.replit.com/programming-ide/how-to-make-a-replit-template",target:"_blank",text:"What makes a good Template?",iconRight:(0,l.tZ)(ln.Z,{}),variant:"outlined",size:"small"})}),(0,l.tZ)(a.G,{css:[s.l0.pt(16)],children:(0,l.BX)(u.xv,{children:["Please make sure your Repl abides by the"," ",(0,l.tZ)("a",{href:"https://welcome.moderation.repl.co/#communitystandards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})]})},on=n(32437),sn=a.K.form,un=function(e){var t=e.user,n=Ze(),i=n.selectedRepl,o=n.replTitleField,d=n.replDescriptionField,f=n.replIconUrl,g=n.tagsField,v=n.isTemplateField;return(0,l.BX)(Z.Tg,{background:"root",css:[(0,r.Z)({},(0,G.et)("tabletMin"),{display:"flex"}),s.l0.flex.growAndShrink(1),s.l0.p(16),s.l0.colWithGap(12),s.l0.align.center,s.l0.display.none],children:[(0,l.tZ)(u.xv,{multiline:!1,variant:"small",color:"dimmer",css:[s.l0.width("100%"),{fontWeight:s.TV.fontWeightMedium}],children:"Preview"}),(0,l.BX)(a.G,{css:[s.l0.width("100%"),s.l0.maxWidth(432),s.l0.position.relative],children:[(0,l.tZ)(a.G,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+s.TV.backgroundRoot+", inset 0 -48px 24px -24px "+s.TV.backgroundRoot}}),(0,l.BX)(a.G,{css:[s.l0.height(416),s.l0.colWithGap(24),s.l0.justify.center,s.l0.overflow("hidden"),s.l0.backgroundColor.backgroundRoot],children:[(0,l.tZ)(C.O,{}),i&&f?(0,l.tZ)(C.Z,{post:{user:t,repl:(0,h.Z)((0,p.Z)({},i),{title:o.value,iconUrl:f,tags:g.value,description:d.value,isTemplate:v.value})}}):(0,l.tZ)(a.G,{css:[s.l0.flex.grow(1),s.l0.align.center,s.l0.justify.center],children:(0,l.tZ)(c.Z,{})}),(0,l.tZ)(C.O,{})]})]})]})},cn=["Basics","Tags","Icon","Cover page","Publishing"];function dn(e){var t=e.replId,n=e.currentUser,o=e.source,h=function(){var e=(0,d.Z)((function(e){var t;return(0,g.__generator)(this,(function(n){switch(n.label){case 0:if(!j)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,j.stat(e)];case 2:return(t=n.sent()).exists&&t.type===qt.Tv.File?[3,4]:[2,{message:"File does not exist"}];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),C=ge({replId:t,fileValidator:h,source:o}),S=C.selectedRepl,T=C.isReplLoading,B=C.replLoadingError,I=C.replIdField,V=C.replTitleField,k=C.replDescriptionField,P=C.iconUrlField,_=C.tagsField,F=C.coverDefaultViewField,U=C.coverUrlField,E=C.coverFileField,D=C.isTemplateField,W=C.save,X=C.isSaving,L=C.savingError,A=C.publish,H=C.isPublishing,M=C.publishingError,N=C.isPublished,O=$t({repl:S,currentUser:n}),j=O.fs,K=O.dotReplit,$=O.bsodId,Y=(0,f.Z)(i.useState(0),2),q=Y[0],Q=Y[1],J=cn[q],ee=q===cn.length-1,te=(0,f.Z)(i.useState({show:!1,isUpdate:!1}),2),ne=te[0],re=te[1],ie=(0,f.Z)(i.useState((function(){return Array(cn.length).fill(!1)})),2),ae=ie[0],se=ie[1],ue=i.useCallback((function(e,t){var n=ae;n[e]=t,se(n)}),[ae]);i.useEffect((function(){C.replTitleField.value&&C.replDescriptionField.value?ue(0,!0):ue(0,!1),C.tagsField.value.length>0?ue(1,!0):ue(1,!1),C.iconUrlField.value?ue(2,!0):ue(2,!1),C.coverDefaultViewField.value===le.ReplImage&&C.coverUrlField.value||C.coverDefaultViewField.value===le.ReplFile&&C.coverFileField.value?ue(3,!0):ue(3,!1)}),[ae,C,ue]);var ce=function(e){var t=e.dotReplit,n=(0,f.Z)(i.useState({isLoading:!0,error:null,entryPoint:null}),2),r=n[0],l=n[1];return i.useEffect((function(){function e(){return e=(0,d.Z)((function(){var e,n,r;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.getConfig()];case 1:if((n=i.sent()).error)throw new Error(n.errorMessage);return l({isLoading:!1,error:null,entryPoint:null!==(r=null===n||void 0===n||null===(e=n.config)||void 0===e?void 0:e.entrypoint)&&void 0!==r?r:null}),[3,3];case 2:return i.sent(),l({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),(0,p.Z)({},r)}({dotReplit:K});i.useEffect((function(){ce.isLoading||!ce.entryPoint||E.value||E.setValue(ce.entryPoint)}),[ce.isLoading,ce.entryPoint,E]);var de=(0,f.Z)(i.useState(!1),2),pe=de[0],he=de[1];i.useEffect((function(){pe||t&&(T||N)||(he(!0),(0,oe.j)(oe.U3.PUBLISH_SELECTED,{source:o}))}),[pe,o,t,T,N]);var fe=(0,z.Z)(Boolean((null===S||void 0===S?void 0:S.publishedAs)||(null===S||void 0===S?void 0:S.lastPublishedAt))),me=(0,z.Z)(J);if(i.useEffect((function(){return function(){fe.current||(0,oe.j)(oe.U3.PUBLISH_FLOW_EXITED,{source:o,lastSectionVisited:me.current})}}),[o,fe,me]),$)return(0,l.tZ)(Yt.Z,{});if(ne.show&&S)return(0,l.tZ)(on.q,{repl:S,isUpdate:ne.isUpdate});var Ze,be={Basics:{hasError:Boolean(I.error||V.error||k.error),isValid:(0,d.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([I.validate(),V.validate(),k.validate()])];case 1:return[2,e.sent().every((function(e){return!e}))]}}))}))},Tags:{hasError:Boolean(_.error),isValid:(0,d.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,_.validate()];case 1:return[2,!e.sent()]}}))}))},Icon:{hasError:Boolean(P.error),isValid:(0,d.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,P.validate()];case 1:return[2,!e.sent()]}}))}))},"Cover page":{hasError:Boolean(F.value===le.ReplImage?U.error:E.error),isValid:(0,d.Z)((function(){var e;return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return F.value!==le.ReplImage?[3,2]:[4,U.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,E.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}}))}))},Publishing:{hasError:Boolean(D.error),isValid:(0,d.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,D.validate()];case 1:return[2,!e.sent()]}}))}))}},we=be[J].hasError,ye=be[J].isValid,Re=null!==(Ze=cn.find((function(e){return be[e].hasError})))&&void 0!==Ze?Ze:null,xe=null;S?B||L||M?xe="Something went wrong - please try again":we&&(xe="Please fill out the the form"):xe="Please select a Repl";var Ge=Boolean(!S||we||B||T||X||H),Ce=Boolean(D.value),Se=Ce?"Submitting...":"Publishing...",Te=Ce?"Submit Template":"Publish to Community",Be=function(){var e=(0,d.Z)((function(e){var t;return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return(t=Ge)?[3,2]:[4,ye()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];n.label=3;case 3:return n.trys.push([3,5,,6]),Q(e),[4,W()];case 4:return n.sent(),[3,6];case 5:return n.sent(),[2];case 6:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ie=q>0;return(0,l.tZ)(ve.Provider,{value:C,children:(0,l.BX)(Z.Tg,{css:[s.l0.borderRadius(8),s.l0.flex.row,s.l0.overflow("hidden"),(0,r.Z)({},(0,G.et)("tabletMax"),{minWidth:850})],background:"default",dataCy:"publish-form-container",children:[(0,l.BX)(a.G,{css:[s.l0.colWithGap(12),s.l0.p(16),s.l0.minWidth(320),s.l0.flex.growAndShrink(1),(0,r.Z)({},(0,G.et)("tabletMin"),{maxWidth:320})],children:[(0,l.tZ)(u.xv,{variant:"subheadBig",multiline:!1,children:N?"Edit Publish Settings":"Publish ".concat(t?"this":"a"," Repl")}),(0,l.BX)(sn,{onSubmit:function(){var e=(0,d.Z)((function(e){var t,n,r,l,i,a,o;return(0,g.__generator)(this,(function(s){switch(s.label){case 0:if(e.preventDefault(),!ee)return[3,13];t=!0,n=!1,r=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),l=cn[Symbol.iterator](),s.label=2;case 2:return(t=(i=l.next()).done)?[3,5]:(a=i.value,[4,be[a].isValid()]);case 3:if(!s.sent())return[2];s.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return o=s.sent(),n=!0,r=o,[3,8];case 7:try{t||null==l.return||l.return()}finally{if(n)throw r}return[7];case 8:return N?[3,10]:[4,A()];case 9:return s.sent(),re({show:!0,isUpdate:!1}),[3,12];case 10:return[4,W()];case 11:s.sent(),re({show:!0,isUpdate:!0}),s.label=12;case 12:return[3,14];case 13:Be(q+1),s.label=14;case 14:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[s.l0.colWithGap(16),s.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(a.G,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:cn.map((function(e,t){return(0,l.BX)(i.Fragment,{children:[0!==t&&(0,l.tZ)(en,{}),(0,l.tZ)(tn,{isActive:q===t,isComplete:ae[t],onClick:function(){return Be(t)},disabled:Ge,children:e})]},e)}))}),(0,l.BX)(a.G,{css:s.l0.flex.growAndShrink(1),children:["Basics"===J&&(0,l.tZ)(wt,{}),"Tags"===J&&(0,l.tZ)(Ye,{}),"Icon"===J&&(0,l.tZ)(zt,{}),"Cover page"===J&&(0,l.tZ)(Lt,{fs:j}),"Publishing"===J&&(0,l.tZ)(an,{})]}),(0,l.BX)(a.G,{children:[ee&&Re&&Re!==J?(0,l.tZ)(m.E,{colorway:"negative",icon:(0,l.tZ)(w.Z,{}),text:"Please fix error in ".concat(Re," section")}):null,L?(0,l.tZ)(m.E,{colorway:"negative",icon:(0,l.tZ)(w.Z,{}),text:L}):null,M?(0,l.tZ)(m.E,{colorway:"negative",icon:(0,l.tZ)(w.Z,{}),text:M}):null]}),(0,l.BX)(a.G,{css:[s.l0.rowWithGap(8),s.l0.align.center,Ie?s.l0.justify.spaceBetween:s.l0.justify.end],children:[Ie?(0,l.tZ)(v.zx,{type:"button",iconLeft:(0,l.tZ)(R.Z,{}),disabled:Ge,onClick:function(){return Be(q-1)},text:"Back"}):null,X?(0,l.tZ)(a.G,{css:[s.l0.rowWithGap(4),s.l0.color.foregroundDimmer],children:(0,l.tZ)(c.Z,{})}):null,(0,l.BX)(b.u,{tooltip:xe,placement:"bottom",isDisabled:!xe,children:[!ee&&(0,l.tZ)(v.zx,{type:"submit",colorway:"primary",iconLeft:(0,l.tZ)(x.Z,{}),disabled:Ge,text:"Next",dataCy:"publish-form-next-button"}),ee&&!N?(0,l.tZ)(v.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(s.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,l.tZ)(y.Z,{}),disabled:Boolean(Ge||Re),text:H?Se:Te,dataCy:"publish-form-publish-button"}):null,ee&&N?(0,l.tZ)(v.zx,{type:"submit",colorway:"primary",iconLeft:(0,l.tZ)(y.Z,{}),disabled:Boolean(Ge||Re),text:X?"Saving...":"Save"}):null]})]})]})]}),(0,l.tZ)(un,{user:n})]})})}var pn=n(91148);function hn(e){var t,n,i=e.replId,d=e.source,p=(0,o.NH)(),h="CurrentUser"===(null===(t=p.data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.__typename)?p.data.currentUser:null;return p.loading?(0,l.tZ)(a.G,{css:[s.l0.center,s.l0.p(32),s.l0.width(512),(0,r.Z)({},"@media (max-width: ".concat(pn.j.tabletMin,"px)"),[{width:"100%"}])],children:(0,l.tZ)(c.Z,{})}):p.error||!h?(0,l.tZ)(a.G,{css:[s.l0.center,s.l0.p(32)],children:(0,l.tZ)(u.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,l.tZ)(dn,{source:d,replId:i,currentUser:h})}},38110:function(e,t,n){n.d(t,{O:function(){return G},Z:function(){return R}});var r=n(72006),l=n(4405),i=n(9970),a=n(74985),o=(n(50959),n(82893)),s=n.n(o),u=n(43312),c=n(53312),d=n(37268),p=n(26473),h=n(88965),f=n(54864),g=n(69842),v=n(56123),m=n(25999),Z=n(69959),b=n(67217),w=p.K.a,y=(0,u.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function R(e){var t=e.post,n=t.repl,i=t.user,o=n.isTemplate?"Template":"Repl";return(0,a.BX)(p.G,{css:h.l0.colWithGap(8),children:[(0,a.BX)(p.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,a.tZ)(p.G,{css:[h.l0.flex.row,h.l0.align.center],children:(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(b.q,{size:24,username:i.username,src:i.image}),(0,a.BX)(p.G,{css:h.l0.rowWithGap(4),children:[(0,a.tZ)(c.xv,{multiline:!1,children:i.username}),(0,a.BX)(c.xv,{color:"dimmest",multiline:!1,children:[" ","published a ",o]})]})]})}),(0,a.tZ)(Z.Z,{size:12})]}),(0,a.BX)(d.Tg,{css:[h.l0.borderRadius(8),h.l0.colWithGap(8),h.l0.p(8),h.l0.position.relative,{border:"1px solid "+h.TV.outlineDimmest}],children:[(0,a.tZ)(p.G,{css:[h.l0.colWithGap(16)],children:(0,a.tZ)(p.G,{css:[h.l0.rowWithGap(16),h.l0.justify.spaceBetween],children:(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.align.start,h.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(v.ZP,{iconUrl:n.iconUrl,alt:n.title,size:84,css:[h.l0.backgroundColor.backgroundHigher]}),(0,a.BX)(p.G,{css:[h.l0.flex.growAndShrink(1),h.l0.colWithGap(4)],children:[(0,a.BX)(p.G,{css:[h.l0.flex.row],children:[(0,a.tZ)(s(),(0,l.Z)((0,r.Z)({legacyBehavior:!0,passHref:!0},(0,m.j3)(n)),{children:(0,a.tZ)(w,{css:[{color:"inherit"},y,h.l0.flex.growAndShrink(1),h.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.tZ)(c.xv,{variant:"subheadBig",multiline:!1,children:n.title})})})),n.isTemplate?(0,a.tZ)(x,{}):null]}),n.description?(0,a.tZ)(c.xv,{color:"dimmer",maxLines:2,multiline:!1,children:n.description}):null]})]})})}),(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.justify.spaceBetween,h.l0.minHeight(24)],children:[(0,a.tZ)(f.Z,{repl:{id:n.id,runCount:0,likeCount:0,commentCount:0}}),(0,a.tZ)(p.G,{css:[h.l0.position.relative,{zIndex:1},h.l0.flex.shrink(1)],children:(0,a.tZ)(g.Vs,{tags:n.tags,onTagClick:function(e){return e.preventDefault()}})})]})]})]})}var x=function(){return(0,a.tZ)("span",{css:[h.l0.display.inlineFlex,h.l0.align.center,h.l0.height(24),h.l0.px(8),h.l0.borderRadius(16),h.l0.backgroundColor.yellowDimmest,h.l0.color.yellowStrongest,h.l0.justify.center,h.l0.ml(8),{fontSize:h.TV.fontSizeSmall,lineHeight:h.TV.fontSizeSmall}],children:"Template"})},G=function(){return(0,a.BX)(p.G,{css:[h.l0.colWithGap(8),{opacity:.5}],children:[(0,a.BX)(p.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.flex.grow(1),h.l0.justify.spaceBetween],children:[(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(24),h.l0.height(24),h.l0.borderRadius(16)]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(126),h.l0.height(12),h.l0.borderRadius(4)]})]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(12),h.l0.height(12),h.l0.borderRadius(8)]})]}),(0,a.BX)(p.G,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.width("100%"),h.l0.height(132),h.l0.borderRadius(8),h.l0.colWithGap(8),h.l0.p(8)],children:[(0,a.BX)(p.G,{css:h.l0.rowWithGap(8),children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.height(84),h.l0.width(84),h.l0.borderRadius(4)]}),(0,a.BX)(p.G,{css:[h.l0.colWithGap(12),h.l0.pt(4),h.l0.flex.grow(1)],children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(80),h.l0.height(16),h.l0.borderRadius(4)]}),(0,a.BX)(p.G,{css:h.l0.colWithGap(8),children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width("100%"),h.l0.height(12),h.l0.borderRadius(4)]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width("80%"),h.l0.height(12),h.l0.borderRadius(4)]})]})]})]}),(0,a.BX)(p.G,{css:[h.l0.flex.row,h.l0.flex.grow(1),h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,a.tZ)(p.G,{css:h.l0.rowWithGap(16),children:(0,i.Z)(Array(3)).map((function(e,t){return(0,a.BX)(p.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(12),h.l0.height(12),h.l0.borderRadius(8)]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(16),h.l0.height(8),h.l0.borderRadius(2)]})]},t)}))}),(0,a.tZ)(p.G,{css:h.l0.rowWithGap(4),children:(0,i.Z)(Array(2)).map((function(e,t){return(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(48),h.l0.height(24),h.l0.borderRadius(16)]},t)}))})]})]})]})}},32437:function(e,t,n){n.d(t,{q:function(){return T}});var r=n(57389),l=n(72006),i=n(4405),a=n(2272),o=n(74985),s=n(50959),u=n(37268),c=n(26473),d=n(53312),p=n(61623),h=n(88965),f=n(16296),g=n(92369),v=n(51631),m=n(82893),Z=n.n(m),b=n(25999),w=n(88794),y=n(35650),R=n(17929),x=n(18314),G=n(44038),C=n(91148),S=function(e){var t=e.url,n=e.successMessageDurationMs,r=void 0===n?1500:n,l=(0,a.Z)(s.useState(!1),2),i=l[0],u=l[1],c=s.useRef(null);return s.useEffect((function(){return function(){c.current&&clearTimeout(c.current)}}),[]),(0,o.tZ)(p.u,{isOpen:i,placement:"bottom",tooltip:i?"Copied!":"Copy link",delay:"none",children:(0,o.tZ)(f.hU,{alt:"Copy link",tooltipHidden:!1,onClick:function(){t&&((0,w.Z)(t),u(!0),c.current=setTimeout((function(){u(!1)}),r))},children:(0,o.tZ)(y.Z,{})})})},T=function(e){var t=e.repl,n=e.isUpdate,a=(0,b.j3)(t),s=t.url?(0,b.QB)(t):"",p=t.publishedAs===v.O2.Template,f=(0,G.Z)({text:"Check out what I just published on Replit: ".concat(t.title),url:s});return(0,o.BX)(u.Tg,{background:"default",css:[h.l0.borderRadius(8),h.l0.overflow("hidden"),h.l0.colWithGap(16),h.l0.width(510),h.l0.p(16),h.l0.flex.growAndShrink(1),(0,r.Z)({},"@media (max-width: ".concat(C.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,o.BX)(c.G,{css:[h.l0.colWithGap(16)],children:[(0,o.BX)(d.xv,{variant:"subheadBig",multiline:!1,children:[p?"Template":"Repl"," ",n?"updated":"published","!"]})," ",(0,o.BX)(c.G,{css:[h.l0.colWithGap(4)],children:[(0,o.tZ)(d.xv,{variant:"small",css:[h.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,o.BX)(c.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,o.tZ)(Z(),(0,i.Z)((0,l.Z)({legacyBehavior:!0},a),{css:[h.l0.flex.growAndShrink(1)],children:(0,o.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:s})})),(0,o.tZ)(S,{url:s})]})]})]}),(0,o.BX)(c.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end,(0,r.Z)({alignItems:"flex-end"},h.BC.max("mobileMax"),[h.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:[(0,o.tZ)(g.Z,{prefetch:!1,href:f,iconLeft:(0,o.tZ)(R.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,r.Z)({},h.BC.max("mobileMax"),[h.l0.mr(0)])]}),(0,o.tZ)(g.Z,{iconRight:(0,o.tZ)(x.Z,{}),text:p?"Go to Templates":"Go to Community",href:p?{pathname:"/templates/templates"}:{pathname:"/postsFeed",query:{order:"new"}},as:p?"/templates":"/community/all"})]})]})}},79790:function(e,t,n){n.d(t,{r:function(){return Z}});var r=n(57135),l=n(2272),i=n(96583),a=n(72006),o=n(43119),s=n(71440),u=n(86080),c=n(50216);function d(){var e=(0,o.Z)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,o.Z)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h={},f=(0,s.Ps)(d(),u.FW);var g=(0,s.Ps)(p(),u.FW);var v="Something went wrong publishing your Template";function m(e){if(e.error)return e.error.message||v;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return v}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return v}}}function Z(){var e=(0,l.Z)(function(e){var t=(0,a.Z)({},h,e);return c.D(f,t)}(),2),t=e[0],n=e[1],o=(0,l.Z)(function(e){var t=(0,a.Z)({},h,e);return c.D(g,t)}(),2),s=o[0],u=o[1],d=function(){var e=(0,r.Z)((function(e){var t,r;return(0,i.__generator)(this,(function(l){switch(l.label){case 0:if(t=e.input,n.loading||u.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,s({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(r=l.sent()).data,error:m(r)}];case 3:return l.sent(),[2,{data:null,error:v}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((function(e){var r,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(r=e.input,n.loading||u.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t({variables:{input:r}})];case 2:return[2,{data:(l=i.sent()).data,error:m(l)}];case 3:return i.sent(),[2,{data:null,error:v}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{createRelease:d,createDeployment:p,data:n.data||u.data,loading:n.loading||u.loading,error:m(n||u)}}}}]);
//# sourceMappingURL=9863-13c8006e0dbdab03.js.map